(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
    "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var Now_1=require("../uikit/helpers/Now"),CADisplayLink=function(){function i(i){this.vsyncBlock=i,this.timestamp=0,this.cancelled=!1}return i.prototype.active=function(){var i=this;this.handler=requestAnimationFrame(function(){i.cancelled||(i.timestamp=Now_1.currentAnimationTimeMillis(),i.vsyncBlock(),i.active())})},i.prototype.invalidate=function(){this.cancelled=!0,cancelAnimationFrame(this.handler)},i}();exports.CADisplayLink=CADisplayLink;
    },{"../uikit/helpers/Now":79}],2:[function(require,module,exports){
    "use strict";var __extends=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(exports,"__esModule",{value:!0});var CALayer_1=require("./CALayer"),CAGradientLayer=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.defsElement=document.createElementNS("http://www.w3.org/2000/svg","defs"),e.linearGradientElement=document.createElementNS("http://www.w3.org/2000/svg","linearGradient"),e._colors=[],e._locations=[],e._startPoint={x:0,y:0},e._endPoint={x:1,y:0},e}return __extends(e,t),e.prototype.createSVGElement=function(){t.prototype.createSVGElement.call(this),void 0!==this._svgElement&&(this._svgElement.contains(this.defsElement)||(this.linearGradientElement.id="filter."+this._uuid,this.defsElement.appendChild(this.linearGradientElement),this._svgElement.appendChild(this.defsElement))),this._bgElement.setAttribute("fill","url(#filter."+this._uuid+")")},Object.defineProperty(e.prototype,"backgroundColor",{set:function(t){this._bgElement.setAttribute("fill","url(#filter."+this._uuid+")")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"colors",{get:function(){return this._colors},set:function(t){this._colors=t,this.resetStops()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"locations",{get:function(){return this._locations},set:function(t){this._locations=t,this.resetStops()},enumerable:!0,configurable:!0}),e.prototype.resetStops=function(){var t=this;this.linearGradientElement.innerHTML="";var e=this.colors,n=this.locations.length===this.colors.length?this.locations:void 0;void 0===n?e.forEach(function(n,r){var i=document.createElementNS("http://www.w3.org/2000/svg","stop");i.setAttribute("offset",(r/e.length*100).toString()+"%"),i.setAttribute("stop-color",t.colors[r].toStyle()),t.linearGradientElement.appendChild(i)}):e.length===n.length&&n.forEach(function(e,n){var r=document.createElementNS("http://www.w3.org/2000/svg","stop");r.setAttribute("offset",(100*e).toString()+"%"),r.setAttribute("stop-color",t.colors[n].toStyle()),t.linearGradientElement.appendChild(r)})},Object.defineProperty(e.prototype,"startPoint",{get:function(){return this._startPoint},set:function(t){this._startPoint=t,this.linearGradientElement.setAttribute("x1",t.x.toString()),this.linearGradientElement.setAttribute("y1",t.y.toString())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"endPoint",{get:function(){return this._endPoint},set:function(t){this._endPoint=t,this.linearGradientElement.setAttribute("x2",t.x.toString()),this.linearGradientElement.setAttribute("y2",t.y.toString())},enumerable:!0,configurable:!0}),e}(CALayer_1.CALayer);exports.CAGradientLayer=CAGradientLayer;
    },{"./CALayer":3}],3:[function(require,module,exports){
    "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var UIRect_1=require("../uikit/UIRect"),UILabel_1=require("../uikit/UILabel"),CALayer=function(){function t(){this._uuid="calayer."+Math.random()+Math.random(),this._svgElement=void 0,this._clipPathElement=document.createElementNS("http://www.w3.org/2000/svg","clipPath"),this._bgElement=document.createElementNS("http://www.w3.org/2000/svg","rect"),this._contentElement=document.createElementNS("http://www.w3.org/2000/svg","g"),this._borderElement=document.createElementNS("http://www.w3.org/2000/svg","g"),this._view=void 0,this._frame=UIRect_1.UIRectZero,this._hidden=!1,this._cornerRadius=0,this._borderWidth=0,this._borderColor=void 0,this.superlayer=void 0,this.sublayers=[],this._backgroundColor=void 0,this._opacity=1,this._masksToBounds=!1,this._shadowColor=void 0,this._shadowOpacity=0,this._shadowOffset={width:0,height:-3},this._shadowRadius=3,this._bgElement.setAttribute("fill","transparent")}return Object.defineProperty(t.prototype,"view",{get:function(){return this.superlayer?this.superlayer._view:this._view},set:function(t){this._view=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"frame",{get:function(){return this._frame},set:function(t){if(this._frame=t,void 0===this._view||void 0!==this._svgElement){this.createSVGElement(),this._svgElement&&(this._svgElement.style.position="absolute",this._svgElement.setAttribute("transform","matrix(1.0, 0.0, 0.0, 1.0, "+t.x.toString()+", "+t.y.toString()+")"),this._svgElement.setAttribute("width",t.width.toString()),this._svgElement.setAttribute("height",t.height.toString())),this._bgElement.setAttribute("width",t.width.toString()),this._bgElement.setAttribute("height",t.height.toString()),this._clipPathElement.appendChild(this._bgElement.cloneNode(!0)),this._borderElement.innerHTML="";var e=this._bgElement.cloneNode(!0);e instanceof SVGElement&&(e.style.fillOpacity="0"),this._borderElement.appendChild(e),this._contentElement.setAttribute("width",t.width.toString()),this._contentElement.setAttribute("height",t.height.toString())}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hidden",{get:function(){return this._view?this._view.hidden:this._hidden},set:function(t){this._hidden=t,this._view?this._view.hidden=t:(this._svgElement&&(this._svgElement.style.display=t?"none":null),this._bgElement.style.display=t?"none":null,this._contentElement.style.display=t?"none":null)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cornerRadius",{get:function(){return this._cornerRadius},set:function(t){this._cornerRadius=t,this._view?this._view.domElement.style.borderRadius=t.toString()+"px":(this._bgElement.setAttribute("rx",t.toString()),this._bgElement.setAttribute("ry",t.toString()))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"borderWidth",{get:function(){return this._borderWidth},set:function(t){this._borderWidth=t,this.resetBorder()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"borderColor",{get:function(){return this._borderColor},set:function(t){this._borderColor=t,this.resetBorder()},enumerable:!0,configurable:!0}),t.prototype.resetBorder=function(){if(this._view)this.borderWidth>0&&this.borderColor?(this._view.domElement.style.borderWidth=this.borderWidth.toString()+"px",this._view.domElement.style.borderColor=this.borderColor.toStyle(),this._view.domElement.style.borderStyle=this.borderWidth>0?"solid":"unset",this._view.domElement.style.boxSizing=this.borderWidth>0?"border-box":"unset"):this._view.domElement.style.borderStyle="unset";else if(this.createSVGElement(),this.borderWidth>0&&this.borderColor&&this._svgElement){this._borderElement.style.strokeWidth=this.borderWidth.toString()+"px",this._borderElement.style.stroke=this.borderColor.toStyle(),this._borderElement.innerHTML="";var t=this._bgElement.cloneNode(!0);t instanceof SVGElement&&(t.style.fillOpacity="0"),this._borderElement.appendChild(t),this._borderElement.style.display=null,this._svgElement.appendChild(this._borderElement)}else this._borderElement.style.display="none"},t.prototype.moveBorderElementToFront=function(){void 0!==this._svgElement&&this._svgElement.lastElementChild!==this._borderElement&&(this._svgElement.contains(this._borderElement)&&this._svgElement.removeChild(this._borderElement),this._svgElement.appendChild(this._borderElement))},t.prototype.removeFromSuperlayer=function(){if(this.superlayer){var t=this.superlayer.sublayers.indexOf(this);t>=0&&(this.superlayer.sublayers.splice(t,1),this.superlayer._svgElement&&this._svgElement&&this.superlayer._svgElement.contains(this._svgElement)&&this.superlayer._svgElement.removeChild(this._svgElement)),this.superlayer=void 0}},t.prototype.addSublayer=function(t){void 0!==t.superlayer&&t.removeFromSuperlayer(),this.sublayers.push(t),t.superlayer=this,this.createSVGElement(),t.createSVGElement(),this._svgElement&&t._svgElement&&(this._svgElement.appendChild(t._svgElement),this.moveBorderElementToFront())},t.prototype.createSVGElement=function(){0==this.sublayers.length&&void 0!==this._view||void 0===this._svgElement&&(this._view?(this._svgElement=document.createElementNS("http://www.w3.org/2000/svg","svg"),this._svgElement.appendChild(this._bgElement),this._svgElement.appendChild(this._contentElement),this._svgElement&&(this._svgElement.setAttribute("width",this.frame.width.toString()),this._svgElement.setAttribute("height",this.frame.height.toString())),0==this._view.domElement.childElementCount?this._view.domElement.appendChild(this._svgElement):this._view.domElement.insertBefore(this._svgElement,this._view.domElement.children[0])):(this._svgElement=document.createElementNS("http://www.w3.org/2000/svg","g"),this._svgElement.appendChild(this._bgElement),this._svgElement.appendChild(this._contentElement)))},Object.defineProperty(t.prototype,"backgroundColor",{get:function(){return this._view?this._view.backgroundColor:this._backgroundColor},set:function(t){this._backgroundColor=t,this._view?this._view.backgroundColor=t:this._bgElement.setAttribute("fill",t?t.toStyle():"transparent")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"opacity",{get:function(){return this._view?this._view.alpha:this._opacity},set:function(t){this._opacity=t,this._view?this._view.alpha=t:(this._bgElement.style.opacity=t.toString(),this._contentElement.style.opacity=t.toString())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"masksToBounds",{get:function(){return this._masksToBounds},set:function(t){this._masksToBounds=t,this._view?this._view.clipsToBounds=t:(this.createSVGElement(),t&&this._svgElement?(this._clipPathElement.id="clip."+this._uuid,this._clipPathElement.innerHTML="",this._clipPathElement.appendChild(this._bgElement.cloneNode(!0)),this._svgElement.appendChild(this._clipPathElement),this._svgElement.setAttribute("clip-path","url(#clip."+this._uuid+")")):this._svgElement&&this._svgElement.setAttribute("clip-path",""))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"shadowColor",{get:function(){return this._shadowColor},set:function(t){this._shadowColor=t,this.resetShadow()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"shadowOpacity",{get:function(){return this._shadowOpacity},set:function(t){this._shadowOpacity=t,this.resetShadow()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"shadowOffset",{get:function(){return this._shadowOffset},set:function(t){this._shadowOffset=t,this.resetShadow()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"shadowRadius",{get:function(){return this._shadowRadius},set:function(t){this._shadowRadius=t,this.resetShadow()},enumerable:!0,configurable:!0}),t.prototype.resetShadow=function(){this._view&&(this.shadowOpacity>0&&this.shadowColor&&this.shadowColor.a>0?this._view instanceof UILabel_1.UILabel?this._view.domElement.style.textShadow=this.shadowOffset.width.toString()+"px "+this.shadowOffset.height.toString()+"px "+this.shadowRadius.toString()+"px "+this.shadowColor.colorWithAlphaComponent(this.shadowOpacity).toStyle():this._view.domElement.style.boxShadow=this.shadowOffset.width.toString()+"px "+this.shadowOffset.height.toString()+"px "+this.shadowRadius.toString()+"px "+this.shadowColor.colorWithAlphaComponent(this.shadowOpacity).toStyle():(this._view.domElement.style.textShadow=null,this._view.domElement.style.boxShadow=null))},t}();exports.CALayer=CALayer;
    },{"../uikit/UILabel":42,"../uikit/UIRect":54}],4:[function(require,module,exports){
    "use strict";var __extends=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(exports,"__esModule",{value:!0});var CAShapeFillRule,CAShapeLineCap,CAShapeLineJoin,CALayer_1=require("./CALayer");!function(e){e[e.nonZero=0]="nonZero",e[e.evenOdd=1]="evenOdd"}(CAShapeFillRule=exports.CAShapeFillRule||(exports.CAShapeFillRule={})),function(e){e[e.butt=0]="butt",e[e.round=1]="round",e[e.square=2]="square"}(CAShapeLineCap=exports.CAShapeLineCap||(exports.CAShapeLineCap={})),function(e){e[e.miter=0]="miter",e[e.round=1]="round",e[e.bevel=2]="bevel"}(CAShapeLineJoin=exports.CAShapeLineJoin||(exports.CAShapeLineJoin={}));var CAShapeLayer=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.pathElement=document.createElementNS("http://www.w3.org/2000/svg","path"),t._path=void 0,t._fillColor=void 0,t._fillRule=CAShapeFillRule.evenOdd,t._lineCap=CAShapeLineCap.butt,t._lineDashPattern=[],t._lineDashPhase=0,t._lineJoin=CAShapeLineJoin.miter,t._lineWidth=0,t._miterLimit=10,t._strokeColor=void 0,t.strokeStart=0,t.strokeEnd=1,t}return __extends(t,e),t.prototype.createSVGElement=function(){e.prototype.createSVGElement.call(this),this._svgElement&&!this._svgElement.contains(this.pathElement)&&this._svgElement.appendChild(this.pathElement)},Object.defineProperty(t.prototype,"path",{get:function(){return this._path},set:function(e){this._path=e,e?this.pathElement.setAttribute("d",e.d3Paths.map(function(e){return e.toString()}).join(" ")):this.pathElement.removeAttribute("d")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fillColor",{get:function(){return this._fillColor},set:function(e){this._fillColor=e,this.pathElement.style.fill=e?e.toStyle():"black"},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fillRule",{get:function(){return this._fillRule},set:function(e){this._fillRule=e,e==CAShapeFillRule.evenOdd?this.pathElement.style.fillRule="evenodd":e==CAShapeFillRule.nonZero&&(this.pathElement.style.fillRule="nonzero")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"lineCap",{get:function(){return this._lineCap},set:function(e){switch(this._lineCap=e,e){case CAShapeLineCap.butt:this.pathElement.style.strokeLinecap="butt";break;case CAShapeLineCap.round:this.pathElement.style.strokeLinecap="round";break;case CAShapeLineCap.square:this.pathElement.style.strokeLinecap="square"}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"lineDashPattern",{get:function(){return this._lineDashPattern},set:function(e){this._lineDashPattern=e,this.pathElement.style.strokeDasharray=e.join(" ")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"lineDashPhase",{get:function(){return this._lineDashPhase},set:function(e){this._lineDashPhase=e,this.pathElement.style.strokeDashoffset=e.toString()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"lineJoin",{get:function(){return this._lineJoin},set:function(e){switch(this._lineJoin=e,e){case CAShapeLineJoin.miter:this.pathElement.style.strokeLinejoin="miter";break;case CAShapeLineJoin.bevel:this.pathElement.style.strokeLinejoin="bevel";break;case CAShapeLineJoin.round:this.pathElement.style.strokeLinejoin="round"}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"lineWidth",{get:function(){return this._lineWidth},set:function(e){this._lineWidth=e,this.pathElement.style.strokeWidth=e.toString()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"miterLimit",{get:function(){return this._miterLimit},set:function(e){this._miterLimit=e,this.pathElement.style.strokeMiterlimit=e.toString()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"strokeColor",{get:function(){return this._strokeColor},set:function(e){this._strokeColor=e,this.pathElement.style.stroke=e?e.toStyle():null},enumerable:!0,configurable:!0}),t}(CALayer_1.CALayer);exports.CAShapeLayer=CAShapeLayer;
    },{"./CALayer":3}],5:[function(require,module,exports){
    "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var UIReload_1=require("../uikit/UIReload"),KIMIDebugger=function(){function KIMIDebugger(e){void 0===e&&(e=window.location.hostname+":8090"),this.remoteAddress=e,this.worker=new Worker(window.URL.createObjectURL(new Blob(['\n    onmessage = function(e){\n        if (e.data === "fetchUpdate") {\n            fetchUpdate()\n        }\n        else if (e.data.indexOf("sendLog:") === 0) {\n            sendLog(e.data)\n        }\n        else {\n            eval(e.data)\n        }\n    }\n\n    var lastTag = undefined\n\n    function sendLog(body) {\n        const xmlRequest = new XMLHttpRequest\n        xmlRequest.open("POST", \'http://'+this.remoteAddress+"/console', true)\n        xmlRequest.send(body.replace('sendLog:', ''))\n    }\n\n    function fetchUpdate() {\n        setTimeout(function() {\n            let xmlRequest = new XMLHttpRequest\n            xmlRequest.open(\"POST\", 'http://"+this.remoteAddress+"/version', true)\n            xmlRequest.setRequestHeader('code-version', this.lastTag)\n            xmlRequest.addEventListener(\"loadend\", () => {\n                if (this.closed) {\n                    return\n                }\n                const tag = xmlRequest.responseText\n                if (tag === undefined || tag.length == 0) {\n                    fetchUpdate()\n                    return\n                }\n                if (this.lastTag === undefined) {\n                    this.lastTag = tag\n                    fetchUpdate()\n                }\n                else if (this.lastTag !== tag) {\n                    this.lastTag = tag\n                    if (this.lastTag.indexOf(\".reload\") >= 0) {\n                        postMessage('livereload')\n                    }\n                    else {\n                        postMessage('connect')\n                    }\n                }\n                else {\n                    fetchUpdate()\n                }\n            })\n            xmlRequest.send()\n        }, 500)\n    }\n\n    "]))),this.lastTag=void 0,this.isAddedWorkerMessageHandler=!1,this.addConsoleHandler(),KIMIDebugger.shared=this}return KIMIDebugger.prototype.addConsoleHandler=function(){if(window.location.href.indexOf("#debug")>0||window.location.href.indexOf("?debug")>0){var e=this.worker,t=window.console;["log","info","debug","error","warn"].forEach(function(n){var s=t[n];t[n]=function(){for(var t=[],o=0;o<arguments.length;o++)"string"==typeof arguments[o]&&0===arguments[o].indexOf("<<<")||t.push(arguments[o]);s.apply(this,t);var a=[];for(o=0;o<arguments.length;o++)try{void 0===arguments[o].constructor||arguments[o].constructor.toString().indexOf("[native code]")>=0?a.push(arguments[o]):a.push(String(arguments[o]))}catch(e){}e.postMessage("sendLog:"+JSON.stringify({type:n,values:a}))}})}},KIMIDebugger.prototype.connect=function(callback,fallback){var _this=this,debugging=window.location.href.indexOf("#debug")>0||window.location.href.indexOf("?debug")>0;if(!0===debugging){var xmlRequest_1=new XMLHttpRequest;xmlRequest_1.open("POST","http://"+this.remoteAddress+"/source",!0),xmlRequest_1.addEventListener("loadend",function(){UIReload_1.UIReloader.shared.items={},UIReload_1.UIReloader.shared.instances={};var script=xmlRequest_1.responseText;try{eval(script),callback()}catch(e){console.error(e)}_this.fetchUpdate(callback)}),xmlRequest_1.addEventListener("error",function(){void 0!==_this.lastTag||fallback()}),xmlRequest_1.send()}else fallback()},KIMIDebugger.prototype.liveReload=function(callback){var _this=this,xmlRequest=new XMLHttpRequest;xmlRequest.open("POST","http://"+this.remoteAddress+"/livereload",!1),xmlRequest.addEventListener("loadend",function(){var script=xmlRequest.responseText;try{eval(script)}catch(e){console.error(e)}_this.fetchUpdate(callback)}),xmlRequest.addEventListener("error",function(){_this.fetchUpdate(callback)}),xmlRequest.send()},KIMIDebugger.prototype.fetchUpdate=function(e){var t=this;this.worker.postMessage("fetchUpdate"),this.isAddedWorkerMessageHandler||(this.isAddedWorkerMessageHandler=!0,this.worker.addEventListener("message",function(n){"livereload"===n.data?t.liveReload(e):"connect"===n.data&&t.connect(e,function(){})}))},KIMIDebugger.uuidv4=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})},KIMIDebugger}();exports.KIMIDebugger=KIMIDebugger;
    },{"../uikit/UIReload":56}],6:[function(require,module,exports){
    "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var URL_1=require("./URL"),Data_1=require("./Data"),Bundle=function(){function e(e){this.type=e,this.resources={}}return e.prototype.resourcePath=function(e,t,r){if("native"===this.type){var i=document.createElement("a");return i.href=void 0!==r?r+"/"+e+(void 0!==t?"."+t:""):e+(void 0!==t?"."+t:""),i.href}if("js"===this.type){if(void 0!==r&&void 0!==this.resources[r+"/"+e+(void 0!==t?"."+t:"")])return"xt://"+r+"/"+e+(void 0!==t?"."+t:"");if(void 0!==this.resources[e+(void 0!==t?"."+t:"")])return"xt://"+e+(void 0!==t?"."+t:"")}},e.prototype.resourceURL=function(e,t,r){var i=this.resourcePath(e,t,r);return void 0!==i?URL_1.URL.URLWithString(i):void 0},e.prototype.addResource=function(e,t){"js"===this.type&&(this.resources[e]=new Data_1.Data({base64EncodedString:t}))},e.native=new e("native"),e.js=new e("js"),e}();exports.Bundle=Bundle;
    },{"./Data":7,"./URL":11}],7:[function(require,module,exports){
    "use strict";var __extends=this&&this.__extends||function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,t){r.__proto__=t}||function(r,t){for(var e in t)t.hasOwnProperty(e)&&(r[e]=t[e])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),__read=this&&this.__read||function(r,t){var e="function"==typeof Symbol&&r[Symbol.iterator];if(!e)return r;var n,a,o=e.call(r),f=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)f.push(n.value)}catch(r){a={error:r}}finally{try{n&&!n.done&&(e=o.return)&&e.call(o)}finally{if(a)throw a.error}}return f},__spread=this&&this.__spread||function(){for(var r=[],t=0;t<arguments.length;t++)r=r.concat(__read(arguments[t]));return r};Object.defineProperty(exports,"__esModule",{value:!0});var Data=function(){function r(t){if(this._arrayBuffer=new ArrayBuffer(0),t instanceof ArrayBuffer)this._arrayBuffer=t.slice(0);else if(void 0!==t)if("string"==typeof t.utf8String){if("function"==typeof TextEncoder)return new r((new TextEncoder).encode(t.utf8String).buffer);for(var e=unescape(encodeURIComponent(t.utf8String)),n=new ArrayBuffer(e.length),a=new Uint8Array(n),o=0,f=e.length;o<f;o++)a[o]=e.charCodeAt(o);this._arrayBuffer=n}else if(t.base64EncodedData instanceof r){var i=(c=window.atob(new Uint8Array(t.base64EncodedData._arrayBuffer).reduce(function(r,t){return r+String.fromCharCode(t)},""))).length,u=new Uint8Array(i);for(o=0;o<i;o++)u[o]=c.charCodeAt(o);this._arrayBuffer=u.buffer}else if("string"==typeof t.base64EncodedString){var c;for(i=(c=window.atob(t.base64EncodedString)).length,u=new Uint8Array(i),o=0;o<i;o++)u[o]=c.charCodeAt(o);this._arrayBuffer=u.buffer}}return r.prototype.arrayBuffer=function(){return this._arrayBuffer},r.prototype.json=function(){var r=this.utf8String();if(void 0!==r)try{return JSON.parse(r)}catch(r){return}},r.prototype.utf8String=function(){return"function"==typeof TextDecoder?(new TextDecoder).decode(this._arrayBuffer):decodeURIComponent(escape(new Uint8Array(this._arrayBuffer).reduce(function(r,t){return r+String.fromCharCode(t)},"")))},r.prototype.base64EncodedData=function(){return new r({utf8String:this.base64EncodedString()})},r.prototype.base64EncodedString=function(){return window.btoa(new Uint8Array(this._arrayBuffer).reduce(function(r,t){return r+String.fromCharCode(t)},""))},r.prototype.mutable=function(){return new MutableData(this._arrayBuffer)},r}();exports.Data=Data;var MutableData=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return __extends(t,r),t.prototype.appendData=function(r){this._arrayBuffer=new Uint8Array(__spread(new Uint8Array(this._arrayBuffer),new Uint8Array(r._arrayBuffer))).buffer},t.prototype.appendArrayBuffer=function(r){this._arrayBuffer=new Uint8Array(__spread(new Uint8Array(this._arrayBuffer),new Uint8Array(r))).buffer},t.prototype.setData=function(r){this._arrayBuffer=r._arrayBuffer.slice(0)},t.prototype.immutable=function(){return new Data(this._arrayBuffer)},t}(Data);exports.MutableData=MutableData;
    },{}],8:[function(require,module,exports){
    "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var DispatchQueue=function(){function e(e){}return e.prototype.async=function(e){setTimeout(e,0)},e.prototype.asyncAfter=function(e,t){setTimeout(t,1e3*e)},e.prototype.isolate=function(e){for(var t=[],o=1;o<arguments.length;o++)t[o-1]=arguments[o];setTimeout(function(){e.apply(void 0,t)},0)},e.main=new e,e.global=new e,e}();exports.DispatchQueue=DispatchQueue;
    },{}],9:[function(require,module,exports){
    "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var Data_1=require("./Data"),Bundle_1=require("./Bundle"),unavailabelError=Error("Kimi-Web-SDK not support FileManager API"),FileManager=function(){function e(){this.tmpFiles={}}return e.prototype.subpaths=function(e,r){return 0===e.indexOf("xt://")?Object.keys(Bundle_1.Bundle.js.resources).filter(function(r){return 0===r.indexOf(e.replace("xt://",""))}):0===e.indexOf("tmp://")?Object.keys(this.tmpFiles).filter(function(r){return 0===r.indexOf(e)}):[]},e.prototype.createDirectory=function(e,r){},e.prototype.createFile=function(e,r){return 0===e.indexOf("xt://")?Error("readonly"):0!==e.indexOf("tmp://")?unavailabelError:void(this.tmpFiles[e]=r)},e.prototype.readFile=function(e){if(0===e.indexOf("xt://"))return Bundle_1.Bundle.js.resources[e.replace("xt://","")];if(0===e.indexOf("tmp://"))return this.tmpFiles[e];if(0===e.indexOf("http://")||0===e.indexOf("https://")){var r=new XMLHttpRequest;return r.open("GET",e,!1),r.send(),void 0!==r.response?new Data_1.Data({utf8String:r.response}):void 0}},e.prototype.removeItem=function(e){if(0!==e.indexOf("xt://")){if(0!==e.indexOf("tmp://"))return unavailabelError;delete this.tmpFiles[e]}else delete Bundle_1.Bundle.js.resources[e.replace("xt://","")]},e.prototype.copyItem=function(e,r){if(0===r.indexOf("xt://"))return Error("readonly");if(0===r.indexOf("tmp://")){var t=this.readFile(e);if(!t)return Error("file not found.");this.createFile(r,t)}return unavailabelError},e.prototype.moveItem=function(e,r){if(0===r.indexOf("xt://"))return Error("readonly");if(0===r.indexOf("tmp://")){var t=this.readFile(e);if(!t)return Error("file not found.");this.createFile(r,t),this.removeItem(e)}return unavailabelError},e.prototype.fileExists=function(e){return 0===e.indexOf("xt://")?Bundle_1.Bundle.js.resources[e.replace("xt://","")]instanceof Data_1.Data:0===e.indexOf("tmp://")&&void 0!==this.tmpFiles[e]},e.prototype.dirExists=function(e){return!0},e.defaultManager=new e,e.documentDirectory="tmp://document/",e.libraryDirectory="tmp://library/",e.cacheDirectory="tmp://cache/",e.temporaryDirectory="tmp://tmp/",e.jsBundleDirectory="xt://",e}();exports.FileManager=FileManager;
    },{"./Bundle":6,"./Data":7}],10:[function(require,module,exports){
    "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var Timer=function(){function e(e,t,n){var i=this;this.repeats=n,this.cancelled=!1,this.handler=n?setInterval(function(){!i.cancelled&&t&&t()},1e3*e):setTimeout(function(){!i.cancelled&&t&&t()},1e3*e)}return e.sleep=function(t){return new Promise(function(n){new e(t,function(){n()},!1)})},e.prototype.invalidate=function(){this.cancelled=!0,this.repeats?clearInterval(this.handler):clearTimeout(this.handler)},e}();exports.Timer=Timer;
    },{}],11:[function(require,module,exports){
    "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var windowURL=window.URL,URL=function(){function t(t){this.URLString=t}return t.URLWithString=function(e,n){return new t(void 0!==n&&void 0!==windowURL?new windowURL(e,n.absoluteString).href:e)},t.fileURLWithPath=function(t){throw Error()},Object.defineProperty(t.prototype,"absoluteString",{get:function(){return this.URLString},enumerable:!0,configurable:!0}),t}();exports.URL=URL;
    },{}],12:[function(require,module,exports){
    "use strict";var __extends=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function i(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}();Object.defineProperty(exports,"__esModule",{value:!0});var URLRequestCachePolicy,URL_1=require("./URL");!function(e){e[e.useProtocol=0]="useProtocol",e[e.ignoringLocalCache=1]="ignoringLocalCache",e[e.returnCacheElseLoad=2]="returnCacheElseLoad",e[e.returnCacheDontLoad=3]="returnCacheDontLoad"}(URLRequestCachePolicy=exports.URLRequestCachePolicy||(exports.URLRequestCachePolicy={}));var URLRequest=function(){function e(e,t,o){void 0===t&&(t=URLRequestCachePolicy.useProtocol),void 0===o&&(o=15),this.cachePolicy=t,this.timeout=o,this.HTTPMethod=void 0,this.allHTTPHeaderFields=void 0,this.URL=e instanceof URL_1.URL?e:function(){var t=URL_1.URL.URLWithString(e);if(void 0===t)throw Error("invalid URLString.");return t}()}return e.prototype.valueForHTTPHeaderField=function(e){},e.prototype.mutable=function(){return Object.assign(new MutableURLRequest(this.URL,this.cachePolicy,this.timeout),this)},e}();exports.URLRequest=URLRequest;var MutableURLRequest=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.HTTPMethod="GET",t.allHTTPHeaderFields={},t.HTTPBody=void 0,t}return __extends(t,e),t.prototype.setValueForHTTPHeaderField=function(e,t){void 0===this.allHTTPHeaderFields&&(this.allHTTPHeaderFields={}),this.allHTTPHeaderFields[t]=e},t.prototype.immutable=function(){return Object.assign(new URLRequest(this.URL,this.cachePolicy,this.timeout),this)},t}(URLRequest);exports.MutableURLRequest=MutableURLRequest;
    },{"./URL":11}],13:[function(require,module,exports){
    "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var URLResponse=function(){return function(){this.URL=void 0,this.expectedContentLength=0,this.MIMEType=void 0,this.textEncodingName=void 0,this.statusCode=0,this.allHeaderFields={}}}();exports.URLResponse=URLResponse;
    },{}],14:[function(require,module,exports){
    "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var URLSessionTaskState,URLRequest_1=require("./URLRequest"),URL_1=require("./URL"),Data_1=require("./Data"),URLResponse_1=require("./URLResponse"),URLSession=function(){function e(){}return e.prototype.fetch=function(e){var t=this;return new Promise(function(s,n){t.dataTask(e,function(e,t,r){r&&void 0!==e?n(r):s(e)}).resume()})},e.prototype.dataTask=function(e,t){if(e instanceof URLRequest_1.URLRequest)return new URLSessionTask(e,t);if(e instanceof URL_1.URL)return new URLSessionTask(new URLRequest_1.URLRequest(e),t);var s=URL_1.URL.URLWithString(e);if(void 0!==s)return new URLSessionTask(new URLRequest_1.URLRequest(s),t);throw Error("invalid url.")},e.shared=new e,e}();exports.URLSession=URLSession,function(e){e[e.running=0]="running",e[e.suspended=1]="suspended",e[e.cancelling=2]="cancelling",e[e.completed=3]="completed"}(URLSessionTaskState=exports.URLSessionTaskState||(exports.URLSessionTaskState={}));var URLSessionTask=function(){function e(e,t){this.request=e,this.complete=t,this._xmlRequest=void 0,this.state=URLSessionTaskState.suspended,this.countOfBytesExpectedToReceive=0,this.countOfBytesReceived=0,this.countOfBytesExpectedToSend=0,this.countOfBytesSent=0}return e.prototype.resume=function(){var e=this,t=new XMLHttpRequest;if(t.timeout=1e3*this.request.timeout,t.responseType="arraybuffer",t.open(this.request.HTTPMethod||"GET",this.request.URL.absoluteString,!0),this.request.allHTTPHeaderFields)for(var s in this.request.allHTTPHeaderFields)this.request.allHTTPHeaderFields.hasOwnProperty(s)&&t.setRequestHeader(s,this.request.allHTTPHeaderFields[s]);t.addEventListener("progress",function(t){t.lengthComputable&&(e.countOfBytesReceived=t.loaded,e.countOfBytesExpectedToReceive=t.total)}),t.addEventListener("loadend",function(){e.state=URLSessionTaskState.completed;var s,n,r=t.response instanceof ArrayBuffer?new Data_1.Data(t.response):void 0,o=new URLResponse_1.URLResponse;o.URL=e.request.URL,o.expectedContentLength=parseInt(t.getResponseHeader("Content-Type")||"0"),isNaN(o.expectedContentLength)&&(o.expectedContentLength=0),o.MIMEType=(s=t.getResponseHeader("Content-Type")||"").indexOf(";")>=0?s.split(";")[0].trim():s.trim(),o.textEncodingName=function(){var e=t.getResponseHeader("Content-Type")||"";return e.indexOf("charset=")>=0?e.split("charset=").pop().trim():"UTF-8"}(),o.statusCode=t.status,o.allHeaderFields=(n={},t.getAllResponseHeaders().split("\n").forEach(function(e){var t=e.indexOf(": ");if(t>=0){var s=e.substring(0,t).replace(/\b[a-z]/g,function(e){return e.toUpperCase()}).trim(),r=e.substring(t+2).trim();n[s]=r}}),n),e.complete(r,o,void 0)}),t.addEventListener("error",function(s,n){e.state=URLSessionTaskState.completed;var r=t.response instanceof ArrayBuffer?new Data_1.Data(t.response):void 0,o=new URLResponse_1.URLResponse;o.URL=e.request.URL,o.statusCode=t.status,e.complete(r,o,n.error)}),this.state=URLSessionTaskState.running,this.request.HTTPBody instanceof Data_1.Data?t.send(this.request.HTTPBody._arrayBuffer):t.send(),this._xmlRequest=t},e.prototype.cancel=function(){this.state=URLSessionTaskState.cancelling,this._xmlRequest&&this._xmlRequest.abort()},e}();exports.URLSessionTask=URLSessionTask;
    },{"./Data":7,"./URL":11,"./URLRequest":12,"./URLResponse":13}],15:[function(require,module,exports){
    "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var UUID=function(){function x(x){void 0===x&&(x=void 0),this.UUIDString=x||this.uuidv4()}return x.prototype.uuidv4=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(x){var t=16*Math.random()|0;return("x"==x?t:3&t|8).toString(16)})},x}();exports.UUID=UUID;
    },{}],16:[function(require,module,exports){
    "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var UserDefaults=function(){function e(e){void 0===e&&(e=void 0),this.suiteName=e}return e.prototype.dump=function(){var e=this,t="com.xt."+(this.suiteName||"standard")+".",r=[];for(var o in localStorage)0===o.indexOf(t)&&r.push(o);var a={};return r.forEach(function(r){var o=r.replace(t,"");a[o]=e.valueForKey(o)}),a},e.prototype.valueForKey=function(e){var t=localStorage.getItem(this.buildKey(e));if(void 0!==t&&"string"==typeof t)try{return JSON.parse(t).value}catch(e){}},e.prototype.setValue=function(e,t){void 0===e?localStorage.removeItem(this.buildKey(t)):localStorage.setItem(this.buildKey(t),JSON.stringify({value:e}))},e.prototype.reset=function(){for(var e=0;e<localStorage.length;e++){var t=localStorage.key(e);"string"==typeof t&&0===t.indexOf("com.xt."+(this.suiteName||"standard")+".")&&localStorage.removeItem(t)}},e.prototype.buildKey=function(e){return"com.xt."+(this.suiteName||"standard")+"."+e},e.standard=new e,e}();exports.UserDefaults=UserDefaults;
    },{}],17:[function(require,module,exports){
    "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var EventEmitterIMP=require("./EventEmitterImp");exports.EventEmitter=EventEmitterIMP.EventEmitter;
    },{"./EventEmitterImp":18}],18:[function(require,module,exports){
    !function(e){"use strict";function t(){}var n=t.prototype;e.EventEmitter;function r(e,t){for(var n=e.length;n--;)if(e[n].listener===t)return n;return-1}function i(e){return function(){return this[e].apply(this,arguments)}}n.getListeners=function(e){var t,n,r=this._getEvents();if(e instanceof RegExp)for(n in t={},r)r.hasOwnProperty(n)&&e.test(n)&&(t[n]=r[n]);else t=r[e]||(r[e]=[]);return t},n.flattenListeners=function(e){var t,n=[];for(t=0;t<e.length;t+=1)n.push(e[t].listener);return n},n.getListenersAsObject=function(e){var t,n=this.getListeners(e);return n instanceof Array&&((t={})[e]=n),t||n},n.addListener=function(e,t){if(!function e(t){return"function"==typeof t||t instanceof RegExp||!(!t||"object"!=typeof t)&&e(t.listener)}(t))throw new TypeError("listener must be a function");var n,i=this.getListenersAsObject(e),s="object"==typeof t;for(n in i)i.hasOwnProperty(n)&&-1===r(i[n],t)&&i[n].push(s?t:{listener:t,once:!1});return this},n.on=i("addListener"),n.addOnceListener=function(e,t){return this.addListener(e,{listener:t,once:!0})},n.once=i("addOnceListener"),n.defineEvent=function(e){return this.getListeners(e),this},n.defineEvents=function(e){for(var t=0;t<e.length;t+=1)this.defineEvent(e[t]);return this},n.removeListener=function(e,t){var n,i,s=this.getListenersAsObject(e);for(i in s)s.hasOwnProperty(i)&&-1!==(n=r(s[i],t))&&s[i].splice(n,1);return this},n.off=i("removeListener"),n.addListeners=function(e,t){return this.manipulateListeners(!1,e,t)},n.removeListeners=function(e,t){return this.manipulateListeners(!0,e,t)},n.manipulateListeners=function(e,t,n){var r,i,s=e?this.removeListener:this.addListener,o=e?this.removeListeners:this.addListeners;if("object"!=typeof t||t instanceof RegExp)for(r=n.length;r--;)s.call(this,t,n[r]);else for(r in t)t.hasOwnProperty(r)&&(i=t[r])&&("function"==typeof i?s.call(this,r,i):o.call(this,r,i));return this},n.removeEvent=function(e){var t,n=typeof e,r=this._getEvents();if("string"===n)delete r[e];else if(e instanceof RegExp)for(t in r)r.hasOwnProperty(t)&&e.test(t)&&delete r[t];else delete this._events;return this},n.removeAllListeners=i("removeEvent"),n.emitEvent=function(e,t){try{var n,r,i,s,o=this.getListenersAsObject(e);for(s in o)if(o.hasOwnProperty(s))for(n=o[s].slice(0),i=0;i<n.length;i++)!0===(r=n[i]).once&&this.removeListener(e,r.listener),r.listener.apply(this,t||[])===this._getOnceReturnValue()&&this.removeListener(e,r.listener)}catch(e){console.error(e)}return this},n.val=function(e){try{var t,n,r,i,s=Array.prototype.slice.call(arguments,1),o=this.getListenersAsObject(e);for(i in o)if(o.hasOwnProperty(i))for(t=o[i].slice(0),r=0;r<t.length;r++)return!0===(n=t[r]).once&&this.removeListener(e,n.listener),n.listener.apply(this,s||[])}catch(e){console.error(e)}},n.trigger=i("emitEvent"),n.emit=function(e){var t=Array.prototype.slice.call(arguments,1);return this.emitEvent(e,t)},n.setOnceReturnValue=function(e){return this._onceReturnValue=e,this},n._getOnceReturnValue=function(){return!this.hasOwnProperty("_onceReturnValue")||this._onceReturnValue},n._getEvents=function(){return this._events||(this._events={})},e.EventEmitter=t}(this||{});
    },{}],19:[function(require,module,exports){
    "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var KMCore=function(){function e(){}return e.version="0.8.0",e.hostVersion="",e}();exports.KMCore=KMCore;
    },{}],20:[function(require,module,exports){
    "use strict";Object.defineProperty(exports,"__esModule",{value:!0}),void 0===window.global&&(window.global=window);var CADisplayLink_1=require("./coregraphics/CADisplayLink");global.CADisplayLink=CADisplayLink_1.CADisplayLink;var CAGradientLayer_1=require("./coregraphics/CAGradientLayer");global.CAGradientLayer=CAGradientLayer_1.CAGradientLayer;var CALayer_1=require("./coregraphics/CALayer");global.CALayer=CALayer_1.CALayer;var CAShapeLayer_1=require("./coregraphics/CAShapeLayer");global.CAShapeLayer=CAShapeLayer_1.CAShapeLayer,global.CAShapeFillRule=CAShapeLayer_1.CAShapeFillRule,global.CAShapeLineCap=CAShapeLayer_1.CAShapeLineCap,global.CAShapeLineJoin=CAShapeLayer_1.CAShapeLineJoin;var UIEnums_1=require("./uikit/UIEnums");global.UIViewContentMode=UIEnums_1.UIViewContentMode,global.UIControlState=UIEnums_1.UIControlState,global.UIControlContentVerticalAlignment=UIEnums_1.UIControlContentVerticalAlignment,global.UIControlContentHorizontalAlignment=UIEnums_1.UIControlContentHorizontalAlignment,global.UITextAlignment=UIEnums_1.UITextAlignment,global.UILineBreakMode=UIEnums_1.UILineBreakMode,global.UITextFieldViewMode=UIEnums_1.UITextFieldViewMode,global.UITextAutocapitalizationType=UIEnums_1.UITextAutocapitalizationType,global.UITextAutocorrectionType=UIEnums_1.UITextAutocorrectionType,global.UITextSpellCheckingType=UIEnums_1.UITextSpellCheckingType,global.UIKeyboardType=UIEnums_1.UIKeyboardType,global.UIReturnKeyType=UIEnums_1.UIReturnKeyType,global.UILayoutConstraintAxis=UIEnums_1.UILayoutConstraintAxis,global.UIStackViewDistribution=UIEnums_1.UIStackViewDistribution,global.UIStackViewAlignment=UIEnums_1.UIStackViewAlignment,global.UIStatusBarStyle=UIEnums_1.UIStatusBarStyle;var UIRect_1=require("./uikit/UIRect"),UIPoint_1=require("./uikit/UIPoint"),UISize_1=require("./uikit/UISize"),UIAffineTransform_1=require("./uikit/UIAffineTransform"),UIEdgeInsets_1=require("./uikit/UIEdgeInsets"),UIRange_1=require("./uikit/UIRange");global.UIRectZero=UIRect_1.UIRectZero,global.UIRectMake=UIRect_1.UIRectMake,global.UIRectEqualToRect=UIRect_1.UIRectEqualToRect,global.UIRectInset=UIRect_1.UIRectInset,global.UIRectOffset=UIRect_1.UIRectOffset,global.UIRectContainsPoint=UIRect_1.UIRectContainsPoint,global.UIRectContainsRect=UIRect_1.UIRectContainsRect,global.UIRectIntersectsRect=UIRect_1.UIRectIntersectsRect,global.UIPointZero=UIPoint_1.UIPointZero,global.UIPointMake=UIPoint_1.UIPointMake,global.UIPointEqualToPoint=UIPoint_1.UIPointEqualToPoint,global.UISizeZero=UISize_1.UISizeZero,global.UISizeMake=UISize_1.UISizeMake,global.UISizeEqualToSize=UISize_1.UISizeEqualToSize,global.UIAffineTransformIdentity=UIAffineTransform_1.UIAffineTransformIdentity,global.UIAffineTransformMake=UIAffineTransform_1.UIAffineTransformMake,global.UIAffineTransformMakeTranslation=UIAffineTransform_1.UIAffineTransformMakeTranslation,global.UIAffineTransformMakeScale=UIAffineTransform_1.UIAffineTransformMakeScale,global.UIAffineTransformMakeRotation=UIAffineTransform_1.UIAffineTransformMakeRotation,global.UIAffineTransformIsIdentity=UIAffineTransform_1.UIAffineTransformIsIdentity,global.UIAffineTransformTranslate=UIAffineTransform_1.UIAffineTransformTranslate,global.UIAffineTransformScale=UIAffineTransform_1.UIAffineTransformScale,global.UIAffineTransformRotate=UIAffineTransform_1.UIAffineTransformRotate,global.UIAffineTransformInvert=UIAffineTransform_1.UIAffineTransformInvert,global.UIAffineTransformConcat=UIAffineTransform_1.UIAffineTransformConcat,global.UIAffineTransformEqualToTransform=UIAffineTransform_1.UIAffineTransformEqualToTransform,global.UIEdgeInsetsZero=UIEdgeInsets_1.UIEdgeInsetsZero,global.UIEdgeInsetsMake=UIEdgeInsets_1.UIEdgeInsetsMake,global.UIEdgeInsetsInsetRect=UIEdgeInsets_1.UIEdgeInsetsInsetRect,global.UIEdgeInsetsEqualToEdgeInsets=UIEdgeInsets_1.UIEdgeInsetsEqualToEdgeInsets,global.UIRangeMake=UIRange_1.UIRangeMake;var UIActionSheet_1=require("./uikit/UIActionSheet");global.UIActionSheet=UIActionSheet_1.UIActionSheet;var UIActivityIndicatorView_1=require("./uikit/UIActivityIndicatorView");global.UIActivityIndicatorView=UIActivityIndicatorView_1.UIActivityIndicatorView;var UIAlert_1=require("./uikit/UIAlert");global.UIAlert=UIAlert_1.UIAlert;var UIAnimator_1=require("./uikit/UIAnimator");global.UIAnimator=UIAnimator_1.UIAnimator;var UIAttributedString_1=require("./uikit/UIAttributedString");global.UIParagraphStyle=UIAttributedString_1.UIParagraphStyle,global.UIAttributedString=UIAttributedString_1.UIAttributedString,global.UIAttributedStringKey=UIAttributedString_1.UIAttributedStringKey,global.UIMutableAttributedString=UIAttributedString_1.UIMutableAttributedString;var UIBezierPath_1=require("./uikit/UIBezierPath");global.UIBezierPath=UIBezierPath_1.UIBezierPath;var UIButton_1=require("./uikit/UIButton");global.UIButton=UIButton_1.UIButton;var UICollectionView_1=require("./uikit/UICollectionView");global.UICollectionView=UICollectionView_1.UICollectionView,global.UICollectionViewCell=UICollectionView_1.UICollectionViewCell,global.UICollectionViewLayout=UICollectionView_1.UICollectionViewLayout;var UICollectionViewFlowLayout_1=require("./uikit/UICollectionViewFlowLayout");global.UICollectionViewFlowLayout=UICollectionViewFlowLayout_1.UICollectionViewFlowLayout,global.UICollectionViewScrollDirection=UICollectionViewFlowLayout_1.UICollectionViewScrollDirection;var UIColor_1=require("./uikit/UIColor");global.UIColor=UIColor_1.UIColor;var UIConfirm_1=require("./uikit/UIConfirm");global.UIConfirm=UIConfirm_1.UIConfirm;var UIDevice_1=require("./uikit/UIDevice");global.UIDevice=UIDevice_1.UIDevice;var UIFetchMoreControl_1=require("./uikit/UIFetchMoreControl");global.UIFetchMoreControl=UIFetchMoreControl_1.UIFetchMoreControl;var UIFont_1=require("./uikit/UIFont");global.UIFont=UIFont_1.UIFont;var UIGestureRecognizer_1=require("./uikit/UIGestureRecognizer");global.UIGestureRecognizerState=UIGestureRecognizer_1.UIGestureRecognizerState,global.UIGestureRecognizer=UIGestureRecognizer_1.UIGestureRecognizer;var UIImage_1=require("./uikit/UIImage");global.UIImage=UIImage_1.UIImage,global.UIImageRenderingMode=UIImage_1.UIImageRenderingMode;var UIImageView_1=require("./uikit/UIImageView");global.UIImageView=UIImageView_1.UIImageView;var UILabel_1=require("./uikit/UILabel");global.UILabel=UILabel_1.UILabel;var UILongPressGestureRecognizer_1=require("./uikit/UILongPressGestureRecognizer");global.UILongPressGestureRecognizer=UILongPressGestureRecognizer_1.UILongPressGestureRecognizer;var UINavigationBar_1=require("./uikit/UINavigationBar");global.UINavigationBar=UINavigationBar_1.UINavigationBar,global.UINavigationItem=UINavigationBar_1.UINavigationItem,global.UIBarButtonItem=UINavigationBar_1.UIBarButtonItem;var UINavigationController_1=require("./uikit/UINavigationController");global.UINavigationController=UINavigationController_1.UINavigationController;var UINavigationBarViewController_1=require("./uikit/UINavigationBarViewController");global.UINavigationBarViewController=UINavigationBarViewController_1.UINavigationBarViewController;var UIPageViewController_1=require("./uikit/UIPageViewController");global.UIPageViewController=UIPageViewController_1.UIPageViewController;var UIPanGestureRecognizer_1=require("./uikit/UIPanGestureRecognizer");global.UIPanGestureRecognizer=UIPanGestureRecognizer_1.UIPanGestureRecognizer;var UIPinchGestureRecognizer_1=require("./uikit/UIPinchGestureRecognizer");global.UIPinchGestureRecognizer=UIPinchGestureRecognizer_1.UIPinchGestureRecognizer;var UIProgressView_1=require("./uikit/UIProgressView");global.UIProgressView=UIProgressView_1.UIProgressView;var UIPrompt_1=require("./uikit/UIPrompt");global.UIPrompt=UIPrompt_1.UIPrompt;var UIRefreshControl_1=require("./uikit/UIRefreshControl");global.UIRefreshControl=UIRefreshControl_1.UIRefreshControl;var UIRotationGestureRecognizer_1=require("./uikit/UIRotationGestureRecognizer");global.UIRotationGestureRecognizer=UIRotationGestureRecognizer_1.UIRotationGestureRecognizer;var UIScreen_1=require("./uikit/UIScreen");global.UIScreen=UIScreen_1.UIScreen;var UIScrollView_1=require("./uikit/UIScrollView");global.UIScrollView=UIScrollView_1.UIScrollView;var UISlider_1=require("./uikit/UISlider");global.UISlider=UISlider_1.UISlider;var UIStackView_1=require("./uikit/UIStackView");global.UIStackView=UIStackView_1.UIStackView;var UISwitch_1=require("./uikit/UISwitch");global.UISwitch=UISwitch_1.UISwitch;var UITabBar_1=require("./uikit/UITabBar"),UITabBarController_1=require("./uikit/UITabBarController"),UITabBarItem_1=require("./uikit/UITabBarItem");global.UITabBar=UITabBar_1.UITabBar,global.UITabBarController=UITabBarController_1.UITabBarController,global.UITabBarItem=UITabBarItem_1.UITabBarItem;var UITableView_1=require("./uikit/UITableView");global.UITableView=UITableView_1.UITableView,global.UITableViewCell=UITableView_1.UITableViewCell;var UITapGestureRecognizer_1=require("./uikit/UITapGestureRecognizer");global.UITapGestureRecognizer=UITapGestureRecognizer_1.UITapGestureRecognizer;var UITextField_1=require("./uikit/UITextField");global.UITextField=UITextField_1.UITextField;var UITextView_1=require("./uikit/UITextView");global.UITextView=UITextView_1.UITextView;var UIView_1=require("./uikit/UIView");global.UIView=UIView_1.UIView,global.UIWindow=UIView_1.UIWindow;var UIViewController_1=require("./uikit/UIViewController");global.UIViewController=UIViewController_1.UIViewController;var UIWebView_1=require("./uikit/UIWebView");global.UIWebView=UIWebView_1.UIWebView;var UIReload_1=require("./uikit/UIReload");global.UIReload=UIReload_1.UIReload;var Bundle_1=require("./foundation/Bundle");global.Bundle=Bundle_1.Bundle;var Data_1=require("./foundation/Data");global.Data=Data_1.Data,global.MutableData=Data_1.MutableData;var DispatchQueue_1=require("./foundation/DispatchQueue");global.DispatchQueue=DispatchQueue_1.DispatchQueue;var FileManager_1=require("./foundation/FileManager");global.FileManager=FileManager_1.FileManager;var Timer_1=require("./foundation/Timer");global.Timer=Timer_1.Timer;var URL_1=require("./foundation/URL");global.URL.toString().indexOf("[native code]")>=0?(global.URL.URLWithString=URL_1.URL.URLWithString,global.URL.fileURLWithPath=URL_1.URL.fileURLWithPath):global.URL=URL_1.URL;var URLRequest_1=require("./foundation/URLRequest");global.URLRequest=URLRequest_1.URLRequest,global.MutableURLRequest=URLRequest_1.MutableURLRequest,global.URLRequestCachePolicy=URLRequest_1.URLRequestCachePolicy;var URLResponse_1=require("./foundation/URLResponse");global.URLResponse=URLResponse_1.URLResponse;var URLSession_1=require("./foundation/URLSession");global.URLSession=URLSession_1.URLSession,global.URLSessionTask=URLSession_1.URLSessionTask,global.URLSessionTaskState=URLSession_1.URLSessionTaskState;var UserDefaults_1=require("./foundation/UserDefaults");global.UserDefaults=UserDefaults_1.UserDefaults;var UUID_1=require("./foundation/UUID");global.UUID=UUID_1.UUID;var KMCore_1=require("./kimi/KMCore");global.KMCore=KMCore_1.KMCore;var KIMIDebugger_1=require("./debugger/KIMIDebugger");global.KIMIDebugger=KIMIDebugger_1.KIMIDebugger;
    },{"./coregraphics/CADisplayLink":1,"./coregraphics/CAGradientLayer":2,"./coregraphics/CALayer":3,"./coregraphics/CAShapeLayer":4,"./debugger/KIMIDebugger":5,"./foundation/Bundle":6,"./foundation/Data":7,"./foundation/DispatchQueue":8,"./foundation/FileManager":9,"./foundation/Timer":10,"./foundation/URL":11,"./foundation/URLRequest":12,"./foundation/URLResponse":13,"./foundation/URLSession":14,"./foundation/UUID":15,"./foundation/UserDefaults":16,"./kimi/KMCore":19,"./uikit/UIActionSheet":21,"./uikit/UIActivityIndicatorView":22,"./uikit/UIAffineTransform":23,"./uikit/UIAlert":24,"./uikit/UIAnimator":25,"./uikit/UIAttributedString":26,"./uikit/UIBezierPath":27,"./uikit/UIButton":28,"./uikit/UICollectionView":29,"./uikit/UICollectionViewFlowLayout":30,"./uikit/UIColor":31,"./uikit/UIConfirm":32,"./uikit/UIDevice":33,"./uikit/UIEdgeInsets":34,"./uikit/UIEnums":35,"./uikit/UIFetchMoreControl":36,"./uikit/UIFont":37,"./uikit/UIGestureRecognizer":38,"./uikit/UIImage":39,"./uikit/UIImageView":40,"./uikit/UILabel":42,"./uikit/UILongPressGestureRecognizer":43,"./uikit/UINavigationBar":44,"./uikit/UINavigationBarViewController":45,"./uikit/UINavigationController":46,"./uikit/UIPageViewController":47,"./uikit/UIPanGestureRecognizer":48,"./uikit/UIPinchGestureRecognizer":49,"./uikit/UIPoint":50,"./uikit/UIProgressView":51,"./uikit/UIPrompt":52,"./uikit/UIRange":53,"./uikit/UIRect":54,"./uikit/UIRefreshControl":55,"./uikit/UIReload":56,"./uikit/UIRotationGestureRecognizer":57,"./uikit/UIScreen":58,"./uikit/UIScrollView":59,"./uikit/UISize":60,"./uikit/UISlider":61,"./uikit/UIStackView":62,"./uikit/UISwitch":63,"./uikit/UITabBar":64,"./uikit/UITabBarController":65,"./uikit/UITabBarItem":66,"./uikit/UITableView":67,"./uikit/UITapGestureRecognizer":68,"./uikit/UITextField":69,"./uikit/UITextView":70,"./uikit/UIView":72,"./uikit/UIViewController":73,"./uikit/UIWebView":74}],21:[function(require,module,exports){
    "use strict";var __extends=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}();Object.defineProperty(exports,"__esModule",{value:!0});var UIAlertActionStyle,UIViewController_1=require("./UIViewController"),UIColor_1=require("./UIColor"),UIView_1=require("./UIView"),UILabel_1=require("./UILabel"),UIAttributedString_1=require("./UIAttributedString"),UIEnums_1=require("./UIEnums"),UIButton_1=require("./UIButton"),UIFont_1=require("./UIFont"),UITapGestureRecognizer_1=require("./UITapGestureRecognizer"),DispatchQueue_1=require("../foundation/DispatchQueue"),UIAnimator_1=require("./UIAnimator"),UIScreen_1=require("./UIScreen");!function(t){t[t.normal=0]="normal",t[t.danger=1]="danger",t[t.cancel=2]="cancel"}(UIAlertActionStyle||(UIAlertActionStyle={}));var UIAlertAction=function(){return function(t,e,i){this.title=t,this.style=e,this.callback=i}}(),UIActionSheetController=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.backgroundView=new UIView_1.UIView,e.contentView=new UIView_1.UIView,e.message=void 0,e._actions=[],e}return __extends(e,t),e.prototype.viewDidLoad=function(){t.prototype.viewDidLoad.call(this),this.view.backgroundColor=UIColor_1.UIColor.clear,this.backgroundView.backgroundColor=new UIColor_1.UIColor(0,0,0,.35),this.view.addSubview(this.backgroundView),this.contentView.tintColor=UIColor_1.UIColor.black,this.contentView.backgroundColor=new UIColor_1.UIColor(.9,.9,.9,1),this.view.addSubview(this.contentView)},Object.defineProperty(e.prototype,"actions",{get:function(){return this._actions},set:function(t){this._actions=t,this.setupContents()},enumerable:!0,configurable:!0}),e.prototype.setupContents=function(){var t,e=this,i=0;if(this.message){var o=new UIView_1.UIView;o.backgroundColor=UIColor_1.UIColor.white;var n=new UILabel_1.UILabel,r=new UIAttributedString_1.UIAttributedString(this.message,((t={})[UIAttributedString_1.UIAttributedStringKey.font]=new UIFont_1.UIFont(12),t[UIAttributedString_1.UIAttributedStringKey.foregroundColor]=new UIColor_1.UIColor(.55,.55,.55,1),t)),c=r.measure({width:UIScreen_1.UIScreen.main.bounds.width-60,height:88});n.attributedText=r,n.numberOfLines=0,n.textAlignment=UIEnums_1.UITextAlignment.center,n.frame={x:30,y:0,width:UIScreen_1.UIScreen.main.bounds.width-60,height:c.height+28},o.frame={x:0,y:i,width:0,height:c.height+28},o.addSubview(n),o.domElement.style.borderBottom="solid",o.domElement.style.borderBottomColor=new UIColor_1.UIColor(.9,.9,.9,1).toStyle(),o.domElement.style.borderBottomWidth=1/devicePixelRatio+"px",this.contentView.addSubview(o),i+=o.frame.height+1}this.actions.forEach(function(t){t.style==UIAlertActionStyle.cancel&&(i+=6);var o=(new UIButton_1.UIButton).on("touchUpInside",function(){e.dismiss(!0,function(){t.callback&&t.callback()})});o.backgroundColor=UIColor_1.UIColor.white,o.setTitle(t.title,UIEnums_1.UIControlState.normal),o.setTitleFont(new UIFont_1.UIFont(19)),t.style==UIAlertActionStyle.danger?o.setTitleColor(new UIColor_1.UIColor(231/255,45/255,39/255,1),UIEnums_1.UIControlState.normal):t.style==UIAlertActionStyle.cancel&&o.setTitleFont(new UIFont_1.UIFont(18)),o.frame={x:0,y:i,width:UIScreen_1.UIScreen.main.bounds.width,height:55},o.domElement.style.borderBottom="solid",o.domElement.style.borderBottomColor=new UIColor_1.UIColor(.9,.9,.9,1).toStyle(),o.domElement.style.borderBottomWidth=1/devicePixelRatio+"px",e.contentView.addSubview(o),i+=56}),this.contentView.frame={x:0,y:0,width:0,height:i};var h=this.actions.filter(function(t){return t.style===UIAlertActionStyle.cancel})[0];h&&this.backgroundView.addGestureRecognizer((new UITapGestureRecognizer_1.UITapGestureRecognizer).on("touch",function(){e.dismiss(!0,function(){h.callback&&h.callback()})}))},e.prototype.show=function(t){var e=this;t&&(this.backgroundView.alpha=0,this.contentView.alpha=0,DispatchQueue_1.DispatchQueue.main.asyncAfter(.1,function(){e.contentView.alpha=1,e.contentView.frame={x:0,y:e.view.bounds.height,width:e.view.bounds.width,height:e.contentView.frame.height},UIAnimator_1.UIAnimator.bouncy(0,36,function(){e.backgroundView.alpha=1,e.contentView.frame={x:0,y:e.view.bounds.height-e.contentView.frame.height,width:e.view.bounds.width,height:e.contentView.frame.height}},void 0)}))},e.prototype.dismiss=function(t,e){var i=this;void 0!==UIActionSheet.currentActionSheet&&(UIActionSheet.currentActionSheet=void 0,t?(this.backgroundView.alpha=1,this.contentView.frame={x:0,y:this.view.bounds.height-this.contentView.frame.height,width:this.view.bounds.width,height:this.contentView.frame.height},UIAnimator_1.UIAnimator.bouncy(0,24,function(){i.backgroundView.alpha=0,i.contentView.frame={x:0,y:i.view.bounds.height,width:i.view.bounds.width,height:i.contentView.frame.height}},function(){i.window&&i.window.removeFromSuperview(),e()})):this.window&&this.window.removeFromSuperview())},e.prototype.viewWillLayoutSubviews=function(){var e=this;t.prototype.viewWillLayoutSubviews.call(this),this.backgroundView.frame=this.view.bounds,this.contentView.frame={x:0,y:this.view.bounds.height-this.contentView.frame.height,width:this.view.bounds.width,height:this.contentView.frame.height},this.contentView.subviews.forEach(function(t){t.frame={x:t.frame.x,y:t.frame.y,width:e.view.bounds.width,height:t.frame.height}})},e}(UIViewController_1.UIViewController),UIActionSheet=function(){function t(){this.message="",this.actions=[]}return t.prototype.addRegularAction=function(t,e){this.actions.push(new UIAlertAction(t,UIAlertActionStyle.normal,e))},t.prototype.addDangerAction=function(t,e){this.actions.push(new UIAlertAction(t,UIAlertActionStyle.danger,e))},t.prototype.addCancelAction=function(t,e){this.actions.push(new UIAlertAction(t,UIAlertActionStyle.cancel,e))},t.prototype.show=function(){t.currentActionSheet&&t.currentActionSheet.dismiss(!1,function(){});var e=new UIActionSheetController;t.currentActionSheet=e,e.appendToElement(document.body),e.message=this.message,e.actions=this.actions,e.show(!0)},t.currentActionSheet=void 0,t}();exports.UIActionSheet=UIActionSheet;
    },{"../foundation/DispatchQueue":8,"./UIAnimator":25,"./UIAttributedString":26,"./UIButton":28,"./UIColor":31,"./UIEnums":35,"./UIFont":37,"./UILabel":42,"./UIScreen":58,"./UITapGestureRecognizer":68,"./UIView":72,"./UIViewController":73}],22:[function(require,module,exports){
    "use strict";var __extends=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function a(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(a.prototype=i.prototype,new a)}}();Object.defineProperty(exports,"__esModule",{value:!0});var UIView_1=require("./UIView"),smallElement='<svg class="lds-spinner" width="36px" height="36px" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid" style="background-image: none; background-position: initial initial; background-repeat: initial initial;"><g transform="rotate(0 50 50)" class=""> <rect x="47" y="24" rx="9.4" ry="4.8" width="6" height="12" fill="#28292f" class=""> <animate attributeName="opacity" values="1;0" times="0;1" dur="1s" begin="-0.9166666666666666s" repeatCount="indefinite" class=""></animate> </rect> </g><g transform="rotate(30 50 50)" class=""> <rect x="47" y="24" rx="9.4" ry="4.8" width="6" height="12" fill="#28292f" class=""> <animate attributeName="opacity" values="1;0" times="0;1" dur="1s" begin="-0.8333333333333334s" repeatCount="indefinite" class=""></animate> </rect> </g><g transform="rotate(60 50 50)" class=""> <rect x="47" y="24" rx="9.4" ry="4.8" width="6" height="12" fill="#28292f" class=""> <animate attributeName="opacity" values="1;0" times="0;1" dur="1s" begin="-0.75s" repeatCount="indefinite" class=""></animate> </rect> </g><g transform="rotate(90 50 50)" class=""> <rect x="47" y="24" rx="9.4" ry="4.8" width="6" height="12" fill="#28292f" class=""> <animate attributeName="opacity" values="1;0" times="0;1" dur="1s" begin="-0.6666666666666666s" repeatCount="indefinite" class=""></animate> </rect> </g><g transform="rotate(120 50 50)" class=""> <rect x="47" y="24" rx="9.4" ry="4.8" width="6" height="12" fill="#28292f" class=""> <animate attributeName="opacity" values="1;0" times="0;1" dur="1s" begin="-0.5833333333333334s" repeatCount="indefinite" class=""></animate> </rect> </g><g transform="rotate(150 50 50)" class=""> <rect x="47" y="24" rx="9.4" ry="4.8" width="6" height="12" fill="#28292f" class=""> <animate attributeName="opacity" values="1;0" times="0;1" dur="1s" begin="-0.5s" repeatCount="indefinite" class=""></animate> </rect> </g><g transform="rotate(180 50 50)" class=""> <rect x="47" y="24" rx="9.4" ry="4.8" width="6" height="12" fill="#28292f" class=""> <animate attributeName="opacity" values="1;0" times="0;1" dur="1s" begin="-0.4166666666666667s" repeatCount="indefinite" class=""></animate> </rect> </g><g transform="rotate(210 50 50)" class=""> <rect x="47" y="24" rx="9.4" ry="4.8" width="6" height="12" fill="#28292f" class=""> <animate attributeName="opacity" values="1;0" times="0;1" dur="1s" begin="-0.3333333333333333s" repeatCount="indefinite" class=""></animate> </rect> </g><g transform="rotate(240 50 50)" class=""> <rect x="47" y="24" rx="9.4" ry="4.8" width="6" height="12" fill="#28292f" class=""> <animate attributeName="opacity" values="1;0" times="0;1" dur="1s" begin="-0.25s" repeatCount="indefinite" class=""></animate> </rect> </g><g transform="rotate(270 50 50)" class=""> <rect x="47" y="24" rx="9.4" ry="4.8" width="6" height="12" fill="#28292f" class=""> <animate attributeName="opacity" values="1;0" times="0;1" dur="1s" begin="-0.16666666666666666s" repeatCount="indefinite" class=""></animate> </rect> </g><g transform="rotate(300 50 50)" class=""> <rect x="47" y="24" rx="9.4" ry="4.8" width="6" height="12" fill="#28292f" class=""> <animate attributeName="opacity" values="1;0" times="0;1" dur="1s" begin="-0.08333333333333333s" repeatCount="indefinite" class=""></animate> </rect> </g><g transform="rotate(330 50 50)" class=""> <rect x="47" y="24" rx="9.4" ry="4.8" width="6" height="12" fill="#28292f" class=""> <animate attributeName="opacity" values="1;0" times="0;1" dur="1s" begin="0s" repeatCount="indefinite" class=""></animate> </rect> </g></svg>',largeElement='<svg class="lds-spinner" width="88px" height="88px" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid" style="background-image: none; background-position: initial initial; background-repeat: initial initial;"><g transform="rotate(0 50 50)"> <rect x="47" y="24" rx="9.4" ry="4.8" width="6" height="12" fill="#28292f"> <animate attributeName="opacity" values="1;0" times="0;1" dur="1s" begin="-0.9166666666666666s" repeatCount="indefinite"></animate> </rect> </g><g transform="rotate(30 50 50)"> <rect x="47" y="24" rx="9.4" ry="4.8" width="6" height="12" fill="#28292f"> <animate attributeName="opacity" values="1;0" times="0;1" dur="1s" begin="-0.8333333333333334s" repeatCount="indefinite"></animate> </rect> </g><g transform="rotate(60 50 50)"> <rect x="47" y="24" rx="9.4" ry="4.8" width="6" height="12" fill="#28292f"> <animate attributeName="opacity" values="1;0" times="0;1" dur="1s" begin="-0.75s" repeatCount="indefinite"></animate> </rect> </g><g transform="rotate(90 50 50)"> <rect x="47" y="24" rx="9.4" ry="4.8" width="6" height="12" fill="#28292f"> <animate attributeName="opacity" values="1;0" times="0;1" dur="1s" begin="-0.6666666666666666s" repeatCount="indefinite"></animate> </rect> </g><g transform="rotate(120 50 50)"> <rect x="47" y="24" rx="9.4" ry="4.8" width="6" height="12" fill="#28292f"> <animate attributeName="opacity" values="1;0" times="0;1" dur="1s" begin="-0.5833333333333334s" repeatCount="indefinite"></animate> </rect> </g><g transform="rotate(150 50 50)"> <rect x="47" y="24" rx="9.4" ry="4.8" width="6" height="12" fill="#28292f"> <animate attributeName="opacity" values="1;0" times="0;1" dur="1s" begin="-0.5s" repeatCount="indefinite"></animate> </rect> </g><g transform="rotate(180 50 50)"> <rect x="47" y="24" rx="9.4" ry="4.8" width="6" height="12" fill="#28292f"> <animate attributeName="opacity" values="1;0" times="0;1" dur="1s" begin="-0.4166666666666667s" repeatCount="indefinite"></animate> </rect> </g><g transform="rotate(210 50 50)"> <rect x="47" y="24" rx="9.4" ry="4.8" width="6" height="12" fill="#28292f"> <animate attributeName="opacity" values="1;0" times="0;1" dur="1s" begin="-0.3333333333333333s" repeatCount="indefinite"></animate> </rect> </g><g transform="rotate(240 50 50)"> <rect x="47" y="24" rx="9.4" ry="4.8" width="6" height="12" fill="#28292f"> <animate attributeName="opacity" values="1;0" times="0;1" dur="1s" begin="-0.25s" repeatCount="indefinite"></animate> </rect> </g><g transform="rotate(270 50 50)"> <rect x="47" y="24" rx="9.4" ry="4.8" width="6" height="12" fill="#28292f"> <animate attributeName="opacity" values="1;0" times="0;1" dur="1s" begin="-0.16666666666666666s" repeatCount="indefinite"></animate> </rect> </g><g transform="rotate(300 50 50)"> <rect x="47" y="24" rx="9.4" ry="4.8" width="6" height="12" fill="#28292f"> <animate attributeName="opacity" values="1;0" times="0;1" dur="1s" begin="-0.08333333333333333s" repeatCount="indefinite"></animate> </rect> </g><g transform="rotate(330 50 50)"> <rect x="47" y="24" rx="9.4" ry="4.8" width="6" height="12" fill="#28292f"> <animate attributeName="opacity" values="1;0" times="0;1" dur="1s" begin="0s" repeatCount="indefinite"></animate> </rect> </g></svg>',UIActivityIndicatorView=function(t){function e(){var e=t.call(this)||this;e.contentElement=document.createElementNS("http://www.w3.org/2000/svg","svg"),e.color=void 0,e._largeStyle=!1,e.animating=!1;var i=e.largeStyle?88:36;return e.frame={x:e.frame.x,y:e.frame.y,width:i,height:i},e.contentElement.style.position="absolute",e.contentElement.style.width="100%",e.contentElement.style.height="100%",e.domElement.appendChild(e.contentElement),e}return __extends(e,t),Object.defineProperty(e.prototype,"largeStyle",{get:function(){return this._largeStyle},set:function(t){this._largeStyle=t;var e=this.largeStyle?88:36;this.frame={x:this.frame.x,y:this.frame.y,width:e,height:e}},enumerable:!0,configurable:!0}),e.prototype.startAnimating=function(){this.animating=!0;var t=this.largeStyle?largeElement:smallElement;this.color&&(t=t.replace(/fill="#28292f"/g,'fill="'+this.color.toStyle()+'"')),this.contentElement.innerHTML=t,this.layoutSubviews()},e.prototype.stopAnimating=function(){this.animating=!1,this.contentElement.innerHTML=""},e.prototype.layoutSubviews=function(){t.prototype.layoutSubviews.call(this);var e=this.largeStyle?88:36;this.contentElement.style.transform="matrix(1.0, 0.0, 0.0, 1.0, "+(this.bounds.width-e)/2+", "+(this.bounds.height-e)/2+")",this.contentElement.style.webkitTransform=this.contentElement.style.transform},e}(UIView_1.UIView);exports.UIActivityIndicatorView=UIActivityIndicatorView;
    },{"./UIView":72}],23:[function(require,module,exports){
    "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var Matrix_1=require("./helpers/Matrix");exports.UIAffineTransformIdentity={a:1,b:0,c:0,d:1,tx:0,ty:0},exports.UIAffineTransformMake=function(r,t,e,a,n,s){return{a:r,b:t,c:e,d:a,tx:n,ty:s}},exports.UIAffineTransformMakeTranslation=function(r,t){return exports.UIAffineTransformMake(1,0,0,1,r,t)},exports.UIAffineTransformMakeScale=function(r,t){return exports.UIAffineTransformMake(r,0,0,t,0,0)},exports.UIAffineTransformMakeRotation=function(r){var t=Math.cos(r),e=Math.sin(r);return exports.UIAffineTransformMake(t,-e,e,t,0,0)},exports.UIAffineTransformTranslate=function(r,t,e){var a=new Matrix_1.Matrix;return a.setValues(r),a.postTranslate(t,e),a.getValues()},exports.UIAffineTransformScale=function(r,t,e){var a=new Matrix_1.Matrix;return a.setValues(r),a.postScale(t,t),a.getValues()},exports.UIAffineTransformRotate=function(r,t){var e=new Matrix_1.Matrix;return e.setValues(r),e.postRotate(t),e.getValues()},exports.UIAffineTransformInvert=function(r){return{a:r.a,b:r.c,c:r.b,d:r.d,tx:r.tx,ty:r.ty}},exports.UIAffineTransformConcat=function(r,t){var e=new Matrix_1.Matrix;e.setValues(r);var a=new Matrix_1.Matrix;return a.setValues(t),e.concat(a),e.getValues()},exports.UIAffineTransformEqualToTransform=function(r,t){return Math.abs(r.a-t.a)<.001&&Math.abs(r.b-t.b)<.001&&Math.abs(r.c-t.c)<.001&&Math.abs(r.d-t.d)<.001&&Math.abs(r.tx-t.tx)<.001&&Math.abs(r.ty-t.ty)<.001},exports.UIAffineTransformIsIdentity=function(r){return exports.UIAffineTransformEqualToTransform(r,exports.UIAffineTransformIdentity)};
    },{"./helpers/Matrix":78}],24:[function(require,module,exports){
    "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var UIAlert=function(){function t(t,e){void 0===e&&(e="OK"),this.message=t,this.buttonText=e}return t.prototype.show=function(t){window.alert(this.message),t&&t()},t}();exports.UIAlert=UIAlert;
    },{}],25:[function(require,module,exports){
    "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var LinearAnimator_1=require("./helpers/LinearAnimator"),SpringSystem=require("./helpers/rebound.min").SpringSystem,LinearAnimation=function(){function n(n){this.animator=n}return n.prototype.setStartValue=function(n){this.animator.startValue=n},n.prototype.setEndValue=function(n){this.animator.endValue=n,this.animator.start()},n.prototype.setUpdateListener=function(n){this.animator.addListener({onUpdate:function(t){n(t)},onEnd:function(){}})},n.prototype.cancel=function(){this.animator.cancel()},n}(),SpringAnimation=function(){function n(n){this.spring=n}return n.prototype.setStartValue=function(n){this.spring.setCurrentValue(n)},n.prototype.setEndValue=function(n){this.spring.setEndValue(n)},n.prototype.setUpdateListener=function(n){var t=this;this.spring.addListener({onSpringUpdate:function(){n(t.spring.getCurrentValue())}})},n.prototype.cancel=function(){this.spring.removeAllListeners()},n}(),UIAnimator=function(){function n(){this.springSystem=new SpringSystem,this.animationCreater=void 0}return n.prototype.linear=function(t,i,e,r){n.activeAnimator=this;var a=!1;this.animationCreater=function(){var n=new LinearAnimator_1.LinearAndCurveAnimator(i);return n.duration=1e3*t,n.addListener({onUpdate:function(){},onEnd:function(){a||(a=!0,r&&r())}}),new LinearAnimation(n)},e(),n.activeAnimator=void 0},n.linear=function(t,i,e){n.shared.linear(t,!1,i,e)},n.curve=function(t,i,e){n.shared.linear(t,!0,i,e)},n.prototype.spring=function(t,i,e,r,a){var o=this;n.activeAnimator=this;var s=!1;this.animationCreater=function(){var n=e?o.springSystem.createSpringWithBouncinessAndSpeed(t,i):o.springSystem.createSpring(t,i);return n.addListener({onSpringAtRest:function(){s||(s=!0,a&&a())}}),new SpringAnimation(n)},r(),n.activeAnimator=void 0},n.spring=function(t,i,e,r){n.shared.spring(t,i,!1,e,r)},n.bouncy=function(t,i,e,r){n.shared.spring(t,i,!0,e,r)},n.shared=new n,n.duringAnimationValueSet=!1,n.activeAnimator=void 0,n}();exports.UIAnimator=UIAnimator;
    },{"./helpers/LinearAnimator":77,"./helpers/rebound.min":84}],26:[function(require,module,exports){
    "use strict";var __extends=this&&this.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),__assign=this&&this.__assign||function(){return(__assign=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var i in e=arguments[r])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};Object.defineProperty(exports,"__esModule",{value:!0});var UIColor_1=require("./UIColor"),UIFont_1=require("./UIFont"),UIEnums_1=require("./UIEnums"),TextMeasurer_1=require("./helpers/TextMeasurer"),UIAttributedStringKey=function(){function t(){}return t.foregroundColor="foregroundColor",t.font="font",t.backgroundColor="backgroundColor",t.kern="kern",t.strikethroughStyle="strikethroughStyle",t.underlineStyle="underlineStyle",t.strokeColor="strokeColor",t.strokeWidth="strokeWidth",t.underlineColor="underlineColor",t.strikethroughColor="strikethroughColor",t.paragraphStyle="paragraphStyle",t}();exports.UIAttributedStringKey=UIAttributedStringKey;var UIParagraphStyle=function(){return function(){this.lineSpacing=0,this.alignment=UIEnums_1.UITextAlignment.left,this.lineBreakMode=UIEnums_1.UILineBreakMode.truncatingTail,this.minimumLineHeight=0,this.maximumLineHeight=0,this.lineHeightMultiple=0}}();exports.UIParagraphStyle=UIParagraphStyle;var Character=function(){return function(t,e){this.letter=t,this.attributes=e}}(),UIAttributedString=function(){function t(t,e){this.str=t,this.attributes=e,this.charSequences=[],this.charSequences=Array.from(t).map(function(t){return new Character(t,__assign({},e))})}return t.prototype.measure=function(t){return TextMeasurer_1.TextMeasurer.measureAttributedText(this,t)},t.prototype.mutable=function(){var t=new UIMutableAttributedString("",this.attributes);return t.charSequences=this.charSequences.map(function(t){return new Character(t.letter,__assign({},t.attributes))}),t},t.prototype.toHTMLText=function(){var t=this,e=document.createElement("span"),r=document.createElement("span"),n="";return this.charSequences.forEach(function(i){var o=JSON.stringify(i.attributes);n!==o&&(r.innerText.length>0&&e.appendChild(r),r=document.createElement("span"),n=o,t.setSpanStyle(r,i.attributes,e)),r.innerText+=i.letter}),r.innerText.length>0&&e.appendChild(r),e},t.prototype.setSpanStyle=function(t,e,r){var n,i;((i=e[UIAttributedStringKey.foregroundColor])instanceof UIColor_1.UIColor&&(t.style.color=i.toStyle()),(i=e[UIAttributedStringKey.font])instanceof UIFont_1.UIFont&&(t.style.fontSize=i.pointSize.toString()+"px",t.style.fontFamily="string"==typeof i.fontName?i.fontName:null,t.style.fontWeight="string"==typeof i.fontStyle?i.fontStyle:null,t.style.fontStyle="string"==typeof i.fontStyle?i.fontStyle:null),(i=e[UIAttributedStringKey.backgroundColor])instanceof UIColor_1.UIColor&&(t.style.backgroundColor=i.toStyle()),"number"==typeof(i=e[UIAttributedStringKey.kern])&&(t.style.letterSpacing=i+"px"),1===(i=e[UIAttributedStringKey.strikethroughStyle]))&&(t.style.setProperty("text-decoration-line","line-through"),(n=e[UIAttributedStringKey.strikethroughColor])instanceof UIColor_1.UIColor&&t.style.setProperty("text-decoration-color",n.toStyle()));1===(i=e[UIAttributedStringKey.underlineStyle])&&(t.style.setProperty("text-decoration-line","underline"),(n=e[UIAttributedStringKey.underlineColor])instanceof UIColor_1.UIColor&&t.style.setProperty("text-decoration-color",n.toStyle()));"number"==typeof(i=e[UIAttributedStringKey.strokeWidth])&&0!==i&&(t.style.setProperty("-webkit-text-stroke-width",i+"px"),(n=e[UIAttributedStringKey.strokeColor])instanceof UIColor_1.UIColor&&t.style.setProperty("-webkit-text-stroke-color",n.toStyle()));if((i=e[UIAttributedStringKey.paragraphStyle])instanceof UIParagraphStyle){switch(i.alignment){case UIEnums_1.UITextAlignment.left:r.style.textAlign="left";break;case UIEnums_1.UITextAlignment.center:r.style.textAlign="center";break;case UIEnums_1.UITextAlignment.right:r.style.textAlign="right"}var o=i.minimumLineHeight||i.maximumLineHeight||0;o>0&&(r.style.lineHeight=o+"px")}},t}();exports.UIAttributedString=UIAttributedString;var UIMutableAttributedString=function(t){function e(e,r){var n=t.call(this,e,r)||this;return n.str=e,n.attributes=r,n}return __extends(e,t),e.prototype.replaceCharacters=function(t,e){var r=this,n=Array.from(e).map(function(e,n){return n<t.length?new Character(e,r.charSequences[t.location+n].attributes):new Character(e,r.charSequences[t.location+t.length-1].attributes)}).slice();n.unshift(t.length),n.unshift(t.location),this.charSequences.splice.apply(this.charSequences,n)},e.prototype.setAttributes=function(t,e){for(var r=e.location;r<e.location+e.length;r++)this.charSequences[r].attributes=__assign({},t)},e.prototype.addAttribute=function(t,e,r){for(var n=r.location;n<r.location+r.length;n++)this.charSequences[n].attributes[t]=e},e.prototype.addAttributes=function(t,e){for(var r=e.location;r<e.location+e.length;r++)for(var n in t)this.charSequences[r].attributes[n]=t[n]},e.prototype.removeAttribute=function(t,e){for(var r=e.location;r<e.location+e.length;r++)delete this.charSequences[r].attributes[t]},e.prototype.replaceCharactersWithAttributedString=function(t,e){var r=e.charSequences.slice();r.unshift(t.length),r.unshift(t.location),this.charSequences.splice.apply(this.charSequences,r)},e.prototype.insertAttributedString=function(t,e){var r=t.charSequences.slice();r.unshift(0),r.unshift(e),this.charSequences.splice.apply(this.charSequences,r)},e.prototype.appendAttributedString=function(t){var e=this;t.charSequences.forEach(function(t){e.charSequences.push(t)})},e.prototype.deleteCharacters=function(t){this.charSequences.splice(t.location,t.length)},e.prototype.immutable=function(){var t=new UIAttributedString("",this.attributes);return t.charSequences=this.charSequences.map(function(t){return new Character(t.letter,__assign({},t.attributes))}),t},e}(UIAttributedString);exports.UIMutableAttributedString=UIMutableAttributedString;
    },{"./UIColor":31,"./UIEnums":35,"./UIFont":37,"./helpers/TextMeasurer":82}],27:[function(require,module,exports){
    "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var d3=require("./helpers/d3-path.min"),UIBezierPath=function(){function t(){this.d3Paths=[d3.path()]}return t.prototype.activePath=function(){return this.d3Paths[this.d3Paths.length-1]},t.prototype.moveTo=function(t){this.activePath().moveTo(t.x,t.y)},t.prototype.addLineTo=function(t){this.activePath().lineTo(t.x,t.y)},t.prototype.addArcTo=function(t,e,o,a,i){this.activePath().moveTo(t.x+e,t.y),this.activePath().arc(t.x,t.y,e,o,a,i)},t.prototype.addCurveTo=function(t,e,o){this.activePath().bezierCurveTo(e.x,e.y,o.x,o.y,t.x,t.y)},t.prototype.addQuadCurveTo=function(t,e){this.activePath().quadraticCurveTo(e.x,e.y,t.x,t.y)},t.prototype.closePath=function(){this.activePath().closePath()},t.prototype.removeAllPoints=function(){this.d3Paths=[d3.path()]},t.prototype.appendPath=function(t){var e=this;t.d3Paths.forEach(function(t){e.d3Paths.push(t)})},t}();exports.UIBezierPath=UIBezierPath;
    },{"./helpers/d3-path.min":83}],28:[function(require,module,exports){
    "use strict";var __extends=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(exports,"__esModule",{value:!0});var UIView_1=require("./UIView"),UIEdgeInsets_1=require("./UIEdgeInsets"),UILabel_1=require("./UILabel"),UIImageView_1=require("./UIImageView"),UIFont_1=require("./UIFont"),UITapGestureRecognizer_1=require("./UITapGestureRecognizer"),UILongPressGestureRecognizer_1=require("./UILongPressGestureRecognizer"),UIEnums_1=require("./UIEnums"),UIColor_1=require("./UIColor"),UISize_1=require("./UISize"),UIAnimator_1=require("./UIAnimator"),UIButton=function(t){function e(e){void 0===e&&(e=!1);var i=t.call(this)||this;return i.isCustom=e,i.titleLabel=new UILabel_1.UILabel,i.imageView=new UIImageView_1.UIImageView,i._enabled=!0,i._selected=!1,i._highlighted=!1,i._tracking=!1,i._touchInside=!1,i._contentVerticalAlignment=UIEnums_1.UIControlContentVerticalAlignment.center,i._contentHorizontalAlignment=UIEnums_1.UIControlContentHorizontalAlignment.center,i._contentEdgeInsets=UIEdgeInsets_1.UIEdgeInsetsZero,i._titleEdgeInsets=UIEdgeInsets_1.UIEdgeInsetsZero,i._imageEdgeInsets=UIEdgeInsets_1.UIEdgeInsetsZero,i.statedTitles={},i.statedAttributedTitles={},i.statedTitleColors={},i.statedImages={},i.titleLabel.font=new UIFont_1.UIFont(17),i.addSubview(i.titleLabel),i.addSubview(i.imageView),i.setupTouches(),i}return __extends(e,t),Object.defineProperty(e.prototype,"enabled",{get:function(){return this._enabled},set:function(t){this._enabled!==t&&(this._enabled=t,this.gestureRecognizers.forEach(function(e){e.enabled=t}),this.reloadContents())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selected",{get:function(){return this._selected},set:function(t){this._selected!==t&&(this._selected=t,this.reloadContents())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"highlighted",{get:function(){return this._highlighted},set:function(t){this._highlighted!==t&&(this._highlighted=t,this.reloadContents())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tracking",{get:function(){return this._tracking},set:function(t){this._tracking!==t&&(this._tracking=t,this.reloadContents())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"touchInside",{get:function(){return this._touchInside},set:function(t){this._touchInside!==t&&(this._touchInside=t,this.reloadContents())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"contentVerticalAlignment",{get:function(){return this._contentVerticalAlignment},set:function(t){this._contentVerticalAlignment!==t&&(this._contentVerticalAlignment=t,this.reloadContents())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"contentHorizontalAlignment",{get:function(){return this._contentHorizontalAlignment},set:function(t){this._contentHorizontalAlignment!==t&&(this._contentHorizontalAlignment=t,this.reloadContents())},enumerable:!0,configurable:!0}),e.prototype.setTitle=function(t,e){this.statedTitles[e]!==t&&(t?this.statedTitles[e]=t:delete this.statedTitles[e],this.reloadContents())},e.prototype.setTitleColor=function(t,e){this.statedTitleColors[e]!==t&&(t?this.statedTitleColors[e]=t:delete this.statedTitleColors[e],this.reloadContents())},e.prototype.setTitleFont=function(t){this.titleLabel.font=t,this.reloadContents()},e.prototype.setImage=function(t,e){this.statedImages[e]!==t&&(t?this.statedImages[e]=t:delete this.statedImages[e],this.reloadContents())},e.prototype.setAttributedTitle=function(t,e){this.statedAttributedTitles[e]!==t&&(t?this.statedAttributedTitles[e]=t:delete this.statedAttributedTitles[e],this.reloadContents())},Object.defineProperty(e.prototype,"contentEdgeInsets",{get:function(){return this._contentEdgeInsets},set:function(t){UIEdgeInsets_1.UIEdgeInsetsEqualToEdgeInsets(this._contentEdgeInsets,t)||(this._contentEdgeInsets=t,this.reloadContents())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"titleEdgeInsets",{get:function(){return this._titleEdgeInsets},set:function(t){UIEdgeInsets_1.UIEdgeInsetsEqualToEdgeInsets(this._titleEdgeInsets,t)||(this._titleEdgeInsets=t,this.reloadContents())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageEdgeInsets",{get:function(){return this._imageEdgeInsets},set:function(t){UIEdgeInsets_1.UIEdgeInsetsEqualToEdgeInsets(this._imageEdgeInsets,t)||(this._imageEdgeInsets=t,this.reloadContents())},enumerable:!0,configurable:!0}),e.prototype.setupTouches=function(){var t=this;this.addGestureRecognizer((new UITapGestureRecognizer_1.UITapGestureRecognizer).on("touch",function(){t.emit("touchUpInside",t)}));var e=new UILongPressGestureRecognizer_1.UILongPressGestureRecognizer;e.on("began",function(){t.tracking=!0,t.highlighted=!0,t.emit("touchDown",t)}),e.on("changed",function(e){var i=e.locationInView(void 0),n=t.highlightedPointInside(i);t.touchInside!=n&&(n?t.emit("touchDragEnter",t):t.emit("touchDragExit",t)),t.touchInside=n,t.highlighted=t.touchInside,n?t.emit("touchDragInside",t):t.emit("touchDragOutside",t)}),e.on("ended",function(e){t.highlighted=!1,t.tracking=!1;var i=e.locationInView(void 0);t.highlightedPointInside(i)?t.emit("touchUpInside",t):t.emit("touchUpOutside",t)}),e.on("cancelled",function(){t.highlighted=!1,t.tracking=!1,t.emit("touchCancel",t)}),e.minimumPressDuration=.05,this.addGestureRecognizer(e)},e.prototype.tintColorDidChange=function(){t.prototype.tintColorDidChange.call(this),this.reloadContents()},e.prototype.reloadContents=function(){var t=this,e=this.attributedTitleForState(this.currentState());e?this.titleLabel.attributedText=e:(this.titleLabel.text=this.titleForState(this.currentState()),this.titleLabel.textColor=this.titleColorForState(this.currentState())),this.imageView.image=this.imageForState(this.currentState()),this.imageView.image&&!this.imageView.image.loaded&&this.imageView.image.fetchSize().then(function(){t.reloadLayouts()}),this.isCustom||UIAnimator_1.UIAnimator.linear(.1,function(){t.highlighted?(t.titleLabel.alpha=.3,t.imageView.alpha=.3):(t.titleLabel.alpha=1,t.imageView.alpha=1)},void 0),this.reloadLayouts()},e.prototype.reloadLayouts=function(){if(!(this.bounds.width<=0||this.bounds.height<=0)){var t=this.bounds.width-2*this.layer.borderWidth,e=this.bounds.height-2*this.layer.borderWidth,i=this.imageView.intrinsicContentSize()||UISize_1.UISizeZero,n=0,o=0,s=i.width,r=i.height,a=this.titleLabel.intrinsicContentSize()||UISize_1.UISizeZero,l=0,h=0,d=a.width,g=a.height;switch(this.contentHorizontalAlignment){case UIEnums_1.UIControlContentHorizontalAlignment.left:l=(n=0)+i.width+0;break;case UIEnums_1.UIControlContentHorizontalAlignment.center:l=(n=(t-(i.width+a.width))/2)+i.width+0;break;case UIEnums_1.UIControlContentHorizontalAlignment.right:l=(n=t-(i.width+a.width))+i.width+0;break;case UIEnums_1.UIControlContentHorizontalAlignment.fill:s=t,d=t}switch(this.contentVerticalAlignment){case UIEnums_1.UIControlContentVerticalAlignment.top:o=0,h=0;break;case UIEnums_1.UIControlContentVerticalAlignment.center:o=(e-i.height)/2,h=(e-a.height)/2;break;case UIEnums_1.UIControlContentVerticalAlignment.bottom:o=e-i.height,h=e-a.height;break;case UIEnums_1.UIControlContentVerticalAlignment.fill:r=e,g=e}n+=this.contentEdgeInsets.left+this.imageEdgeInsets.left,n-=this.contentEdgeInsets.right+this.imageEdgeInsets.right,o+=this.contentEdgeInsets.top+this.imageEdgeInsets.top,o-=this.contentEdgeInsets.bottom+this.imageEdgeInsets.bottom,l+=this.contentEdgeInsets.left+this.titleEdgeInsets.left,l-=this.contentEdgeInsets.right+this.titleEdgeInsets.right,h+=this.contentEdgeInsets.top+this.titleEdgeInsets.top,h-=this.contentEdgeInsets.bottom+this.titleEdgeInsets.bottom,this.imageView.frame={x:n,y:o,width:s,height:r},this.titleLabel.frame={x:l,y:h,width:d,height:g}}},e.prototype.currentState=function(){var t=UIEnums_1.UIControlState.normal;return this.enabled||(t|=UIEnums_1.UIControlState.disabled),this.selected&&(t|=UIEnums_1.UIControlState.selected),this.highlighted&&(t|=UIEnums_1.UIControlState.highlighted),t},e.prototype.imageForState=function(t){return void 0!==this.statedImages[t]?this.statedImages[t]:this.statedImages[0]},e.prototype.titleForState=function(t){return void 0!==this.statedTitles[t]?this.statedTitles[t]:this.statedTitles[0]},e.prototype.attributedTitleForState=function(t){return void 0!==this.statedAttributedTitles[t]?this.statedAttributedTitles[t]:this.statedAttributedTitles[0]},e.prototype.titleColorForState=function(t){return void 0!==this.statedTitleColors[t]?this.statedTitleColors[t]:void 0!==this.statedTitleColors[0]?this.statedTitleColors[0]:t==UIEnums_1.UIControlState.disabled?UIColor_1.UIColor.gray.colorWithAlphaComponent(.75):this.tintColor||UIColor_1.UIColor.black},e.prototype.highlightedPointInside=function(t){return t.x>=-22&&t.y>=-22&&t.x<=this.frame.width+22&&t.y<=this.frame.height+22},e.prototype.layoutSubviews=function(){t.prototype.layoutSubviews.call(this),this.reloadLayouts()},e}(UIView_1.UIView);exports.UIButton=UIButton;
    },{"./UIAnimator":25,"./UIColor":31,"./UIEdgeInsets":34,"./UIEnums":35,"./UIFont":37,"./UIImageView":40,"./UILabel":42,"./UILongPressGestureRecognizer":43,"./UISize":60,"./UITapGestureRecognizer":68,"./UIView":72}],29:[function(require,module,exports){
    "use strict";var __extends=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function o(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}();Object.defineProperty(exports,"__esModule",{value:!0});var ItemType,UIView_1=require("./UIView"),UIScrollView_1=require("./UIScrollView"),UIRect_1=require("./UIRect"),UIIndexPath_1=require("./UIIndexPath"),UISize_1=require("./UISize"),UIAffineTransform_1=require("./UIAffineTransform"),UIPoint_1=require("./UIPoint"),UIAnimator_1=require("./UIAnimator"),EventEmitter_1=require("../kimi/EventEmitter"),UITouch_1=require("./UITouch");!function(e){e[e.cell=0]="cell",e[e.supplementaryView=1]="supplementaryView",e[e.decorationView=2]="decorationView"}(ItemType=exports.ItemType||(exports.ItemType={})),exports.UICollectionElementKindCell="UICollectionElementKindCell";var itemKeyCache={},UICollectionViewItemKey=function(){function e(e,t,i){void 0===e&&(e=ItemType.cell),this.type=e,this.indexPath=t,this.identifier=i}return e.collectionItemKeyForCellWithIndexPath=function(t){var i="0,"+t.mapKey()+",UICollectionElementKindCell";if(void 0!==itemKeyCache[i])return itemKeyCache[i];var o=new e(ItemType.cell,t,exports.UICollectionElementKindCell);return itemKeyCache[i]=o,o},e.collectionItemKeyForLayoutAttributes=function(t){var i=t.representedElementCategory+","+t.indexPath.mapKey()+","+t.representedElementKind;if(void 0!==itemKeyCache[i])return itemKeyCache[i];var o=new e(t.representedElementCategory,t.indexPath,t.representedElementKind);return itemKeyCache[i]=o,o},e}();exports.UICollectionViewItemKey=UICollectionViewItemKey;var UICollectionViewLayoutAttributes=function(){function e(e,t,i){void 0===t&&(t=""),void 0===i&&(i=ItemType.cell),this.indexPath=e,this.elementKind=t,this.representedElementCategory=i,this.frame=UIRect_1.UIRectZero,this.center=UIPoint_1.UIPointZero,this.size=UISize_1.UISizeZero,this.transform=UIAffineTransform_1.UIAffineTransformIdentity,this.alpha=1,this.zIndex=0,this.hidden=!1,this.representedElementKind=this.elementKind}return e.prototype.isDecorationView=function(){return this.representedElementCategory===ItemType.decorationView},e.prototype.isSupplementaryView=function(){return this.representedElementCategory===ItemType.supplementaryView},e.prototype.isCell=function(){return this.representedElementCategory===ItemType.cell},e.layoutAttributesForCellWithIndexPath=function(t){return new e(t,exports.UICollectionElementKindCell,ItemType.cell)},e.layoutAttributesForSupplementaryViewOfKind=function(t,i){return new e(i,t,ItemType.supplementaryView)},e.layoutAttributesForDecorationViewOfKind=function(t,i){return new e(i,t,ItemType.decorationView)},e}();exports.UICollectionViewLayoutAttributes=UICollectionViewLayoutAttributes;var UICollectionViewLayout=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.layoutAttributesClass=UICollectionViewLayoutAttributes,t.collectionView=void 0,t}return __extends(t,e),t.prototype.prepareLayout=function(){},t.prototype.invalidateLayout=function(){this.collectionView&&this.collectionView._collectionViewData&&this.collectionView._collectionViewData.invalidate(),this.collectionView&&this.collectionView.setNeedsLayout(!0)},t.prototype.layoutAttributesForElementsInRect=function(e){return[]},t.prototype.layoutAttributesForItemAtIndexPath=function(e){},t.prototype.layoutAttributesForSupplementaryViewOfKind=function(e,t){},t.prototype.layoutAttributesForDecorationViewOfKind=function(e,t){},t.prototype.collectionViewContentSize=function(){return UISize_1.UISizeZero},t}(EventEmitter_1.EventEmitter);exports.UICollectionViewLayout=UICollectionViewLayout;var UICollectionView=function(e){function t(t){var i=e.call(this)||this;return i.collectionViewLayout=t,i.allowsSelection=!0,i.allowsMultipleSelection=!1,i._allVisibleViewsDict=new Map,i._indexPathsForSelectedItems=[],i._indexPathsForHighlightedItems=[],i._registeredCells={},i._collectionViewData=new UICollectionViewData(i,i.collectionViewLayout),i._cellReuseQueues={},i._supplementaryViewReuseQueues={},i._decorationViewReuseQueues={},i.firstTouchPoint=void 0,i.firstTouchCell=void 0,t.collectionView=i,i}return __extends(t,e),t.prototype.register=function(e,t){this._registeredCells[t]=e},t.prototype.dequeueReusableCell=function(e,t){if(this._cellReuseQueues[e]&&this._cellReuseQueues[e].length>0){var i=this._cellReuseQueues[e][0];if(i instanceof UICollectionViewCell)return this._cellReuseQueues[e].splice(0,1),i}var o=this._registeredCells[e];if(!o)return new UICollectionViewCell;var n=o(void 0);return n.reuseIdentifier=e,n.collectionView=this,n},t.prototype.allCells=function(){var e=[];return this._allVisibleViewsDict.forEach(function(t){t instanceof UICollectionViewCell&&e.push(t)}),e},t.prototype.visibleCells=function(){var e=this;return this.allCells().filter(function(t){return UIRect_1.UIRectIntersectsRect(e.visibleBoundRects,t.frame)})},t.prototype.reloadData=function(){var e=this;this.invalidateLayout(),this._allVisibleViewsDict.forEach(function(e){e.hidden=!0}),this._allVisibleViewsDict.clear(),this._indexPathsForSelectedItems.forEach(function(t){var i=e.cellForItemAtIndexPath(t);i&&(i.selected=!1,i.highlighted=!1)}),this._indexPathsForSelectedItems=[],this._indexPathsForHighlightedItems=[],this.setNeedsLayout(!0)},t.prototype.selectItem=function(e,t){var i=this;this.allowsMultipleSelection||(this._indexPathsForSelectedItems.forEach(function(e){i._allVisibleViewsDict.forEach(function(t){t instanceof UICollectionViewCell&&t.currentIndexPath&&t.currentIndexPath.mapKey()===e.mapKey()&&(t.selected=!1,i.emit("didDeselectItem",t.currentIndexPath,t))})}),this._indexPathsForSelectedItems=[]),this._indexPathsForSelectedItems.push(e),t?UIAnimator_1.UIAnimator.linear(.5,function(){i._allVisibleViewsDict.forEach(function(t){t instanceof UICollectionViewCell&&t.currentIndexPath&&t.currentIndexPath.mapKey()===e.mapKey()&&(t.selected=!0)})},void 0):this._allVisibleViewsDict.forEach(function(t){t instanceof UICollectionViewCell&&t.currentIndexPath&&t.currentIndexPath.mapKey()===e.mapKey()&&(t.selected=!0)})},t.prototype.deselectItem=function(e,t){var i=this,o=this._indexPathsForSelectedItems.map(function(e){return e.mapKey()}).indexOf(e.mapKey());o>=0&&this._indexPathsForSelectedItems.splice(o,1),t?UIAnimator_1.UIAnimator.linear(.5,function(){i._allVisibleViewsDict.forEach(function(t){t instanceof UICollectionViewCell&&t.currentIndexPath&&t.currentIndexPath.mapKey()===e.mapKey()&&(t.selected=!1)})},void 0):this._allVisibleViewsDict.forEach(function(t){t instanceof UICollectionViewCell&&t.currentIndexPath&&t.currentIndexPath.mapKey()===e.mapKey()&&(t.selected=!1)})},t.prototype.numberOfSections=function(){return this._collectionViewData.numberOfSections()},t.prototype.numberOfItemsInSection=function(e){return this._collectionViewData.numberOfItemsInSection(e)},t.prototype.layoutAttributesForItemAtIndexPath=function(e){return this.collectionViewLayout.layoutAttributesForItemAtIndexPath(e)},t.prototype.layoutAttributesForSupplementaryElementOfKind=function(e,t){return this.collectionViewLayout.layoutAttributesForSupplementaryViewOfKind(e,t)},t.prototype.indexPathForItemAtPoint=function(e){var t=this.collectionViewLayout.layoutAttributesForElementsInRect({x:e.x,y:e.y,width:1,height:1});return t[t.length-1].indexPath},t.prototype.indexPathForCell=function(e){for(var t=this._allVisibleViewsDict.keys();;){var i=t.next();if(i.done)break;if(this._allVisibleViewsDict.get(i.value)===e)return i.value.indexPath}},t.prototype.cellForItemAtIndexPath=function(e){for(var t=this._allVisibleViewsDict.keys();;){var i=t.next();if(i.done)break;if(i.value.indexPath.mapKey()===e.mapKey()){var o=this._allVisibleViewsDict.get(i.value);if(o instanceof UICollectionViewCell)return o}}},t.prototype.indexPathsForVisibleItems=function(){return this.visibleCells().filter(function(e){return void 0!==e.layoutAttributes}).map(function(e){return e.layoutAttributes.indexPath})},t.prototype.indexPathsForSelectedItems=function(){return this._indexPathsForSelectedItems},Object.defineProperty(t.prototype,"visibleBoundRects",{get:function(){return{x:this.contentOffset.x,y:this.contentOffset.y,width:this.bounds.width,height:this.bounds.height}},enumerable:!0,configurable:!0}),t.prototype.contentOffsetDidChanged=function(){e.prototype.contentOffsetDidChanged.call(this),this.layoutCollectionViews()},t.prototype.layoutSubviews=function(){e.prototype.layoutSubviews.call(this),this.layoutCollectionViews()},t.prototype.layoutCollectionViews=function(){this._collectionViewData.validateLayoutInRect(this.visibleBoundRects);var e=this._collectionViewData.collectionViewContentRect();this.contentSize=e,this._collectionViewData.validateLayoutInRect(this.visibleBoundRects),this.updateVisibleCellsNow(!0)},t.prototype.invalidateLayout=function(){this.collectionViewLayout.invalidateLayout(),this._collectionViewData.invalidate()},t.prototype.updateVisibleCellsNow=function(e){var t=this;void 0===e&&(e=!1);var i=this._collectionViewData.layoutAttributesForElementsInRect(this.visibleBoundRects);if(0!==i.length){var o=new Map;i.forEach(function(e){var i=UICollectionViewItemKey.collectionItemKeyForLayoutAttributes(e);o.set(i,e);var n=t._allVisibleViewsDict.get(i);if(n instanceof UICollectionReusableView)n instanceof UICollectionViewCell&&(n.currentIndexPath=i.indexPath,n.highlighted=t._indexPathsForHighlightedItems.map(function(e){return e.mapKey()}).indexOf(i.indexPath.mapKey())>=0,n.selected=t._indexPathsForSelectedItems.map(function(e){return e.mapKey()}).indexOf(i.indexPath.mapKey())>=0),n.applyLayoutAttributes(e);else{switch(i.type){case ItemType.cell:(n=t.createPreparedCellForItemAtIndexPath(i.indexPath,e))instanceof UICollectionViewCell&&(n.currentIndexPath=i.indexPath,n.highlighted=t._indexPathsForHighlightedItems.map(function(e){return e.mapKey()}).indexOf(i.indexPath.mapKey())>=0,n.selected=t._indexPathsForSelectedItems.map(function(e){return e.mapKey()}).indexOf(i.indexPath.mapKey())>=0);break;case ItemType.supplementaryView:n=t.createPreparedSupplementaryViewForElementOfKind(e.representedElementKind,e.indexPath,e);break;case ItemType.decorationView:n=void 0}n instanceof UICollectionReusableView&&(t._allVisibleViewsDict.set(i,n),t.addControlledSubview(n),n.applyLayoutAttributes(e))}});var n=function(){for(var e=[],i=t._allVisibleViewsDict.keys();;){var o=i.next();if(o.done)break;e.push(o.value)}return e}();o.forEach(function(e,t){var i=n.indexOf(t);i>=0&&n.splice(i,1)}),n.forEach(function(e){var i=t._allVisibleViewsDict.get(e);if(i)switch(i.hidden=!0,t._allVisibleViewsDict.delete(e),e.type){case ItemType.cell:t.reuseCell(i);break;case ItemType.supplementaryView:t.reuseSupplementaryView(i);break;case ItemType.decorationView:t.reuseDecorationView(i)}})}},t.prototype.createPreparedCellForItemAtIndexPath=function(e,t){return this.__cellForItemAtIndexPath(this,e)},t.prototype.createPreparedSupplementaryViewForElementOfKind=function(e,t,i){var o=this.__viewForSupplementaryElementOfKind(this,e,t);return o&&o.applyLayoutAttributes(i),o},t.prototype.addControlledSubview=function(e){void 0===e.superview&&this.addSubview(e),e.hidden=!1},t.prototype.queueReusableView=function(e,t,i){e.hidden=!0,e.prepareForReuse(),void 0===t[i]&&(t[i]=[]),(t[i]||[]).push(e)},t.prototype.reuseCell=function(e){var t=e.reuseIdentifier;void 0!==t&&this.queueReusableView(e,this._cellReuseQueues,t)},t.prototype.reuseSupplementaryView=function(e){var t=e.layoutAttributes,i=e.reuseIdentifier;if(void 0!==t&&void 0!==i){this.queueReusableView(e,this._supplementaryViewReuseQueues,"${layoutAttributes.elementKind}/$reuseIdentifier")}},t.prototype.reuseDecorationView=function(e){var t=e.reuseIdentifier;void 0!==t&&this.queueReusableView(e,this._decorationViewReuseQueues,t)},t.prototype.touchesBegan=function(t){e.prototype.touchesBegan.call(this,t);var i=t[0];i&&this.handleTouch(UITouch_1.UITouchPhase.began,i)},t.prototype.touchesMoved=function(t){e.prototype.touchesMoved.call(this,t);var i=t[0];i&&this.handleTouch(UITouch_1.UITouchPhase.moved,i)},t.prototype.touchesEnded=function(t){e.prototype.touchesEnded.call(this,t);var i=t[0];i&&this.handleTouch(UITouch_1.UITouchPhase.ended,i)},t.prototype.touchesCancelled=function(t){e.prototype.touchesCancelled.call(this,t);var i=t[0];i&&this.handleTouch(UITouch_1.UITouchPhase.cancelled,i)},t.prototype.handleTouch=function(e,t){var i=this;if(this.allowsSelection)switch(e){case UITouch_1.UITouchPhase.began:if(!this.tracking){for(var o=t.view,n=!0;void 0!==o&&!(o instanceof UICollectionViewCell);)o.gestureRecognizers.length>0&&(n=!1),o=o.superview;n&&(this.firstTouchPoint=t.windowPoint,o instanceof UICollectionViewCell&&(this.firstTouchCell=o,setTimeout(function(){void 0!==i.firstTouchPoint&&o instanceof UICollectionViewCell&&(o.currentIndexPath&&i._indexPathsForHighlightedItems.push(o.currentIndexPath),o.highlighted=!0)},150)))}break;case UITouch_1.UITouchPhase.moved:this.firstTouchPoint&&t.windowPoint&&(void 0!==UIView_1.UIView.recognizedGesture||Math.abs(t.windowPoint.y-this.firstTouchPoint.y)>8)&&(this._indexPathsForHighlightedItems=[],this._allVisibleViewsDict.forEach(function(e){e instanceof UICollectionViewCell&&(e.highlighted=!1)}),this.firstTouchPoint=void 0,this.firstTouchCell=void 0);break;case UITouch_1.UITouchPhase.ended:if(this.firstTouchCell){var r=this.firstTouchCell;if(this._indexPathsForHighlightedItems=[],this.allowsMultipleSelection||(this._indexPathsForSelectedItems.forEach(function(e){i._allVisibleViewsDict.forEach(function(t,o){o.indexPath&&o.indexPath.mapKey()===e.mapKey()&&t instanceof UICollectionViewCell&&(t.selected=!1,i.emit("didDeselectItem",t.currentIndexPath,t))})}),this._indexPathsForSelectedItems=[]),this.firstTouchPoint=void 0,this.firstTouchCell=void 0,this._indexPathsForHighlightedItems=[],this._allVisibleViewsDict.forEach(function(e){e instanceof UICollectionViewCell&&(e.highlighted=!1)}),r.currentIndexPath){var l=this._indexPathsForSelectedItems.map(function(e){return e.mapKey()}).indexOf(r.currentIndexPath.mapKey());l>=0?this._indexPathsForSelectedItems.splice(l,1):this._indexPathsForSelectedItems.push(r.currentIndexPath)}r.selected=!r.selected,r.selected?this.emit("didSelectItem",r.currentIndexPath,r):this.emit("didDeselectItem",r.currentIndexPath,r)}else this.firstTouchPoint=void 0,this.firstTouchCell=void 0,this._indexPathsForHighlightedItems=[],this._allVisibleViewsDict.forEach(function(e){e instanceof UICollectionViewCell&&(e.highlighted=!1)});break;case UITouch_1.UITouchPhase.cancelled:this.firstTouchPoint=void 0,this.firstTouchCell=void 0,this._indexPathsForHighlightedItems=[],this._allVisibleViewsDict.forEach(function(e){e instanceof UICollectionViewCell&&(e.highlighted=!1)})}},t.prototype.__cellForItemAtIndexPath=function(e,t){return e.val("cellForItem",t)||new UICollectionViewCell},t.prototype.__viewForSupplementaryElementOfKind=function(e,t,i){},t.prototype.__numberOfSections=function(e){var t=e.val("numberOfSections");return"number"==typeof t?t:1},t.prototype.__numberOfItemsInSection=function(e,t){var i=e.val("numberOfItems",t);return"number"==typeof i?i:0},t}(UIScrollView_1.UIScrollView);exports.UICollectionView=UICollectionView;var UICollectionReusableView=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.collectionView=void 0,t.layoutAttributes=void 0,t.reuseIdentifier=void 0,t}return __extends(t,e),t.prototype.prepareForReuse=function(){this.layoutAttributes=void 0},t.prototype.applyLayoutAttributes=function(e){e!==this.layoutAttributes&&(this.layoutAttributes=e,this.frame=e.frame,this.transform=e.transform)},t}(UIView_1.UIView);exports.UICollectionReusableView=UICollectionReusableView;var UICollectionViewCell=function(e){function t(){var t=e.call(this)||this;return t._selected=!1,t._highlighted=!1,t.contentView=new UIView_1.UIView,t.currentIndexPath=void 0,t.addSubview(t.contentView),t}return __extends(t,e),Object.defineProperty(t.prototype,"selected",{get:function(){return this._selected},set:function(e){this._selected=e,this.emit("selected",this,e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"highlighted",{get:function(){return this._highlighted},set:function(e){this._highlighted=e,this.emit("highlighted",this,e)},enumerable:!0,configurable:!0}),t.prototype.prepareForReuse=function(){e.prototype.prepareForReuse.call(this),this.selected=!1,this.highlighted=!1},t.prototype.layoutSubviews=function(){e.prototype.layoutSubviews.call(this),this.contentView.frame=this.bounds},t}(UICollectionReusableView);exports.UICollectionViewCell=UICollectionViewCell;var UICollectionViewData=function(){function e(e,t){this.collectionView=e,this.layout=t,this.layoutIsPrepared=!1,this.itemCountsAreValid=!1,this._numSections=0,this._numItems=0,this._sectionItemCounts=[],this.validLayoutRect=void 0,this.contentSize=UISize_1.UISizeZero,this.cachedLayoutAttributes=[]}return e.prototype.validateLayoutInRect=function(e){this.validateItemCounts(),this.prepareToLoadData(),void 0!==this.validLayoutRect&&UIRect_1.UIRectEqualToRect(this.validLayoutRect,e)||(this.validLayoutRect=e,this.cachedLayoutAttributes=this.layout.layoutAttributesForElementsInRect(e).filter(function(e){return e.isCell()||e.isDecorationView()||e.isSupplementaryView()}))},e.prototype.rectForItemAtIndexPath=function(e){return UIRect_1.UIRectZero},e.prototype.globalIndexForItemAtIndexPath=function(e){return this.numberOfItemsBeforeSection(e.section)+e.row},e.prototype.indexPathForItemAtGlobalIndex=function(e){this.validateItemCounts();for(var t=0,i=0;i<this._numSections;i++){var o=i,n=t+this._sectionItemCounts[o];if(n>e)break;t=n}var r=e-t;return new UIIndexPath_1.UIIndexPath(r,0)},e.prototype.layoutAttributesForElementsInRect=function(e){return this.validateLayoutInRect(e),this.cachedLayoutAttributes},e.prototype.invalidate=function(){this.itemCountsAreValid=!1,this.layoutIsPrepared=!1,this.validLayoutRect=void 0},e.prototype.numberOfItemsBeforeSection=function(e){this.validateItemCounts();for(var t=0,i=0;i<e;i++)t+=this._sectionItemCounts[i];return t},e.prototype.numberOfItemsInSection=function(e){return this.validateItemCounts(),e>=this._numSections||e<0?0:this._sectionItemCounts[e]},e.prototype.numberOfItems=function(){return this.validateItemCounts(),this._numItems},e.prototype.numberOfSections=function(){return this.validateItemCounts(),this._numSections},e.prototype.collectionViewContentRect=function(){return{x:0,y:0,width:this.contentSize.width,height:this.contentSize.height}},e.prototype.updateItemCounts=function(){var e=this.collectionView;if(this._numSections=e.__numberOfSections(e),this._numSections<=0)return this._numItems=0,this._sectionItemCounts=[],void(this.itemCountsAreValid=!0);this._numItems=0;for(var t=[],i=0;i<this._numSections;i++){var o=e.__numberOfItemsInSection(e,i);t.push(o),this._numItems+=o}this._sectionItemCounts=t,this.itemCountsAreValid=!0},e.prototype.validateItemCounts=function(){this.itemCountsAreValid||this.updateItemCounts()},e.prototype.prepareToLoadData=function(){this.layoutIsPrepared||(this.layout.prepareLayout(),this.contentSize=this.layout.collectionViewContentSize(),this.layoutIsPrepared=!0)},e}();exports.UICollectionViewData=UICollectionViewData;
    },{"../kimi/EventEmitter":17,"./UIAffineTransform":23,"./UIAnimator":25,"./UIIndexPath":41,"./UIPoint":50,"./UIRect":54,"./UIScrollView":59,"./UISize":60,"./UITouch":71,"./UIView":72}],30:[function(require,module,exports){
    "use strict";var __extends=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),__assign=this&&this.__assign||function(){return(__assign=Object.assign||function(t){for(var e,i=1,o=arguments.length;i<o;i++)for(var n in e=arguments[i])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}).apply(this,arguments)};Object.defineProperty(exports,"__esModule",{value:!0});var UICollectionViewScrollDirection,UISize_1=require("./UISize"),UIRect_1=require("./UIRect"),UIEdgeInsets_1=require("./UIEdgeInsets"),UICollectionView_1=require("./UICollectionView"),UIIndexPath_1=require("./UIIndexPath");!function(t){t[t.vertical=0]="vertical",t[t.horizontal=1]="horizontal"}(UICollectionViewScrollDirection=exports.UICollectionViewScrollDirection||(exports.UICollectionViewScrollDirection={}));var UIFlowLayoutHorizontalAlignment,UIFlowLayoutCommonRowHorizontalAlignmentKey="UIFlowLayoutCommonRowHorizontalAlignmentKey",UIFlowLayoutLastRowHorizontalAlignmentKey="UIFlowLayoutLastRowHorizontalAlignmentKey",UIFlowLayoutRowVerticalAlignmentKey="UIFlowLayoutRowVerticalAlignmentKey",UICollectionElementKindSectionHeader="UICollectionElementKindSectionHeader",UICollectionElementKindSectionFooter="UICollectionElementKindSectionFooter";!function(t){t[t.left=0]="left",t[t.center=1]="center",t[t.right=2]="right",t[t.justify=3]="justify"}(UIFlowLayoutHorizontalAlignment=exports.UIFlowLayoutHorizontalAlignment||(exports.UIFlowLayoutHorizontalAlignment={}));var UIGridLayoutInfo=function(){function t(){this.sections=[],this.rowAlignmentOptions={},this.usesFloatingHeaderFooter=!1,this.dimension=0,this.horizontal=!1,this.leftToRight=!1,this.contentSize=UISize_1.UISizeZero,this._isValid=!1}return t.prototype.frameForItemAtIndexPath=function(t){var e=this.sections[t.section];return e.fixedItemSize?{x:0,y:0,width:e.itemSize.width,height:e.itemSize.height}:e.items[t.row].itemFrame},t.prototype.addSection=function(){var t=new UIGridLayoutSection;return t.rowAlignmentOptions=this.rowAlignmentOptions,t.layoutInfo=this,this.sections.push(t),this.invalidate(!1),t},t.prototype.invalidate=function(t){this._isValid=!1},t.prototype.snapshot=function(){var e=new t;return e.sections=this.sections.slice(0),e.rowAlignmentOptions=this.rowAlignmentOptions,e.usesFloatingHeaderFooter=this.usesFloatingHeaderFooter,e.dimension=this.dimension,e.horizontal=this.horizontal,e.leftToRight=this.leftToRight,e.contentSize=__assign({},this.contentSize),e},t}(),UIGridLayoutSection=function(){function t(){this.items=[],this.rows=[],this.fixedItemSize=!1,this.itemSize=UISize_1.UISizeZero,this._itemsCount=0,this.verticalInterstice=0,this.horizontalInterstice=0,this.sectionMargins=UIEdgeInsets_1.UIEdgeInsetsZero,this.frame=UIRect_1.UIRectZero,this.headerFrame=UIRect_1.UIRectZero,this.footerFrame=UIRect_1.UIRectZero,this.headerDimension=0,this.footerDimension=0,this.layoutInfo=void 0,this.rowAlignmentOptions={},this.otherMargin=0,this.beginMargin=0,this.endMargin=0,this.actualGap=0,this.lastRowBeginMargin=0,this.lastRowEndMargin=0,this.lastRowActualGap=0,this.lastRowIncomplete=!1,this.itemsByRowCount=0,this.indexOfImcompleteRow=0,this._isValid=!1}return Object.defineProperty(t.prototype,"itemsCount",{get:function(){return this.fixedItemSize?this._itemsCount:this.items.length},set:function(t){this._itemsCount=t},enumerable:!0,configurable:!0}),t.prototype.recomputeFromIndex=function(t){this.invalidate(),this.computeLayout()},t.prototype.invalidate=function(){this._isValid=!1,this.rows=[]},t.prototype.computeLayout=function(){if(!this._isValid){var t=this.layoutInfo;if(void 0===t)return;var e={width:0,height:0},i=0,o=0,n=0,r=0,s=void 0,h=t.dimension,a=h;t.horizontal?(a-=this.sectionMargins.top+this.sectionMargins.bottom,this.headerFrame={x:e.width,y:0,width:this.headerDimension,height:h},e.width+=this.headerDimension+this.sectionMargins.right):(a-=this.sectionMargins.left+this.sectionMargins.right,this.headerFrame={x:0,y:e.height,width:h,height:this.headerDimension},e.height+=this.headerDimension+this.sectionMargins.top);for(var l=t.horizontal?this.verticalInterstice:this.horizontalInterstice;o<=this.itemsCount;){var m=o>=this.itemsCount,c=void 0;m||(c=this.fixedItemSize?void 0:this.items[o]);var d=this.fixedItemSize?this.itemSize:c&&c.itemFrame?{width:c.itemFrame.width,height:c.itemFrame.height}:{width:0,height:0},u=t.horizontal?d.height:d.width;n>0&&(u+=l),r<u||m?(s&&(this.itemsByRowCount=Math.max(n,this.itemsByRowCount),s.itemCount=n,m||(this.indexOfImcompleteRow=i),s.layoutRow(),t.horizontal?(s.rowFrame={x:e.width,y:this.sectionMargins.top,width:s.rowSize.width,height:s.rowSize.height},e.height=Math.max(s.rowSize.height,e.height),e.width+=s.rowSize.width+(m?0:this.horizontalInterstice)):(s.rowFrame={x:this.sectionMargins.left,y:e.height,width:s.rowSize.width,height:s.rowSize.height},e.height+=s.rowSize.height+(m?0:this.verticalInterstice),e.width=Math.max(s.rowSize.width,e.width))),m||(s&&(s.complete=!0),(s=this.addRow()).fixedItemSize=this.fixedItemSize,s.index=i,this.indexOfImcompleteRow=i,i++,n>0&&(u-=l),r=a-u,n=0)):r-=u,c&&s&&s.addItem(c),o++,n++}t.horizontal?(e.width+=this.sectionMargins.right,this.footerFrame={x:e.width,y:0,width:this.footerDimension,height:h},e.width+=this.footerDimension):(e.height+=this.sectionMargins.bottom,this.footerFrame={x:0,y:e.height,width:h,height:this.footerDimension},e.height+=this.footerDimension),this.frame={x:0,y:0,width:e.width,height:e.height},this._isValid=!0}},t.prototype.addItem=function(){var t=new UIGridLayoutItem;return t.section=this,this.items.push(t),t},t.prototype.addRow=function(){var t=new UIGridLayoutRow;return t.section=this,this.rows.push(t),t},t.prototype.snapshot=function(){var e=new t;return e.items=this.items.slice(0),e.rows=this.rows.slice(0),e.verticalInterstice=this.verticalInterstice,e.horizontalInterstice=this.horizontalInterstice,e.sectionMargins=this.sectionMargins,e.frame=this.frame,e.headerFrame=this.headerFrame,e.footerFrame=this.footerFrame,e.headerDimension=this.headerDimension,e.footerDimension=this.footerDimension,e.layoutInfo=this.layoutInfo,e.rowAlignmentOptions=this.rowAlignmentOptions,e.fixedItemSize=this.fixedItemSize,e.itemSize=this.itemSize,e.itemsCount=this.itemsCount,e.otherMargin=this.otherMargin,e.beginMargin=this.beginMargin,e.endMargin=this.endMargin,e.actualGap=this.actualGap,e.lastRowBeginMargin=this.lastRowBeginMargin,e.lastRowEndMargin=this.lastRowEndMargin,e.lastRowActualGap=this.lastRowActualGap,e.lastRowIncomplete=this.lastRowIncomplete,e.itemsByRowCount=this.itemsByRowCount,e.indexOfImcompleteRow=this.indexOfImcompleteRow,e},t}(),UIGridLayoutItem=function(){return function(){this.section=void 0,this.rowObject=void 0,this.itemFrame={x:0,y:0,width:0,height:0}}}(),UIGridLayoutRow=function(){function t(){this.section=void 0,this.items=[],this.rowSize=UISize_1.UISizeZero,this.rowFrame={x:0,y:0,width:0,height:0},this.index=0,this.complete=!1,this.fixedItemSize=!1,this._itemCount=0,this._isValid=!1}return Object.defineProperty(t.prototype,"itemCount",{get:function(){return this.fixedItemSize?this._itemCount:this.items.length},set:function(t){this._itemCount=t},enumerable:!0,configurable:!0}),t.prototype.addItem=function(t){this.items.push(t),t.rowObject=this,this.invalidate()},t.prototype.layoutRow=function(){this.layoutRowAndGenerateRectArray(!1)},t.prototype.itemRects=function(){return this.layoutRowAndGenerateRectArray(!0)||[]},t.prototype.invalidate=function(){this._isValid=!1,this.rowSize=UISize_1.UISizeZero,this.rowFrame={x:0,y:0,width:0,height:0}},t.prototype.snapshot=function(){var e=new t;return e.section=this.section,e.items=this.items,e.rowSize=__assign({},this.rowSize),e.rowFrame=__assign({},this.rowFrame),e.index=this.index,e.complete=this.complete,e.fixedItemSize=this.fixedItemSize,e.itemCount=this.itemCount,e},t.prototype.layoutRowAndGenerateRectArray=function(t){var e=t?[]:void 0;if(!this._isValid||t){var i=this.section;if(void 0===i)return;var o=!(!i.layoutInfo||!i.layoutInfo.horizontal),n=i.indexOfImcompleteRow==this.index,r=i.rowAlignmentOptions[n?UIFlowLayoutLastRowHorizontalAlignmentKey:UIFlowLayoutCommonRowHorizontalAlignmentKey];if(void 0===r)return;var s=i.layoutInfo&&i.layoutInfo.dimension||0;s-=o?i.sectionMargins.top+i.sectionMargins.bottom:i.sectionMargins.left+i.sectionMargins.right;for(var h=0,a=0,l=o?i.verticalInterstice:i.horizontalInterstice;a<this.itemCount||n;){var m;if(this.fixedItemSize)m=o?i.itemSize.height:i.itemSize.width;else{var c=this.items[Math.min(a,this.itemCount-1)];m=o?c.itemFrame.height:c.itemFrame.width}if(a>0&&(m+=l),s<m)break;s-=m,h=++a}var d={x:0,y:0};r==UIFlowLayoutHorizontalAlignment.right?d.x+=s:(r==UIFlowLayoutHorizontalAlignment.center||r==UIFlowLayoutHorizontalAlignment.justify&&1==h)&&(d.x+=s/2);for(var u=h<=1?0:s/(h-1),w={x:0,y:0,width:0,height:0},I={x:0,y:0,width:i.itemSize.width,height:i.itemSize.height},f=0;f<this.itemCount;f++){var y=void 0;this.fixedItemSize||(y=this.items[f],I=__assign({},y.itemFrame)),o?(I.y=d.y,d.y+=I.height+i.verticalInterstice,r==UIFlowLayoutHorizontalAlignment.justify&&(d.y+=u)):(I.x=d.x,d.x+=I.width+i.horizontalInterstice,r==UIFlowLayoutHorizontalAlignment.justify&&(d.x+=u));var g={x:I.x,y:I.y,width:I.width,height:I.height};y&&(y.itemFrame=g),e&&e.push(g),w=UIRect_1.UIRectUnion(w,g)}this.rowSize={width:w.width,height:w.height},this._isValid=!0}return e},t}(),UICollectionViewFlowLayout=function(t){function e(){var e,i=null!==t&&t.apply(this,arguments)||this;return i._data=void 0,i.minimumLineSpacing=10,i.minimumInteritemSpacing=10,i.itemSize={width:50,height:50},i.headerReferenceSize=UISize_1.UISizeZero,i.footerReferenceSize=UISize_1.UISizeZero,i._sectionInset=UIEdgeInsets_1.UIEdgeInsetsZero,i.scrollDirection=UICollectionViewScrollDirection.vertical,i.rowAlignmentOptions=((e={})[UIFlowLayoutCommonRowHorizontalAlignmentKey]=UIFlowLayoutHorizontalAlignment.justify,e[UIFlowLayoutLastRowHorizontalAlignmentKey]=UIFlowLayoutHorizontalAlignment.justify,e[UIFlowLayoutRowVerticalAlignmentKey]=1,e),i._visibleBounds=UIRect_1.UIRectZero,i.rectCache=[],i}return __extends(e,t),Object.defineProperty(e.prototype,"sectionInset",{get:function(){return this._sectionInset},set:function(t){this._sectionInset=t,this.invalidateLayout()},enumerable:!0,configurable:!0}),e.prototype.prepareLayout=function(){t.prototype.prepareLayout.call(this);var e=new UIGridLayoutInfo;e.horizontal=this.scrollDirection==UICollectionViewScrollDirection.horizontal,this._visibleBounds=this.collectionView?this.collectionView.visibleBoundRects:UIRect_1.UIRectZero,e.dimension=e.horizontal?this._visibleBounds.height:this._visibleBounds.width,e.rowAlignmentOptions=this.rowAlignmentOptions,this._data=e,this.fetchItemsInfo()},e.prototype.layoutAttributesForElementsInRect=function(t){var e=this;null==this._data&&this.prepareLayout();var i=[],o=this._data;return void 0===o?[]:(o.sections.forEach(function(o,n){var r=e.rectCache,s={x:o.headerFrame.x+o.frame.x,y:o.headerFrame.y+o.frame.y,width:o.headerFrame.width,height:o.headerFrame.height};!UIRect_1.UIRectIsEmpty(s)&&UIRect_1.UIRectIntersectsRect(s,t)&&((a=new e.layoutAttributesClass(new UIIndexPath_1.UIIndexPath(0,n),UICollectionElementKindSectionHeader,UICollectionView_1.ItemType.supplementaryView)).frame=s,i.push(a));var h=r[n];void 0===h&&o.fixedItemSize&&o.rows.length>0&&null!=(h=o.rows[0].itemRects())&&(r[n]=h),o.rows.forEach(function(r){var s={x:r.rowFrame.x+o.frame.x,y:r.rowFrame.y+o.frame.y,width:r.rowFrame.width,height:r.rowFrame.height};if(UIRect_1.UIRectIntersectsRect(s,t))for(var a=0;a<r.itemCount;a++){var l=void 0,m=void 0,c=void 0;if(r.fixedItemSize)c=h[a]||UIRect_1.UIRectZero,m=r.index*o.itemsByRowCount+a;else{var d=r.items[a];m=o.items.indexOf(d),c=d.itemFrame}var u={x:s.x+c.x,y:s.y+c.y,width:c.width,height:c.height};UIRect_1.UIRectIntersectsRect(u,t)&&((l=new e.layoutAttributesClass(new UIIndexPath_1.UIIndexPath(m,n),UICollectionView_1.UICollectionElementKindCell,UICollectionView_1.ItemType.cell)).frame=u,i.push(l))}});var a,l={x:o.footerFrame.x+o.frame.x,y:o.footerFrame.y+o.frame.y,width:o.footerFrame.width,height:o.footerFrame.height};!UIRect_1.UIRectIsEmpty(l)&&UIRect_1.UIRectIntersectsRect(l,t)&&((a=new e.layoutAttributesClass(new UIIndexPath_1.UIIndexPath(0,n),UICollectionElementKindSectionFooter,UICollectionView_1.ItemType.supplementaryView)).frame=l,i.push(a))}),i)},e.prototype.layoutAttributesForItemAtIndexPath=function(t){void 0===this._data&&this.prepareLayout();var e=this._data;if(void 0!==e){var i=e.sections[t.section],o=void 0,n={x:0,y:0,width:0,height:0};if(i.fixedItemSize&&i.itemsByRowCount>0&&t.row/i.itemsByRowCount<i.rows.length){o=i.rows[t.row/i.itemsByRowCount];var r=t.row%i.itemsByRowCount;n=o.itemRects()[r]}else if(t.row<i.items.length){var s=i.items[t.row];o=s.rowObject,n=s.itemFrame}var h=new this.layoutAttributesClass(t,UICollectionView_1.UICollectionElementKindCell,UICollectionView_1.ItemType.cell);if(o){var a={x:o.rowFrame.x+i.frame.x,y:o.rowFrame.y+i.frame.y,width:o.rowFrame.width,height:o.rowFrame.height};h.frame={x:a.x+n.x,y:a.y+n.y,width:n.width,height:n.height}}return h}},e.prototype.layoutAttributesForSupplementaryViewOfKind=function(t,e){void 0===this._data&&this.prepareLayout();var i=this._data;if(void 0!==i){var o=e.section,n=void 0;if(o<i.sections.length){var r=i.sections[o],s={x:0,y:0,width:0,height:0};t==UICollectionElementKindSectionHeader?s=r.headerFrame:t==UICollectionElementKindSectionFooter&&(s=r.footerFrame),UIRect_1.UIRectIsEmpty(s)||(s={x:s.x+r.frame.x,y:s.y+r.frame.y,width:s.width,height:s.height},(n=new this.layoutAttributesClass(new UIIndexPath_1.UIIndexPath(0,o),t,UICollectionView_1.ItemType.supplementaryView)).frame=s)}return n}},e.prototype.layoutAttributesForDecorationViewOfKind=function(t,e){},e.prototype.collectionViewContentSize=function(){void 0===this._data&&this.prepareLayout();var e=this._data;return void 0===e?t.prototype.collectionViewContentSize.call(this):e.contentSize},e.prototype.invalidateLayout=function(){t.prototype.invalidateLayout.call(this),this.rectCache=[],this._data=void 0},e.prototype.__sizeForItem=function(t){return this.val("sizeForItem",t)||this.itemSize},e.prototype.__insetForSection=function(t){return this.val("insetForSection",t)||this.sectionInset},e.prototype.__minimumLineSpacing=function(t){var e=this.val("minimumLineSpacing",t);return"number"==typeof e?e:this.minimumLineSpacing},e.prototype.__minimumInteritemSpacing=function(t){var e=this.val("minimumInteritemSpacing",t);return"number"==typeof e?e:this.minimumInteritemSpacing},e.prototype.__referenceSizeForHeader=function(t){return this.headerReferenceSize},e.prototype.__referenceSizeForFooter=function(t){return this.footerReferenceSize},e.prototype.fetchItemsInfo=function(){this.getSizingInfos(),this.updateItemsLayout()},e.prototype.getSizingInfos=function(){var t=this._data;if(void 0!==t){var e=this.collectionView;if(void 0!==e)for(var i=e.numberOfSections(),o=0;o<i;o++){var n=t.addSection();n.verticalInterstice=t.horizontal?this.__minimumInteritemSpacing(o):this.__minimumLineSpacing(o),n.horizontalInterstice=t.horizontal?this.__minimumLineSpacing(o):this.__minimumInteritemSpacing(o),n.sectionMargins=this.__insetForSection(o),n.headerDimension=t.horizontal?this.__referenceSizeForHeader(o).width:this.__referenceSizeForHeader(o).height,n.footerDimension=t.horizontal?this.__referenceSizeForFooter(o).width:this.__referenceSizeForFooter(o).height;for(var r=e.numberOfItemsInSection(o),s=0;s<r;s++){var h=new UIIndexPath_1.UIIndexPath(s,o),a=this.__sizeForItem(h);n.addItem().itemFrame={x:0,y:0,width:a.width,height:a.height}}}}},e.prototype.updateItemsLayout=function(){var t=this._data;if(void 0!==t){var e={width:0,height:0};t.sections.forEach(function(i){i.computeLayout();var o=__assign({},i.frame);t.horizontal?(o.x+=e.width,e.width+=i.frame.width+i.frame.x,e.height=Math.max(e.height,o.height+i.frame.y+i.sectionMargins.top+i.sectionMargins.bottom)):(o.y+=e.height,e.height+=o.height+i.frame.y,e.width=Math.max(e.width,o.width+i.frame.x+i.sectionMargins.left+i.sectionMargins.right)),i.frame={x:o.x,y:o.y,width:o.width,height:o.height}}),t.contentSize={width:e.width,height:e.height}}},e}(UICollectionView_1.UICollectionViewLayout);exports.UICollectionViewFlowLayout=UICollectionViewFlowLayout;
    },{"./UICollectionView":29,"./UIEdgeInsets":34,"./UIIndexPath":41,"./UIRect":54,"./UISize":60}],31:[function(require,module,exports){
    "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var UIColor=function(){function t(t,e,r,n){this.r=t,this.g=e,this.b=r,this.a=n}return t.hexColor=function(e){var r=e.replace("#","");return 6===r.length?new t(parseInt(r.substr(0,2),16)/255,parseInt(r.substr(2,2),16)/255,parseInt(r.substr(4,2),16)/255,1):8===r.length?new t(parseInt(r.substr(2,2),16)/255,parseInt(r.substr(4,2),16)/255,parseInt(r.substr(6,2),16)/255,parseInt(r.substr(0,2),16)/255):t.clear},t.prototype.colorWithAlphaComponent=function(e){return new t(this.r,this.g,this.b,this.a*e)},t.prototype.toStyle=function(){return"rgba("+(255*this.r).toFixed(0)+", "+(255*this.g).toFixed(0)+", "+(255*this.b).toFixed(0)+", "+this.a.toFixed(6)+")"},t.black=new t(0,0,0,1),t.clear=new t(0,0,0,0),t.gray=new t(.5,.5,.5,1),t.red=new t(1,0,0,1),t.yellow=new t(1,1,0,1),t.green=new t(0,1,0,1),t.blue=new t(0,0,1,1),t.white=new t(1,1,1,1),t}();exports.UIColor=UIColor;
    },{}],32:[function(require,module,exports){
    "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var UIConfirm=function(){function e(e){this.message=e,this.confirmTitle="Yes",this.cancelTitle="No"}return e.prototype.show=function(e,t){window.confirm(this.message)?e&&e():t&&t()},e}();exports.UIConfirm=UIConfirm;
    },{}],33:[function(require,module,exports){
    "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var UUID_1=require("../foundation/UUID"),UIDevice=function(){function e(){this.name="Browser",this.model="Browser",this.systemName="Web",this.systemVersion="1.0.0";var e=localStorage.getItem("com.xt.identifierForVendor");"string"==typeof e?this.identifierForVendor=new UUID_1.UUID(e):(this.identifierForVendor=new UUID_1.UUID,localStorage.setItem("com.xt.identifierForVendor",this.identifierForVendor.UUIDString))}return e.current=new e,e}();exports.UIDevice=UIDevice;
    },{"../foundation/UUID":15}],34:[function(require,module,exports){
    "use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.UIEdgeInsetsZero={top:0,left:0,bottom:0,right:0},exports.UIEdgeInsetsMake=function(t,e,o,s){return{top:t,left:e,bottom:o,right:s}},exports.UIEdgeInsetsInsetRect=function(t,e){return{x:t.x+e.left,y:t.y+e.top,width:t.width-e.left-e.right,height:t.height-e.top-e.bottom}},exports.UIEdgeInsetsEqualToEdgeInsets=function(t,e){return Math.abs(t.top-e.top)<.001&&Math.abs(t.left-e.left)<.001&&Math.abs(t.bottom-e.bottom)<.001&&Math.abs(t.right-e.right)<.001};
    },{}],35:[function(require,module,exports){
    "use strict";var UIViewContentMode,UIControlState,UIControlContentVerticalAlignment,UIControlContentHorizontalAlignment,UITextAlignment,UILineBreakMode,UITextFieldViewMode,UITextAutocapitalizationType,UITextAutocorrectionType,UITextSpellCheckingType,UIKeyboardType,UIReturnKeyType,UILayoutConstraintAxis,UIStackViewDistribution,UIStackViewAlignment,UIStatusBarStyle;Object.defineProperty(exports,"__esModule",{value:!0}),function(e){e[e.scaleToFill=0]="scaleToFill",e[e.scaleAspectFit=1]="scaleAspectFit",e[e.scaleAspectFill=2]="scaleAspectFill"}(UIViewContentMode=exports.UIViewContentMode||(exports.UIViewContentMode={})),function(e){e[e.normal=0]="normal",e[e.highlighted=1]="highlighted",e[e.disabled=2]="disabled",e[e.selected=3]="selected"}(UIControlState=exports.UIControlState||(exports.UIControlState={})),function(e){e[e.center=0]="center",e[e.top=1]="top",e[e.bottom=2]="bottom",e[e.fill=3]="fill"}(UIControlContentVerticalAlignment=exports.UIControlContentVerticalAlignment||(exports.UIControlContentVerticalAlignment={})),function(e){e[e.center=0]="center",e[e.left=1]="left",e[e.right=2]="right",e[e.fill=3]="fill"}(UIControlContentHorizontalAlignment=exports.UIControlContentHorizontalAlignment||(exports.UIControlContentHorizontalAlignment={})),function(e){e[e.left=0]="left",e[e.center=1]="center",e[e.right=2]="right"}(UITextAlignment=exports.UITextAlignment||(exports.UITextAlignment={})),function(e){e[e.wordWrapping=0]="wordWrapping",e[e.charWrapping=1]="charWrapping",e[e.clipping=2]="clipping",e[e.truncatingHead=3]="truncatingHead",e[e.truncatingTail=4]="truncatingTail",e[e.truncatingMiddle=5]="truncatingMiddle"}(UILineBreakMode=exports.UILineBreakMode||(exports.UILineBreakMode={})),function(e){e[e.never=0]="never",e[e.whileEditing=1]="whileEditing",e[e.unlessEditing=2]="unlessEditing",e[e.always=3]="always"}(UITextFieldViewMode=exports.UITextFieldViewMode||(exports.UITextFieldViewMode={})),function(e){e[e.none=0]="none",e[e.words=1]="words",e[e.sentences=2]="sentences",e[e.allCharacters=3]="allCharacters"}(UITextAutocapitalizationType=exports.UITextAutocapitalizationType||(exports.UITextAutocapitalizationType={})),function(e){e[e.default=0]="default",e[e.no=1]="no",e[e.yes=2]="yes"}(UITextAutocorrectionType=exports.UITextAutocorrectionType||(exports.UITextAutocorrectionType={})),function(e){e[e.default=0]="default",e[e.no=1]="no",e[e.yes=2]="yes"}(UITextSpellCheckingType=exports.UITextSpellCheckingType||(exports.UITextSpellCheckingType={})),function(e){e[e.default=0]="default",e[e.ASCIICapable=1]="ASCIICapable",e[e.numbersAndPunctuation=2]="numbersAndPunctuation",e[e.numberPad=3]="numberPad",e[e.phonePad=4]="phonePad",e[e.emailAddress=5]="emailAddress",e[e.decimalPad=6]="decimalPad"}(UIKeyboardType=exports.UIKeyboardType||(exports.UIKeyboardType={})),function(e){e[e.default=0]="default",e[e.go=1]="go",e[e.next=2]="next",e[e.send=3]="send",e[e.done=4]="done"}(UIReturnKeyType=exports.UIReturnKeyType||(exports.UIReturnKeyType={})),function(e){e[e.horizontal=0]="horizontal",e[e.vertical=1]="vertical"}(UILayoutConstraintAxis=exports.UILayoutConstraintAxis||(exports.UILayoutConstraintAxis={})),function(e){e[e.fill=0]="fill",e[e.fillEqually=1]="fillEqually",e[e.fillProportionally=2]="fillProportionally",e[e.equalSpacing=3]="equalSpacing",e[e.equalCentering=4]="equalCentering"}(UIStackViewDistribution=exports.UIStackViewDistribution||(exports.UIStackViewDistribution={})),function(e){e[e.fill=0]="fill",e[e.leading=1]="leading",e[e.center=2]="center",e[e.trailing=3]="trailing"}(UIStackViewAlignment=exports.UIStackViewAlignment||(exports.UIStackViewAlignment={})),function(e){e[e.default=0]="default",e[e.lightContent=1]="lightContent"}(UIStatusBarStyle=exports.UIStatusBarStyle||(exports.UIStatusBarStyle={}));
    },{}],36:[function(require,module,exports){
    "use strict";var __extends=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(exports,"__esModule",{value:!0});var UIView_1=require("./UIView"),UIColor_1=require("./UIColor"),UIFetchMoreControl=function(t){function e(){var e=t.call(this)||this;return e.scrollView=void 0,e.enabled=!0,e.fetching=!1,e.tintColor=UIColor_1.UIColor.gray,e}return __extends(e,t),e.prototype.tintColorDidChange=function(){t.prototype.tintColorDidChange.call(this)},e.prototype.beginFetching=function(){this.fetching=!0,this.emit("fetch",this)},e.prototype.endFetching=function(){if(this.scrollView){var t=this.scrollView;t.contentOffset.y>t.contentSize.height+t.contentInset.bottom-t.bounds.height&&t.setContentOffset({x:0,y:t.contentSize.height+t.contentInset.bottom-t.bounds.height},!0)}this.fetching=!1},e}(UIView_1.UIView);exports.UIFetchMoreControl=UIFetchMoreControl;
    },{"./UIColor":31,"./UIView":72}],37:[function(require,module,exports){
    "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var UIFont=function(){return function(t,e,o){this.pointSize=t,this.fontStyle=e,this.fontName=o,void 0===o&&(this.fontName="-apple-system")}}();exports.UIFont=UIFont;
    },{}],38:[function(require,module,exports){
    "use strict";var __extends=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(exports,"__esModule",{value:!0});var UIGestureRecognizerState,UIPoint_1=require("./UIPoint"),EventEmitter_1=require("../kimi/EventEmitter");!function(e){e[e.possible=0]="possible",e[e.began=1]="began",e[e.changed=2]="changed",e[e.ended=3]="ended",e[e.cancelled=4]="cancelled",e[e.failed=5]="failed"}(UIGestureRecognizerState=exports.UIGestureRecognizerState||(exports.UIGestureRecognizerState={}));var UIGestureRecognizer=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state=UIGestureRecognizerState.possible,t.enabled=!0,t.view=void 0,t.touches=[],t}return __extends(t,e),t.prototype.requireGestureRecognizerToFail=function(e){},t.prototype.locationInView=function(e){var t=this.touches[0];return t?t.locationInView(e):UIPoint_1.UIPointZero},t.prototype.numberOfTouches=function(){return this.touches.values.length},t.prototype.locationOfTouch=function(e,t){var n=this.touches[e];return n?n.locationInView(t):UIPoint_1.UIPointZero},t.prototype.handleTouch=function(e){this.touches=e},t.prototype.handleEvent=function(e){},t}(EventEmitter_1.EventEmitter);exports.UIGestureRecognizer=UIGestureRecognizer;
    },{"../kimi/EventEmitter":17,"./UIPoint":50}],39:[function(require,module,exports){
    "use strict";var __extends=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),__awaiter=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(a,r){function o(e){try{s(i.next(e))}catch(e){r(e)}}function l(e){try{s(i.throw(e))}catch(e){r(e)}}function s(e){e.done?a(e.value):new n(function(t){t(e.value)}).then(o,l)}s((i=i.apply(e,t||[])).next())})},__generator=this&&this.__generator||function(e,t){var n,i,a,r,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return r={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function l(r){return function(l){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,i&&(a=2&r[0]?i.return:r[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,r[1])).done)return a;switch(i=0,a&&(r=[2&r[0],a.value]),r[0]){case 0:case 1:a=r;break;case 4:return o.label++,{value:r[1],done:!1};case 5:o.label++,i=r[1],r=[0];continue;case 7:r=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===r[0]||2===r[0])){o=0;continue}if(3===r[0]&&(!a||r[1]>a[0]&&r[1]<a[3])){o.label=r[1];break}if(6===r[0]&&o.label<a[1]){o.label=a[1],a=r;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(r);break}a[2]&&o.ops.pop(),o.trys.pop();continue}r=t.call(e,o)}catch(e){r=[6,e],i=0}finally{n=a=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,l])}}};Object.defineProperty(exports,"__esModule",{value:!0});var UIImageRenderingMode,UISize_1=require("./UISize"),EventEmitter_1=require("../kimi/EventEmitter");!function(e){e[e.automatic=0]="automatic",e[e.alwaysOriginal=1]="alwaysOriginal",e[e.alwaysTemplate=2]="alwaysTemplate"}(UIImageRenderingMode=exports.UIImageRenderingMode||(exports.UIImageRenderingMode={}));var imageQueue={},UIImage=function(e){function t(n,i){void 0===i&&(i=void 0);var a=e.call(this)||this;if(a.options=n,a.imageElement=document.createElement("img"),a.renderingMode=UIImageRenderingMode.alwaysOriginal,a.loaded=!1,a.size=UISize_1.UISizeZero,a.scale=1,n.base64){if(a.imageElement.src="data:image;base64,"+n.base64,a.imageKey=n.name,i&&i.loaded)return a;a.imageElement.addEventListener("load",function(){var e=n.name?t.scaleFromName(n.name):1;a.size={width:a.imageElement.naturalWidth/e,height:a.imageElement.naturalHeight/e},a.scale=e,a.loaded=!0,a.emit("load")})}else if(n.data){if(a.imageElement.src="data:image;base64,"+n.data.base64EncodedString(),a.imageKey=n.name,i&&i.loaded)return a;a.imageElement.addEventListener("load",function(){var e=n.name?t.scaleFromName(n.name):1;a.size={width:a.imageElement.naturalWidth/e,height:a.imageElement.naturalHeight/e},a.scale=e,a.loaded=!0,a.emit("load")})}else if(n.name){if(a.imageElement.src="./assets/images/"+n.name+"@2x.png",a.imageKey=n.name,i&&i.loaded)return a;a.imageElement.addEventListener("load",function(){a.size={width:a.imageElement.naturalWidth/2,height:a.imageElement.naturalHeight/2},a.scale=2,a.loaded=!0,a.emit("load")})}return void 0!==n.renderingMode&&(a.renderingMode=n.renderingMode),a}return __extends(t,e),t.fromURL=function(e){var n=new t({});return n.imageElement.src=e,n.imageKey=e,n.imageElement.addEventListener("load",function(){n.size={width:n.imageElement.naturalWidth,height:n.imageElement.naturalHeight},n.loaded=!0,n.emit("load")}),n},t.scaleFromName=function(e){return e.indexOf("@2x")>0?2:e.indexOf("@3x")>0?3:e.indexOf("@4x")>0?4:1},t.prototype.fetchSize=function(){return __awaiter(this,void 0,void 0,function(){var e=this;return __generator(this,function(t){switch(t.label){case 0:return this.loaded?[2,this.size]:[3,1];case 1:return[4,new Promise(function(t,n){e.on("load",function(){t(e.size)})})];case 2:return[2,t.sent()]}})})},t.prototype.clone=function(){var e=new t(this.options,this);return e.size=this.size,e.scale=this.scale,e.loaded=this.loaded,e.renderingMode=this.renderingMode,e},t.prototype.dequeue=function(){if(this.imageKey){void 0===imageQueue[this.imageKey]&&(imageQueue[this.imageKey]=[]);for(var e=0;e<imageQueue[this.imageKey].length;e++){var t=imageQueue[this.imageKey][e];if(null===t.imageElement.parentElement)return t}var n=this.clone();return imageQueue[this.imageKey].push(n),n}return this.clone()},t}(EventEmitter_1.EventEmitter);exports.UIImage=UIImage;
    },{"../kimi/EventEmitter":17,"./UISize":60}],40:[function(require,module,exports){
    "use strict";var __extends=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(exports,"__esModule",{value:!0});var UIView_1=require("./UIView"),UIImage_1=require("./UIImage"),UIEnums_1=require("./UIEnums"),UISize_1=require("./UISize"),IdelQueue_1=require("./helpers/IdelQueue"),svgFilterRoot=document.createElementNS("http://www.w3.org/2000/svg","svg"),templateElement=document.createElement("template");document.getElementsByTagName("html")[0].appendChild(templateElement),templateElement.appendChild(svgFilterRoot);var UIImageView=function(e){function t(){var t=e.call(this)||this;return t.contentElement=document.createElement("div"),t.duringSetImageWithAnimation=!1,t.duringSetImageAnimating=!1,t.currentURLString=void 0,t.loadImageHandler=void 0,t.filterElement=void 0,t.userInteractionEnabled=!1,t.contentElement.style.position="absolute",t.contentElement.style.width="100%",t.contentElement.style.height="100%",t.domElement.appendChild(t.contentElement),t}return __extends(t,e),Object.defineProperty(t.prototype,"image",{get:function(){return this._image},set:function(e){var t=this;if(!(this._image===e||this._image&&e&&void 0!==this._image.imageKey&&this._image.imageKey===e.imageKey&&this._image.renderingMode===e.renderingMode)){var i=e;i&&i.imageElement.parentElement instanceof HTMLElement&&(i=i.dequeue()),this.currentURLString=void 0,this._image=i,this.duringSetImageWithAnimation&&!this.duringSetImageAnimating||(this.contentElement.innerHTML=""),i&&(i.imageElement.style.position="absolute",i.imageElement.style.width="100%",i.imageElement.style.height="100%",i.imageElement.style.borderRadius=this.domElement.style.borderRadius,this.contentElement.appendChild(i.imageElement),this.resetContentObjectFit(),this.duringSetImageWithAnimation&&(i.imageElement.style.opacity="0.0",i.imageElement.style.webkitTransition="opacity 0.25s linear",i.imageElement.style.transition="opacity 0.25s linear",this.duringSetImageWithAnimation=!0,setTimeout(function(){i&&(i.imageElement.style.opacity="1.0"),setTimeout(function(){i&&(i.imageElement.style.webkitTransition=null,i.imageElement.style.transition=null,t.contentElement.childNodes.forEach(function(e){i&&e!=i.imageElement&&t.contentElement.removeChild(e)})),t.duringSetImageWithAnimation=!1},250)},32))),this.createTintFilter()}},enumerable:!0,configurable:!0}),t.prototype.loadImageWithURLString=function(e,t){var i=this;this.image=t,this.currentURLString=e,IdelQueue_1.IdelQueue.shared.cancel(this.loadImageHandler),e&&(this.loadImageHandler=IdelQueue_1.IdelQueue.shared.add(function(){if(i.currentURLString===e){var t=UIImage_1.UIImage.fromURL(e);t.fetchSize().then(function(){i.currentURLString===e&&(i.duringSetImageWithAnimation=!0,i.image=t,i.duringSetImageWithAnimation=!1)})}}))},Object.defineProperty(t.prototype,"contentMode",{get:function(){return this._contentMode},set:function(e){this._contentMode=e,this.resetContentObjectFit()},enumerable:!0,configurable:!0}),t.prototype.tintColorDidChange=function(){e.prototype.tintColorDidChange.call(this),this.createTintFilter()},t.prototype.resetContentObjectFit=function(){if(this.image)switch(this.contentMode){case UIEnums_1.UIViewContentMode.scaleAspectFit:this.image.imageElement.style.setProperty("object-fit","contain");break;case UIEnums_1.UIViewContentMode.scaleAspectFill:this.image.imageElement.style.setProperty("object-fit","cover");break;case UIEnums_1.UIViewContentMode.scaleToFill:this.image.imageElement.style.setProperty("object-fit","fill")}},t.prototype.didRemovedFromWindow=function(){e.prototype.didRemovedFromWindow.call(this),this.filterElement&&svgFilterRoot.removeChild(this.filterElement)},t.prototype.createTintFilter=function(){if(this.image&&this.image.renderingMode===UIImage_1.UIImageRenderingMode.alwaysTemplate){this.filterElement&&svgFilterRoot.removeChild(this.filterElement);var e="com.xt.filter."+Math.random()+Math.random(),t=document.createElementNS("http://www.w3.org/2000/svg","filter");t.id=e,t.innerHTML='\n            <feColorMatrix in="SourceGraphic"\n                        type="matrix"\n                        values="0 0 0 0 '+this.tintColor.r+"\n                                0 0 0 0 "+this.tintColor.g+"\n                                0 0 0 0 "+this.tintColor.b+" \n                                0 0 0 "+this.tintColor.a+' 0" />\n            ',svgFilterRoot.appendChild(t),this.filterElement=t,this.image.imageElement.style.filter="url(#"+e+")"}},t.prototype.intrinsicContentSize=function(){return this.image?this.image.size:UISize_1.UISizeZero},t}(UIView_1.UIView);exports.UIImageView=UIImageView;
    },{"./UIEnums":35,"./UIImage":39,"./UISize":60,"./UIView":72,"./helpers/IdelQueue":76}],41:[function(require,module,exports){
    "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var UIIndexPath=function(){function t(t,e){this.row=t,this.section=e}return t.prototype.mapKey=function(){return this.row+"-"+this.section},t}();exports.UIIndexPath=UIIndexPath;
    },{}],42:[function(require,module,exports){
    "use strict";var __extends=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(exports,"__esModule",{value:!0});var UIView_1=require("./UIView"),UIEnums_1=require("./UIEnums"),UIColor_1=require("./UIColor"),UIFont_1=require("./UIFont"),TextMeasurer_1=require("./helpers/TextMeasurer"),UILabel=function(t){function e(){var e=t.call(this)||this;return e.textElement=document.createElement("span"),e._text=void 0,e._attributedText=void 0,e._font=void 0,e._textColor=void 0,e._textAlignment=UIEnums_1.UITextAlignment.left,e.lineBreakMode=UIEnums_1.UILineBreakMode.truncatingTail,e._numberOfLines=-1,e.cachedSize=void 0,e.userInteractionEnabled=!1,e.textElement.style.position="absolute",e.textElement.style.userSelect="none",e.textElement.style.cursor="default",e.textElement.style.width="100%",e.textElement.style.top="50%",e.textElement.style.left="0",e.textElement.style.transform="translateY(-50%)",e.numberOfLines=1,e.domElement.appendChild(e.textElement),e}return __extends(e,t),Object.defineProperty(e.prototype,"text",{get:function(){return this._text},set:function(t){this._text!==t&&(this._text=t,this.cachedSize=void 0,this.textElement.innerText=t||"")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"attributedText",{get:function(){return this._attributedText},set:function(t){if(this._attributedText!==t)if(this._attributedText=t,this.cachedSize=void 0,t){this.textElement.innerText="";var e=t.toHTMLText();this.textElement.appendChild(e),this.domElement.style.textAlign=e.style.textAlign}else this.textElement.innerText=""},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"font",{get:function(){return this._font},set:function(t){this._font!==t&&(this._font=t,this.cachedSize=void 0,t?(this.textElement.style.fontSize=t.pointSize.toString()+"px",this.textElement.style.fontFamily="string"==typeof t.fontName?t.fontName:null,this.textElement.style.fontWeight="string"==typeof t.fontStyle?t.fontStyle:null,this.textElement.style.fontStyle="string"==typeof t.fontStyle?t.fontStyle:null):(this.textElement.style.fontSize="14px",this.textElement.style.fontFamily=null,this.textElement.style.fontWeight=null,this.textElement.style.fontStyle=null))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"textColor",{get:function(){return this._textColor},set:function(t){this._textColor!==t&&(this._textColor=t,this.textElement.style.color=t?t.toStyle():UIColor_1.UIColor.black.toStyle())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"textAlignment",{get:function(){return this._textAlignment},set:function(t){if(this._textAlignment!==t)switch(this._textAlignment=t,t){case UIEnums_1.UITextAlignment.left:this.textElement.style.textAlign="left";break;case UIEnums_1.UITextAlignment.center:this.textElement.style.textAlign="center";break;case UIEnums_1.UITextAlignment.right:this.textElement.style.textAlign="right"}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"numberOfLines",{get:function(){return this._numberOfLines},set:function(t){this._numberOfLines!==t&&(this._numberOfLines=t,1===t?(this.textElement.style.overflow="hidden",this.textElement.style.wordWrap=null,this.textElement.style.wordBreak=null,this.textElement.style.textOverflow=this.lineBreakMode===UIEnums_1.UILineBreakMode.truncatingTail?"ellipsis":null,this.textElement.style.display="-webkit-box",this.textElement.style.setProperty("-webkit-line-clamp","1"),this.textElement.style.setProperty("-webkit-box-orient","vertical"),this.textElement.style.whiteSpace="nowrap",this.textElement.style.visibility=null):(this.textElement.style.overflow="hidden",this.textElement.style.wordWrap=null,this.textElement.style.wordBreak=null,this.textElement.style.textOverflow=this.lineBreakMode===UIEnums_1.UILineBreakMode.truncatingTail?"ellipsis":null,this.textElement.style.display="-webkit-box",this.textElement.style.webkitBoxOrient="vertical",this.resetLineClamp(),this.textElement.style.whiteSpace=null))},enumerable:!0,configurable:!0}),e.prototype.resetLineClamp=function(){if(1!=this.numberOfLines){var t=0==this.numberOfLines?99999:this.numberOfLines,e=16;this.font&&(e=Math.max(1.5*this.font.pointSize,this.font.pointSize+12));var i=Math.min(Math.floor(this.bounds.height/e),t);if(i<t||0===this.numberOfLines){var n=0;this.text?n=TextMeasurer_1.TextMeasurer.measureText(this.text,{font:this.font||new UIFont_1.UIFont(14),inRect:{x:0,y:0,width:this.bounds.width,height:1/0}}).height:this.attributedText&&(n=TextMeasurer_1.TextMeasurer.measureAttributedText(this.attributedText,{width:this.bounds.width,height:1/0}).height),n<=this.bounds.height?(this.textElement.style.setProperty("-webkit-line-clamp",null),this.textElement.style.visibility=null):(this.textElement.style.setProperty("-webkit-line-clamp",i.toString()),this.textElement.style.visibility=null)}else i>0?(this.textElement.style.setProperty("-webkit-line-clamp",i.toString()),this.textElement.style.visibility=null):this.textElement.style.visibility="none"}},e.prototype.layoutSubviews=function(){t.prototype.layoutSubviews.call(this),this.resetLineClamp()},e.prototype.intrinsicContentSize=function(){return void 0!==this.cachedSize?this.cachedSize:this.attributedText?(this.cachedSize=TextMeasurer_1.TextMeasurer.measureAttributedText(this.attributedText,{width:1/0,height:1/0}),this.cachedSize):this.text?(this.cachedSize=TextMeasurer_1.TextMeasurer.measureText(this.text,{font:this.font||new UIFont_1.UIFont(14),inRect:{x:0,y:0,width:1/0,height:1/0},numberOfLines:this.numberOfLines}),this.cachedSize):{width:0,height:0}},e}(UIView_1.UIView);exports.UILabel=UILabel;
    },{"./UIColor":31,"./UIEnums":35,"./UIFont":37,"./UIView":72,"./helpers/TextMeasurer":82}],43:[function(require,module,exports){
    "use strict";var __extends=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(exports,"__esModule",{value:!0});var UIGestureRecognizer_1=require("./UIGestureRecognizer"),UITouch_1=require("./UITouch"),UIView_1=require("./UIView"),UILongPressGestureRecognizer=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.numberOfTapsRequired=1,t.numberOfTouchesRequired=1,t.minimumPressDuration=.5,t.allowableMovement=10,t.beganPoints={},t}return __extends(t,e),t.prototype.handleTouch=function(t){var n=this;e.prototype.handleTouch.call(this,t),t.forEach(function(e){if(e.phase==UITouch_1.UITouchPhase.began){if(null!=UIView_1.UIView.recognizedGesture)return void(n.beganPoints={});e.windowPoint&&(n.beganPoints[e.identifier]=e.windowPoint),void 0===n.timerTask&&Object.keys(n.beganPoints).length>=n.numberOfTouchesRequired&&(n.timerTask=setTimeout(function(){null==UIView_1.UIView.recognizedGesture&&n.state==UIGestureRecognizer_1.UIGestureRecognizerState.possible?(UIView_1.UIView.recognizedGesture=n,n.state=UIGestureRecognizer_1.UIGestureRecognizerState.began,n.handleEvent("began"),n.emit("began",n)):n.state=UIGestureRecognizer_1.UIGestureRecognizerState.failed},1e3*n.minimumPressDuration))}else if(e.phase==UITouch_1.UITouchPhase.moved)if(n.state==UIGestureRecognizer_1.UIGestureRecognizerState.possible){if(e.windowPoint&&n.beganPoints[e.identifier]){var t=n.beganPoints[e.identifier];(Math.abs(t.x-e.windowPoint.x)>=n.allowableMovement||Math.abs(t.y-e.windowPoint.y)>=n.allowableMovement)&&(clearTimeout(n.timerTask),n.state=UIGestureRecognizer_1.UIGestureRecognizerState.failed)}}else n.state!=UIGestureRecognizer_1.UIGestureRecognizerState.began&&n.state!=UIGestureRecognizer_1.UIGestureRecognizerState.changed||(n.state=UIGestureRecognizer_1.UIGestureRecognizerState.changed,n.handleEvent("changed"),n.emit("changed",n));else e.phase==UITouch_1.UITouchPhase.ended?(clearTimeout(n.timerTask),n.timerTask=void 0,n.state!=UIGestureRecognizer_1.UIGestureRecognizerState.began&&n.state!=UIGestureRecognizer_1.UIGestureRecognizerState.changed||(n.state=UIGestureRecognizer_1.UIGestureRecognizerState.ended,n.handleEvent("ended"),n.emit("ended",n),setTimeout(function(){UIView_1.UIView.recognizedGesture=void 0},0)),n.state=UIGestureRecognizer_1.UIGestureRecognizerState.possible,n.beganPoints={}):e.phase==UITouch_1.UITouchPhase.cancelled&&(clearTimeout(n.timerTask),n.timerTask=void 0,n.state!=UIGestureRecognizer_1.UIGestureRecognizerState.began&&n.state!=UIGestureRecognizer_1.UIGestureRecognizerState.changed||(n.state=UIGestureRecognizer_1.UIGestureRecognizerState.cancelled,n.handleEvent("cancelled"),n.emit("cancelled",n),setTimeout(function(){UIView_1.UIView.recognizedGesture=void 0},0)),n.state=UIGestureRecognizer_1.UIGestureRecognizerState.possible,n.beganPoints={})})},t}(UIGestureRecognizer_1.UIGestureRecognizer);exports.UILongPressGestureRecognizer=UILongPressGestureRecognizer;
    },{"./UIGestureRecognizer":38,"./UITouch":71,"./UIView":72}],44:[function(require,module,exports){
    "use strict";var __extends=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}();Object.defineProperty(exports,"__esModule",{value:!0});var UIView_1=require("./UIView"),UIColor_1=require("./UIColor"),UIImage_1=require("./UIImage"),EventEmitter_1=require("../kimi/EventEmitter"),UIAnimator_1=require("./UIAnimator"),UISize_1=require("./UISize"),UILabel_1=require("./UILabel"),UIButton_1=require("./UIButton"),UIEnums_1=require("./UIEnums"),UIFont_1=require("./UIFont"),UINavigationItem=function(){function t(){var t,e=this;this.viewController=void 0,this.navigationBar=void 0,this._title=void 0,this._titleView=((t=new UILabel_1.UILabel).font=new UIFont_1.UIFont(18),t),this.backButton=(new UIButton_1.UIButton).on("touchUpInside",function(){e.viewController&&e.viewController.navigationController&&e.viewController.navigationController.popViewController(!0)}),this._hidesBackButton=!1,this._leftBarButtonItems=[],this._rightBarButtonItem=void 0,this._rightBarButtonItems=[]}return Object.defineProperty(t.prototype,"title",{get:function(){return this._title||(this.viewController?this.viewController.title:void 0)},set:function(t){this._title=t,this.setNeedsUpdate()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"titleView",{get:function(){return this._titleView},set:function(t){this._titleView&&this._titleView.removeFromSuperview(),this._titleView=t,this.setNeedsUpdate()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hidesBackButton",{get:function(){return this._hidesBackButton},set:function(t){this._hidesBackButton=t,this.setNeedsUpdate()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"leftBarButtonItem",{get:function(){return this.leftBarButtonItems[0]},set:function(t){this.leftBarButtonItems=t?[t]:[]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"leftBarButtonItems",{get:function(){return this._leftBarButtonItems},set:function(t){this._leftBarButtonItems.forEach(function(t){t.customView&&t.customView.removeFromSuperview()}),this._leftBarButtonItems=t,this.setNeedsUpdate()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rightBarButtonItem",{get:function(){return this.rightBarButtonItems[0]},set:function(t){this.rightBarButtonItems=t?[t]:[]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rightBarButtonItems",{get:function(){return this._rightBarButtonItems},set:function(t){this._rightBarButtonItems.forEach(function(t){t.customView&&t.customView.removeFromSuperview()}),this._rightBarButtonItems=t,this.setNeedsUpdate()},enumerable:!0,configurable:!0}),t.prototype.setNeedsUpdate=function(){this.titleView instanceof UILabel_1.UILabel&&(this.titleView.text=this.title),this.navigationBar&&this.navigationBar.displayItems()},t.prototype.allViews=function(){var t=[];return t.push(this.backButton),t.push(this.titleView),this.leftViews().forEach(function(e){t.push(e)}),this.rightViews().forEach(function(e){t.push(e)}),t},t.prototype.leftViews=function(){return this.leftBarButtonItems.filter(function(t){return void 0!==t.customView}).map(function(t){return t.customView})},t.prototype.rightViews=function(){return this.rightBarButtonItems.filter(function(t){return void 0!==t.customView}).map(function(t){return t.customView})},t}();exports.UINavigationItem=UINavigationItem;var UIBarButton=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(UIButton_1.UIButton),UIBarButtonItem=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._title=void 0,e.titleAttributes=void 0,e._image=void 0,e._tintColor=UIColor_1.UIColor.black,e.width=44,e.customView=(new UIBarButton).on("touchUpInside",function(){e.emit("touchUpInside",e)}),e}return __extends(e,t),Object.defineProperty(e.prototype,"title",{get:function(){return this._title},set:function(t){this._title=t,this.resetText()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"image",{get:function(){return this._image},set:function(t){this._image=t,this.customView instanceof UIBarButton&&this.customView.setImage(t,UIEnums_1.UIControlState.normal)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tintColor",{get:function(){return this._tintColor},set:function(t){this._tintColor=t,this.customView instanceof UIBarButton&&(this.customView.tintColor=t)},enumerable:!0,configurable:!0}),e.prototype.resetText=function(){this.customView instanceof UIBarButton&&(this.customView.tintColor=this.tintColor,this.customView.setTitle(this.title,UIEnums_1.UIControlState.normal))},e}(EventEmitter_1.EventEmitter);exports.UIBarButtonItem=UIBarButtonItem;var UINavigationBar=function(t){function e(){var e=t.call(this)||this;return e.navigationController=void 0,e.barHeight=48,e.translucent=!1,e._barTintColor=void 0,e.titleTextAttributes={},e.backIndicatorImage=new UIImage_1.UIImage({name:"icon_back@3x",base64:"iVBORw0KGgoAAAANSUhEUgAAADkAAAA8CAMAAADrC+IEAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAABOUExURUdwTP///////////////////////////////////////////////////////////////////////////////////////////////////4il91oAAAAZdFJOUwD+ZRPxOKUhoAPR0BY3pxSZmAIOMyhEh7SA0BQ9AAAAfElEQVRIx+3VSQqAMBAF0XaIGudZ+/4XVaMLCQjxo4LQtX/rIrpO14qgdMShAiFD1ECEHnClPQg5CwQ+D1OBAv8Cq68hz4ljnQXdy1FoZMOoLEJUYtRIiO7yRKfYsZYs6vl3z6WEChUq1JGOKC01YRSAO4XgRkFINKDwrRZIeEfaMx4tYAAAAABJRU5ErkJggg==",renderingMode:UIImage_1.UIImageRenderingMode.alwaysTemplate}),e.backIndicatorTransitionMaskImage=void 0,e.items=[],e.barTintColor=UIColor_1.UIColor.white,e.tintColor=UIColor_1.UIColor.black,e.domElement.style.borderBottom="solid",e.domElement.style.borderBottomWidth=(1/devicePixelRatio).toString()+"px",e.domElement.style.borderBottomColor=new UIColor_1.UIColor(152/255,150/255,155/255,.75).toStyle(),e}return __extends(e,t),Object.defineProperty(e.prototype,"hidden",{get:function(){return this._hidden},set:function(t){this._hidden=t,this.domElement.style.visibility=t?"hidden":"inherit",this.navigationController&&this.navigationController.iView.setNeedsDisplay()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"barTintColor",{get:function(){return this._barTintColor},set:function(t){this._barTintColor=t,this.backgroundColor=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"topItem",{get:function(){return this.items[this.items.length-1]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"backItem",{get:function(){return this.items[this.items.length-2]},enumerable:!0,configurable:!0}),e.prototype.setItems=function(t,e){this.items.forEach(function(t){return t.allViews().forEach(function(t){return t.removeFromSuperview()})}),this.items=t,this.displayItems()},e.prototype.pushNavigationItem=function(t,e){var i,o,n=this;this.items.push(t),t.navigationBar=this,this.displayItems(),e&&(i=n.items[n.items.length-2],o=n.items[n.items.length-1],void 0!==i&&void 0!==o&&(i.allViews().forEach(function(t){return t.alpha=1}),o.allViews().forEach(function(t){t.transform={a:1,b:0,c:0,d:1,tx:t.bounds.width,ty:0},t.alpha=1}),UIAnimator_1.UIAnimator.bouncy(0,16,function(){i.allViews().forEach(function(t){return t.alpha=0}),o.allViews().forEach(function(t){t.transform={a:1,b:0,c:0,d:1,tx:0,ty:0},t.alpha=1})},void 0)))},e.prototype.popNavigationItem=function(t){var e=this;if(!(this.items.length<=1)){var i=this.items[this.items.length-1],o=this.items[this.items.length-2];this.items.pop(),t?(i.allViews().forEach(function(t){t.alpha=1}),o.allViews().forEach(function(t){t.alpha=0}),UIAnimator_1.UIAnimator.bouncy(0,16,function(){i.allViews().forEach(function(t){t.alpha=0}),o.allViews().forEach(function(t){t.alpha=1})},function(){i.allViews().forEach(function(t){return t.removeFromSuperview()}),e.displayItems()})):(i.allViews().forEach(function(t){return t.removeFromSuperview()}),this.displayItems())}},e.prototype.popToNavigationItem=function(t,e){var i=this;if(!(this.items.indexOf(t)<0)){var o=this.items.indexOf(t),n=this.items.filter(function(t,e){return e>o});if(0!=n.length){this.items=this.items.filter(function(t,e){return e<=o});var r=t;if(e){var a=n[n.length-1];a.allViews().forEach(function(t){t.alpha=1}),r.allViews().forEach(function(t){t.alpha=0}),UIAnimator_1.UIAnimator.bouncy(0,16,function(){a.allViews().forEach(function(t){t.alpha=0}),r.allViews().forEach(function(t){t.alpha=1})},function(){n.forEach(function(t){t.allViews().forEach(function(t){t.removeFromSuperview()})}),i.displayItems()})}else n.forEach(function(t){t.allViews().forEach(function(t){t.removeFromSuperview()})}),this.displayItems()}}},e.prototype.displayItems=function(){var t=this;this.items.forEach(function(e,i){e.titleView.superview!=t&&t.addSubview(e.titleView),e.backButton.superview!=t&&t.addSubview(e.backButton),e.leftViews().forEach(function(e){e.superview!=t&&t.addSubview(e)}),e.rightViews().forEach(function(e){e.superview!=t&&t.addSubview(e)}),e.backButton.hidden=e.hidesBackButton||0==i||e.leftBarButtonItems.length>0,e.backButton.setImage(t.backIndicatorImage?t.backIndicatorImage.clone():void 0,UIEnums_1.UIControlState.normal)}),this.layoutItems()},e.prototype.layoutItems=function(){var t=this,e=this.items.length-1;this.items.forEach(function(i,o){var n=16;i.backButton.hidden||(i.backButton.frame={x:0,y:t.bounds.height-t.barHeight,width:44,height:t.barHeight},n+=32),i.leftBarButtonItems.forEach(function(e){e.customView&&(e.customView.frame={x:n,y:t.bounds.height-t.barHeight,width:e.width,height:t.barHeight},n+=e.width+8)});var r=i.titleView.intrinsicContentSize()||UISize_1.UISizeZero;i.titleView.frame={x:n,y:t.bounds.height-t.barHeight+(t.barHeight-r.height)/2,width:r.width,height:r.height};var a=t.bounds.width-16;i.rightBarButtonItems.forEach(function(e){if(e.customView){var i=e.customView;a-=e.width,i.frame={x:a,y:t.bounds.height-t.barHeight,width:e.width,height:t.barHeight},a-=8}}),i.allViews().forEach(function(t){t.alpha=o<e?0:1})})},e.prototype.layoutSubviews=function(){t.prototype.layoutSubviews.call(this),this.layoutItems()},e}(UIView_1.UIView);exports.UINavigationBar=UINavigationBar;
    },{"../kimi/EventEmitter":17,"./UIAnimator":25,"./UIButton":28,"./UIColor":31,"./UIEnums":35,"./UIFont":37,"./UIImage":39,"./UILabel":42,"./UISize":60,"./UIView":72}],45:[function(require,module,exports){
    "use strict";var __extends=this&&this.__extends||function(){var t=function(i,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var e in i)i.hasOwnProperty(e)&&(t[e]=i[e])})(i,e)};return function(i,e){function n(){this.constructor=i}t(i,e),i.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(exports,"__esModule",{value:!0});var UIViewController_1=require("./UIViewController"),UIView_1=require("./UIView"),UINavigationBarViewController=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.navigationBarContentHeight=44,i._navigationBarInFront=!0,i.navigationBar=new UIView_1.UIView,i._contentView=new UIView_1.UIView,i._view=void 0,i.navigationControllerState=void 0,i}return __extends(i,t),Object.defineProperty(i.prototype,"navigationBarInFront",{get:function(){return this._navigationBarInFront},set:function(t){this._navigationBarInFront=t,this.iView,this._view&&(t?this._view.bringSubviewToFront(this.navigationBar):this._view.bringSubviewToFront(this._contentView))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"view",{get:function(){return this.loadViewIfNeed(),this._contentView},set:function(t){void 0===this._view&&(this._view=t)},enumerable:!0,configurable:!0}),i.prototype.loadView=function(){t.prototype.loadView.call(this),this.iView.addSubview(this._contentView),this.iView.addSubview(this.navigationBar)},i.prototype.viewWillAppear=function(i){void 0!==this.navigationController&&void 0===this.navigationControllerState&&(this.navigationControllerState={barHidden:this.navigationController.navigationBar.hidden},this.navigationController.setNavigationBarHidden(!0,i,!1)),t.prototype.viewWillAppear.call(this,i)},i.prototype.viewWillDisappear=function(i){void 0!==this.navigationControllerState&&this.navigationController&&this.navigationController.setNavigationBarHidden(this.navigationControllerState.barHidden,i,!0),t.prototype.viewWillDisappear.call(this,i)},Object.defineProperty(i.prototype,"barFrame",{get:function(){return this.navigationBar.hidden?{x:0,y:0,width:this.iView.bounds.width,height:0}:{x:0,y:0,width:this.iView.bounds.width,height:this.navigationBarContentHeight}},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"contentFrame",{get:function(){return{x:0,y:this.barFrame.height,width:this.iView.bounds.width,height:this.iView.bounds.height-this.barFrame.height}},enumerable:!0,configurable:!0}),i.prototype.viewWillLayoutSubviews=function(){this.navigationBar.frame=this.barFrame,this._contentView.frame=this.contentFrame,t.prototype.viewWillLayoutSubviews.call(this)},i}(UIViewController_1.UIViewController);exports.UINavigationBarViewController=UINavigationBarViewController;
    },{"./UIView":72,"./UIViewController":73}],46:[function(require,module,exports){
    "use strict";var __extends=this&&this.__extends||function(){var i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,t){i.__proto__=t}||function(i,t){for(var e in t)t.hasOwnProperty(e)&&(i[e]=t[e])})(t,e)};return function(t,e){function r(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}();Object.defineProperty(exports,"__esModule",{value:!0});var UIViewController_1=require("./UIViewController"),UINavigationBar_1=require("./UINavigationBar"),UIColor_1=require("./UIColor"),UIAnimator_1=require("./UIAnimator"),UINavigationBarViewController_1=require("./UINavigationBarViewController"),Router_1=require("./helpers/Router"),UINavigationController=function(i){function t(t){var e=i.call(this)||this;return e.rootViewController=t,e._isUINavigationController=!0,e.navigationBar=new UINavigationBar_1.UINavigationBar,e.beingAnimating=!1,e}return __extends(t,i),t.prototype.viewDidLoad=function(){this.navigationBar.navigationController=this,this.iView.backgroundColor=UIColor_1.UIColor.clear,this.iView.addSubview(this.navigationBar),this.rootViewController&&this.pushViewController(this.rootViewController,!1),i.prototype.viewDidLoad.call(this)},t.prototype.pushViewController=function(i,t){var e=this;if(void 0===t&&(t=!0),!this.beingAnimating){this.childViewControllers.length>0&&(i.hidesBottomBarWhenPushed=!0),i.hidesBottomBarWhenPushed&&this.tabBarController&&this.tabBarController.iView.bringSubviewToFront(this.iView),this.addChildViewController(i),this.iView.addSubview(i.iView),i.iView.frame=this.contentFrame(i);var r=this.childViewControllers[this.childViewControllers.length-2],o=this.childViewControllers[this.childViewControllers.length-1];0!=t&&null!=r&&null!=o?(r.viewWillDisappear(!0),o.viewWillAppear(!0),this.beingAnimating=!0,this.doPushAnimation(r,o,function(){r.viewDidDisappear(!0),o.viewDidAppear(!0),e.childViewControllers.forEach(function(i){i!=o&&(i.iView.hidden=!0)}),e.beingAnimating=!1,e.childViewControllers.length>1&&Router_1.Router.shared.addRoute(o,function(){e.popToViewController(r,!1)}),e.updateBrowserTitle()}),this.navigationBar.pushNavigationItem(o.navigationItem,!0)):(r&&r.viewWillDisappear(!1),o&&o.viewWillAppear(!1),r&&r.viewDidDisappear(!1),o&&o.viewDidAppear(!1),o&&this.navigationBar.pushNavigationItem(o.navigationItem,!1),this.childViewControllers.forEach(function(i){i!=o&&(i.iView.hidden=!0)}),this.childViewControllers.length>1&&Router_1.Router.shared.addRoute(o,function(){e.popToViewController(r,!1)}),this.updateBrowserTitle())}},t.prototype.popViewController=function(i){var t=this;if(void 0===i&&(i=!0),!this.beingAnimating){var e=this.childViewControllers[this.childViewControllers.length-1],r=this.childViewControllers[this.childViewControllers.length-2];if(void 0!==e&&void 0!==r)return r.iView.hidden=!1,e.viewWillDisappear(i),r.viewWillAppear(i),0!=i?(this.beingAnimating=!0,this.doPopAnimation(e,r,function(){e.removeFromParentViewController(),e.iView.removeFromSuperview(),e.viewDidDisappear(!0),r.viewDidAppear(!0),r.hidesBottomBarWhenPushed||t.tabBarController&&t.tabBarController.iView.bringSubviewToFront(t.tabBarController.tabBar),t.beingAnimating=!1,Router_1.Router.shared.popToRoute(r),t.updateBrowserTitle()})):(e.removeFromParentViewController(),e.iView.removeFromSuperview(),r.iView.frame=this.contentFrame(r),e.viewDidDisappear(!0),r.viewDidAppear(!0),r.hidesBottomBarWhenPushed||this.tabBarController&&this.tabBarController.iView.bringSubviewToFront(this.tabBarController.tabBar),Router_1.Router.shared.popToRoute(r),this.updateBrowserTitle()),this.navigationBar.popNavigationItem(0!=i),e}},t.prototype.popToViewController=function(i,t){var e=this;if(void 0===t&&(t=!0),this.beingAnimating)return[];if(this.childViewControllers.indexOf(i)<0)return[];var r=this.childViewControllers.indexOf(i),o=this.childViewControllers.filter(function(i,t){return t>r});if(0==o.length)return[];var n=i;return n.iView.hidden=!1,o.forEach(function(i){i.viewWillDisappear(t)}),n.viewWillAppear(t),0!=t?(this.beingAnimating=!0,this.doPopAnimation(o[o.length-1],n,function(){o.forEach(function(i){i.removeFromParentViewController()}),o.forEach(function(i){i.iView.removeFromSuperview()}),o.forEach(function(i){i.viewDidDisappear(!0)}),n.viewDidAppear(!0),n.hidesBottomBarWhenPushed||e.tabBarController&&e.tabBarController.iView.bringSubviewToFront(e.tabBarController.tabBar),e.beingAnimating=!1,Router_1.Router.shared.popToRoute(n),e.updateBrowserTitle()})):(o.forEach(function(i){i.removeFromParentViewController()}),o.forEach(function(i){i.iView.removeFromSuperview()}),n.iView.frame=this.contentFrame(n),o.forEach(function(i){i.viewDidDisappear(!1)}),n.viewDidAppear(!1),n.hidesBottomBarWhenPushed||this.tabBarController&&this.tabBarController.iView.bringSubviewToFront(this.tabBarController.tabBar),Router_1.Router.shared.popToRoute(n),this.updateBrowserTitle()),this.navigationBar.popToNavigationItem(n.navigationItem,0!=t),o},t.prototype.popToRootViewController=function(i){void 0===i&&(i=!0);var t=this.childViewControllers[0];return void 0===t?[]:this.popToViewController(t,i)},t.prototype.setViewControllers=function(i,t){var e=this;void 0===t&&(t=!1),this.beingAnimating||(this.childViewControllers.forEach(function(i){i.removeFromParentViewController(),i.iView.removeFromSuperview()}),i.forEach(function(i){e.addChildViewController(i),e.iView.addSubview(i.iView),i.iView.frame=e.contentFrame(i)}),this.navigationBar.setItems(i.map(function(i){return i.navigationItem}),0!=t),i[i.length-1]&&1==i[i.length-1].hidesBottomBarWhenPushed?this.tabBarController&&this.tabBarController.iView.bringSubviewToFront(this.iView):this.tabBarController&&this.tabBarController.iView.bringSubviewToFront(this.tabBarController.tabBar),this.updateBrowserTitle())},t.prototype.viewWillLayoutSubviews=function(){var t=this;this.navigationBar.frame=this.barFrame,this.childViewControllers.forEach(function(i){i.iView.frame=t.contentFrame(i)}),i.prototype.viewWillLayoutSubviews.call(this)},Object.defineProperty(t.prototype,"barFrame",{get:function(){return this.navigationBar.hidden?{x:0,y:0,width:this.iView.bounds.width,height:0}:{x:0,y:0,width:this.iView.bounds.width,height:this.navigationBar.barHeight}},enumerable:!0,configurable:!0}),t.prototype.contentFrame=function(i){return i.hidesBottomBarWhenPushed?{x:0,y:this.barFrame.height,width:this.iView.bounds.width,height:this.iView.bounds.height-this.barFrame.height}:void 0!==this.tabBarController?{x:0,y:this.barFrame.height,width:this.iView.bounds.width,height:this.iView.bounds.height-this.barFrame.height-this.tabBarController.tabBar.barHeight}:{x:0,y:this.barFrame.height,width:this.iView.bounds.width,height:this.iView.bounds.height-this.barFrame.height-0}},t.prototype.doPushAnimation=function(i,t,e){var r=this;i.iView.frame=this.contentFrame(i);var o=this.contentFrame(t);t.iView.frame={x:o.width,y:o.y,width:o.width,height:o.height},UIAnimator_1.UIAnimator.bouncy(0,16,function(){var e=r.contentFrame(i);i.iView.frame={x:.25*-e.width,y:e.y,width:e.width,height:e.height},t.iView.frame=r.contentFrame(t)},function(){e()})},t.prototype.doPopAnimation=function(i,t,e){var r=this;i instanceof UINavigationBarViewController_1.UINavigationBarViewController?i.iView.frame=this.iView.bounds:i.iView.frame=this.contentFrame(i);var o=this.contentFrame(t);t.iView.frame={x:.25*-o.width,y:o.y,width:o.width,height:o.height},UIAnimator_1.UIAnimator.bouncy(0,16,function(){if(i instanceof UINavigationBarViewController_1.UINavigationBarViewController)i.iView.frame={x:r.contentFrame(i).width,y:r.iView.frame.y,width:r.iView.frame.width,height:r.iView.frame.height};else{var e=r.contentFrame(i);i.iView.frame={x:e.width,y:e.y,width:e.width,height:e.height}}t.iView.frame=r.contentFrame(t)},function(){e()})},t.prototype.updateBrowserTitle=function(){if(void 0===this.presentedViewController){var i=this.childViewControllers[this.childViewControllers.length-1];i&&i.title&&(document.title=i.title)}},t.prototype.didAddSubview=function(t){this.iView.bringSubviewToFront(this.navigationBar),i.prototype.didAddSubview.call(this,t)},t.prototype.setNavigationBarHidden=function(i,t,e){var r=this;void 0===e&&(e=!1),t?(e&&(this.navigationBar.hidden=i,this.navigationBar.alpha=i?1:0),UIAnimator_1.UIAnimator.curve(.25,function(){e?r.navigationBar.alpha=i?0:1:r.navigationBar.hidden=i},void 0)):this.navigationBar.hidden=i;var o=this.childViewControllers[this.childViewControllers.length-1];o instanceof UINavigationBarViewController_1.UINavigationBarViewController&&o.navigationControllerState&&(o.navigationControllerState.barHidden=i)},t}(UIViewController_1.UIViewController);exports.UINavigationController=UINavigationController;
    },{"./UIAnimator":25,"./UIColor":31,"./UINavigationBar":44,"./UINavigationBarViewController":45,"./UIViewController":73,"./helpers/Router":80}],47:[function(require,module,exports){
    "use strict";var __extends=this&&this.__extends||function(){var t=function(i,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var e in i)i.hasOwnProperty(e)&&(t[e]=i[e])})(i,e)};return function(i,e){function o(){this.constructor=i}t(i,e),i.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}}();Object.defineProperty(exports,"__esModule",{value:!0});var UIViewController_1=require("./UIViewController"),UIScrollView_1=require("./UIScrollView"),UIPoint_1=require("./UIPoint"),UIPageViewController=function(t){function i(i){void 0===i&&(i=!1);var e=t.call(this)||this;return e.isVertical=i,e.loops=!1,e._pageItems=void 0,e._currentPage=void 0,e.scrollView=(new UIScrollView_1.UIScrollView).on("didScroll",function(){e.scrollView.subviews.forEach(function(t){return t.hidden=!1})}).on("didEndDecelerating",function(){e.changeContents()}).on("didEndScrollingAnimation",function(){e.changeContents()}),e}return __extends(i,t),Object.defineProperty(i.prototype,"pageItems",{get:function(){return this._pageItems},set:function(t){this._pageItems=t,t&&t.length>0&&(this.currentPage=t[0],this.resetContents())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"currentPage",{get:function(){return this._currentPage},set:function(t){this._currentPage=t,t&&t.parentViewController!=this&&this.addChildViewController(t),this.resetContents()},enumerable:!0,configurable:!0}),i.prototype.scrollToNextPage=function(t){void 0===t&&(t=!0),1==this.isVertical?this.scrollView.contentInset.bottom>0&&(this.scrollView.setContentOffset({x:0,y:this.scrollView.contentInset.bottom},t),0==t&&this.changeContents()):this.scrollView.contentInset.right>0&&(this.scrollView.setContentOffset({x:this.scrollView.contentInset.right,y:0},t),0==t&&this.changeContents())},i.prototype.scrollToPreviousPage=function(t){void 0===t&&(t=!0),1==this.isVertical?this.scrollView.contentInset.top>0&&(this.scrollView.setContentOffset({x:0,y:-this.scrollView.contentInset.top},t),0==t&&this.changeContents()):this.scrollView.contentInset.left>0&&(this.scrollView.setContentOffset({x:-this.scrollView.contentInset.left,y:0},t),0==t&&this.changeContents())},i.prototype.beforeViewController=function(t){if(void 0!==this.pageItems){var i=this.pageItems.indexOf(t);if(!(i>=0))return;if(i>0)return this.pageItems[i-1];if(this.loops&&this.pageItems.length>1)return this.pageItems[this.pageItems.length-1]}return this.val("beforeViewController",t)},i.prototype.afterViewController=function(t){if(void 0!==this.pageItems){var i=this.pageItems.indexOf(t);if(!(i>=0))return;if(i+1<this.pageItems.length)return this.pageItems[i+1];if(this.loops&&this.pageItems.length>1)return this.pageItems[0]}return this.val("afterViewController",t)},i.prototype.didFinishAnimating=function(t,i){this.emit("didFinishAnimating",t,i)},i.prototype.viewDidLoad=function(){this.scrollView.pagingEnabled=!0,this.scrollView.bounces=!1,this.scrollView.showsHorizontalScrollIndicator=!1,this.scrollView.showsVerticalScrollIndicator=!1,this.iView.addSubview(this.scrollView),t.prototype.viewDidLoad.call(this)},i.prototype.viewWillLayoutSubviews=function(){this.scrollView.frame=this.iView.bounds,this.scrollView.contentSize={width:this.iView.bounds.width,height:this.iView.bounds.height},this.resetContents(),t.prototype.viewWillLayoutSubviews.call(this)},i.prototype.changeContents=function(){if(1==this.isVertical){if(Math.abs(this.scrollView.contentOffset.y- -this.scrollView.bounds.height)<4){if(void 0===(i=this.currentPage))return;if(void 0===(t=this.beforeViewController(i)))return;this.currentPage=t,this.resetContents(),this.didFinishAnimating(t,i)}else if(Math.abs(this.scrollView.contentOffset.y-this.scrollView.bounds.height)<4){if(void 0===(i=this.currentPage))return;if(void 0===(e=this.afterViewController(i)))return;this.currentPage=e,this.resetContents(),this.didFinishAnimating(e,i)}}else if(Math.abs(this.scrollView.contentOffset.x- -this.scrollView.bounds.width)<4){var t;if(void 0===(i=this.currentPage))return;if(void 0===(t=this.beforeViewController(i)))return;this.currentPage=t,this.resetContents(),this.didFinishAnimating(t,i)}else if(Math.abs(this.scrollView.contentOffset.x-this.scrollView.bounds.width)<4){var i,e;if(void 0===(i=this.currentPage))return;if(void 0===(e=this.afterViewController(i)))return;this.currentPage=e,this.resetContents(),this.didFinishAnimating(e,i)}},i.prototype.resetContents=function(){var t=this,i=this.currentPage;if(void 0!==i){var e=this.beforeViewController(i),o=this.afterViewController(i);this.scrollView.subviews.forEach(function(t){t==i.iView||void 0!==e&&t==e.iView||void 0!==o&&t==o.iView||t.removeFromSuperview()}),i.iView.frame=this.iView.bounds,this.scrollView.addSubview(i.iView),e&&(this.addChildViewController(e),this.scrollView.addSubview(e.iView),1==this.isVertical?e.iView.frame={x:0,y:-this.iView.bounds.height,width:this.iView.bounds.width,height:this.iView.bounds.height}:e.iView.frame={x:-this.iView.bounds.width,y:0,width:this.iView.bounds.width,height:this.iView.bounds.height}),o&&(this.addChildViewController(o),this.scrollView.addSubview(o.iView),1==this.isVertical?o.iView.frame={x:0,y:this.iView.bounds.height,width:this.iView.bounds.width,height:this.iView.bounds.height}:o.iView.frame={x:this.iView.bounds.width,y:0,width:this.iView.bounds.width,height:this.iView.bounds.height}),1==this.isVertical?this.scrollView.contentInset={top:void 0!==e?Math.ceil(this.iView.bounds.height):0,left:0,bottom:void 0!==o?Math.ceil(this.iView.bounds.height):0,right:0}:this.scrollView.contentInset={top:0,left:void 0!==e?Math.ceil(this.iView.bounds.width):0,bottom:0,right:void 0!==o?Math.ceil(this.iView.bounds.width):0},this.scrollView.contentOffset=UIPoint_1.UIPointZero,this.childViewControllers.forEach(function(i){i!==t.currentPage&&i!==e&&i!==o&&(i.iView.removeFromSuperview(),i.removeFromParentViewController()),i.iView.hidden=i!==t.currentPage})}},i}(UIViewController_1.UIViewController);exports.UIPageViewController=UIPageViewController;
    },{"./UIPoint":50,"./UIScrollView":59,"./UIViewController":73}],48:[function(require,module,exports){
    "use strict";var __extends=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(exports,"__esModule",{value:!0});var UIGestureRecognizer_1=require("./UIGestureRecognizer"),UIView_1=require("./UIView"),UITouch_1=require("./UITouch"),UIPanGestureRecognizer=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.lockedDirection=void 0,t.firstTouch=void 0,t.translationPoint=void 0,t.beganPoints={},t}return __extends(t,e),t.prototype.translationInView=function(e){if(!this.firstTouch)return{x:0,y:0};var t=this.firstTouch.windowPoint;if(!t)return{x:0,y:0};var i=this.translationPoint;return i?{x:t.x-i.x,y:t.y-i.y}:{x:0,y:0}},t.prototype.setTranslation=function(e,t){if(this.firstTouch){var i=this.firstTouch.windowPoint;i&&(this.translationPoint={x:i.x-e.x,y:i.y-e.y})}},t.prototype.velocityInView=function(e){return UIView_1.sharedVelocityTracker.computeCurrentVelocity(),UIView_1.sharedVelocityTracker.velocity},t.prototype.handleTouch=function(t){var i=this;e.prototype.handleTouch.call(this,t),t.forEach(function(e){if(0==e.identifier&&(i.firstTouch=e),e.phase==UITouch_1.UITouchPhase.began){if(null!=UIView_1.UIView.recognizedGesture&&UIView_1.UIView.recognizedGesture!=i)return void(i.beganPoints={});e.windowPoint&&(i.beganPoints[e.identifier]=e.windowPoint),0==e.identifier&&(i.translationPoint=e.windowPoint)}else if(e.phase==UITouch_1.UITouchPhase.moved)if(i.state==UIGestureRecognizer_1.UIGestureRecognizerState.possible){if(null!=UIView_1.UIView.recognizedGesture&&UIView_1.UIView.recognizedGesture!=i)return void(i.state=UIGestureRecognizer_1.UIGestureRecognizerState.failed);if(e.windowPoint&&i.beganPoints[e.identifier]){var t=i.beganPoints[e.identifier];void 0!==i.lockedDirection?1===i.lockedDirection?Math.abs(t.y-e.windowPoint.y)>=8&&(UIView_1.UIView.recognizedGesture=i,i.state=UIGestureRecognizer_1.UIGestureRecognizerState.began,i.handleEvent("began"),i.emit("began",i)):2===i.lockedDirection&&Math.abs(t.x-e.windowPoint.x)>=8&&(UIView_1.UIView.recognizedGesture=i,i.state=UIGestureRecognizer_1.UIGestureRecognizerState.began,i.handleEvent("began"),i.emit("began",i)):(Math.abs(t.x-e.windowPoint.x)>=8||Math.abs(t.y-e.windowPoint.y)>=8)&&(UIView_1.UIView.recognizedGesture=i,i.state=UIGestureRecognizer_1.UIGestureRecognizerState.began,i.handleEvent("began"),i.emit("began",i))}}else i.state!=UIGestureRecognizer_1.UIGestureRecognizerState.began&&i.state!=UIGestureRecognizer_1.UIGestureRecognizerState.changed||(i.state=UIGestureRecognizer_1.UIGestureRecognizerState.changed,i.handleEvent("changed"),i.emit("changed",i));else e.phase==UITouch_1.UITouchPhase.ended?(i.state!=UIGestureRecognizer_1.UIGestureRecognizerState.began&&i.state!=UIGestureRecognizer_1.UIGestureRecognizerState.changed||(i.state=UIGestureRecognizer_1.UIGestureRecognizerState.ended,i.handleEvent("ended"),i.emit("ended",i),setTimeout(function(){UIView_1.UIView.recognizedGesture=void 0},0)),0==e.identifier&&(i.state=UIGestureRecognizer_1.UIGestureRecognizerState.possible)):e.phase==UITouch_1.UITouchPhase.cancelled&&(i.state!=UIGestureRecognizer_1.UIGestureRecognizerState.began&&i.state!=UIGestureRecognizer_1.UIGestureRecognizerState.changed||(i.state=UIGestureRecognizer_1.UIGestureRecognizerState.cancelled,i.handleEvent("cancelled"),i.emit("cancelled",i),setTimeout(function(){UIView_1.UIView.recognizedGesture=void 0},0)),i.state=UIGestureRecognizer_1.UIGestureRecognizerState.possible)})},t}(UIGestureRecognizer_1.UIGestureRecognizer);exports.UIPanGestureRecognizer=UIPanGestureRecognizer;
    },{"./UIGestureRecognizer":38,"./UITouch":71,"./UIView":72}],49:[function(require,module,exports){
    "use strict";var __extends=this&&this.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(exports,"__esModule",{value:!0});var UIGestureRecognizer_1=require("./UIGestureRecognizer"),UIPinchGestureRecognizer=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.scale=1,t.velocity=0,t}return __extends(t,e),t.prototype.handleTouch=function(t){e.prototype.handleTouch.call(this,t)},t}(UIGestureRecognizer_1.UIGestureRecognizer);exports.UIPinchGestureRecognizer=UIPinchGestureRecognizer;
    },{"./UIGestureRecognizer":38}],50:[function(require,module,exports){
    "use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.UIPointZero={x:0,y:0},exports.UIPointMake=function(t,e){return{x:t,y:e}},exports.UIPointEqualToPoint=function(t,e){return Math.abs(t.x-e.x)<.001&&Math.abs(t.y-e.y)<.001};
    },{}],51:[function(require,module,exports){
    "use strict";var __extends=this&&this.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function o(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}();Object.defineProperty(exports,"__esModule",{value:!0});var UIView_1=require("./UIView"),UIAnimator_1=require("./UIAnimator"),UIProgressView=function(t){function e(){var e=t.call(this)||this;return e._progress=0,e._progressTintColor=void 0,e._trackTintColor=void 0,e.trackView=new UIView_1.UIView,e.progressView=new UIView_1.UIView,e.userInteractionEnabled=!1,e.progressTintColor=e.tintColor,e.trackTintColor=e.tintColor.colorWithAlphaComponent(.35),e.addSubview(e.trackView),e.addSubview(e.progressView),e}return __extends(e,t),Object.defineProperty(e.prototype,"progress",{get:function(){return this._progress},set:function(t){this._progress=t,this.layoutIfNeeded()},enumerable:!0,configurable:!0}),e.prototype.setProgress=function(t,e){var r=this;e?UIAnimator_1.UIAnimator.curve(.3,function(){r.progress=t,r.layoutIfNeeded()},void 0):(this.progress=t,this.layoutIfNeeded())},Object.defineProperty(e.prototype,"progressTintColor",{get:function(){return this._progressTintColor},set:function(t){this._progressTintColor=t,this.progressView.backgroundColor=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"trackTintColor",{get:function(){return this._trackTintColor},set:function(t){this._trackTintColor=t,this.trackView.backgroundColor=t},enumerable:!0,configurable:!0}),e.prototype.layoutSubviews=function(){t.prototype.layoutSubviews.call(this),this.trackView.frame=this.bounds,this.progressView.frame={x:0,y:0,width:this.bounds.width*this.progress,height:this.bounds.height}},e}(UIView_1.UIView);exports.UIProgressView=UIProgressView;
    },{"./UIAnimator":25,"./UIView":72}],52:[function(require,module,exports){
    "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var UIPrompt=function(){function t(t){this.message=t,this.confirmTitle="",this.cancelTitle="",this.placeholder="",this.defaultValue=void 0}return t.prototype.show=function(t,e){var o=window.prompt(this.message,this.defaultValue);"string"==typeof o?t&&t(o):e&&e()},t}();exports.UIPrompt=UIPrompt;
    },{}],53:[function(require,module,exports){
    "use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.UIRangeMake=function(e,t){return{location:e,length:t}};
    },{}],54:[function(require,module,exports){
    "use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.UIRectZero={x:0,y:0,width:0,height:0},exports.UIRectMake=function(t,e,h,i){return{x:t,y:e,width:h,height:i}},exports.UIRectEqualToRect=function(t,e){return Math.abs(t.x-e.x)<.001&&Math.abs(t.y-e.y)<.001&&Math.abs(t.width-e.width)<.001&&Math.abs(t.height-e.height)<.001},exports.UIRectInset=function(t,e,h){return{x:t.x+e,y:t.y+h,width:t.width-2*e,height:t.height-2*h}},exports.UIRectOffset=function(t,e,h){return{x:t.x+e,y:t.y+h,width:t.width,height:t.height}},exports.UIRectContainsPoint=function(t,e){return e.x>=t.x&&e.x<=t.x+t.width&&e.y>=t.y&&e.y<=t.x+t.height},exports.UIRectContainsRect=function(t,e){return exports.UIRectContainsPoint(t,{x:e.x,y:e.y})&&exports.UIRectContainsPoint(t,{x:e.x+e.width,y:e.y})&&exports.UIRectContainsPoint(t,{x:e.x,y:e.y+e.height})&&exports.UIRectContainsPoint(t,{x:e.x+e.width,y:e.y+e.height})},exports.UIRectIntersectsRect=function(t,e){return!(t.x+t.width-.1<=e.x||e.x+e.width-.1<=t.x||t.y+t.height-.1<=e.y||e.y+e.height-.1<=t.y)},exports.UIRectUnion=function(t,e){return{x:Math.min(t.x,e.x),y:Math.min(t.y,e.y),width:Math.max(t.x+t.width,e.x+e.width),height:Math.max(t.y+t.height,e.y+e.height)}},exports.UIRectIsEmpty=function(t){return 0==t.width||0==t.height};
    },{}],55:[function(require,module,exports){
    "use strict";var __extends=this&&this.__extends||function(){var t=function(i,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var o in i)i.hasOwnProperty(o)&&(t[o]=i[o])})(i,o)};return function(i,o){function e(){this.constructor=i}t(i,o),i.prototype=null===o?Object.create(o):(e.prototype=o.prototype,new e)}}();Object.defineProperty(exports,"__esModule",{value:!0});var UIView_1=require("./UIView"),UIColor_1=require("./UIColor"),UIRefreshAnimationView=function(t){function i(){var i=t.call(this)||this;return i.leftDot=new UIView_1.UIView,i.midDot=new UIView_1.UIView,i.rightDot=new UIView_1.UIView,i.currentIdx=0,i.leftDot.alpha=.5,i.leftDot.layer.cornerRadius=4,i.midDot.alpha=.5,i.midDot.layer.cornerRadius=4,i.rightDot.alpha=.5,i.rightDot.layer.cornerRadius=4,i.addSubview(i.leftDot),i.addSubview(i.midDot),i.addSubview(i.rightDot),i}return __extends(i,t),i.prototype.layoutSubviews=function(){t.prototype.layoutSubviews.call(this),this.leftDot.frame={x:this.bounds.width/2-4-28,y:this.bounds.height/2-4,width:8,height:8},this.midDot.frame={x:this.bounds.width/2-4,y:this.bounds.height/2-4,width:8,height:8},this.rightDot.frame={x:this.bounds.width/2+4+20,y:this.bounds.height/2-4,width:8,height:8}},i.prototype.startAnimation=function(){var t=this;this.stopAnimation(),this.currentIdx=0,this.doAnimation(),this.intervalHandler=setInterval(function(){t.currentIdx=t.currentIdx+1,3==t.currentIdx&&(t.currentIdx=0),t.doAnimation()},1250/3)},i.prototype.doAnimation=function(){this.leftDot.alpha=0==this.currentIdx?1:.5,this.midDot.alpha=1==this.currentIdx?1:.5,this.rightDot.alpha=2==this.currentIdx?1:.5},i.prototype.stopAnimation=function(){this.leftDot.alpha=.5,this.midDot.alpha=.5,this.rightDot.alpha=.5,clearInterval(this.intervalHandler)},i.prototype.tintColorDidChange=function(){t.prototype.tintColorDidChange.call(this),this.leftDot.backgroundColor=this.tintColor,this.midDot.backgroundColor=this.tintColor,this.rightDot.backgroundColor=this.tintColor},i}(UIView_1.UIView),UIRefreshControl=function(t){function i(){var i=t.call(this)||this;return i.animationView=new UIRefreshAnimationView,i.scrollView=void 0,i.enabled=!0,i.refreshing=!1,i.animationView.alpha=0,i.tintColor=UIColor_1.UIColor.gray,i}return __extends(i,t),i.prototype.tintColorDidChange=function(){t.prototype.tintColorDidChange.call(this),this.animationView.tintColor=this.tintColor},i.prototype.beginRefreshing_callFromScrollView=function(){this.refreshing=!0,this.animationView.startAnimation(),this.emit("refresh",this)},i.prototype.beginRefreshing=function(){var t=this;void 0!==this.scrollView&&(this.refreshing=!0,this.scrollView.setContentOffset({x:0,y:-this.scrollView.contentInset.top-44},!0),this.animationView.startAnimation(),setTimeout(function(){t.animationView.alpha=1,t.emit("refresh",t)},750))},i.prototype.endRefreshing=function(){this.scrollView&&this.scrollView.contentOffset.y<-this.scrollView.contentInset.top&&this.scrollView.setContentOffset({x:0,y:-this.scrollView.contentInset.top},!0),this.animationView.alpha=0,this.animationView.stopAnimation(),this.refreshing=!1},i}(UIView_1.UIView);exports.UIRefreshControl=UIRefreshControl;
    },{"./UIColor":31,"./UIView":72}],56:[function(require,module,exports){
    "use strict";var __extends=this&&this.__extends||function(){var e=function(r,t){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var t in r)r.hasOwnProperty(t)&&(e[t]=r[t])})(r,t)};return function(r,t){function o(){this.constructor=r}e(r,t),r.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}}(),__read=this&&this.__read||function(e,r){var t="function"==typeof Symbol&&e[Symbol.iterator];if(!t)return e;var o,n,a=t.call(e),s=[];try{for(;(void 0===r||r-- >0)&&!(o=a.next()).done;)s.push(o.value)}catch(e){n={error:e}}finally{try{o&&!o.done&&(t=a.return)&&t.call(a)}finally{if(n)throw n.error}}return s},__spread=this&&this.__spread||function(){for(var e=[],r=0;r<arguments.length;r++)e=e.concat(__read(arguments[r]));return e};Object.defineProperty(exports,"__esModule",{value:!0});var UIReloader=function(){function e(){this.items={},this.instances={}}return e.shared=new e,e}();exports.UIReloader=UIReloader,global.UIReloader=UIReloader,exports.UIReload=function(e,r){return function(t){if(void 0!==UIReloader.shared.items[e]){var o=UIReloader.shared.items[e];if(o){var n=o.clazz,a=arguments[0].prototype;for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])}UIReloader.shared.instances[e]&&UIReloader.shared.instances[e].forEach(function(e){return r(e)})}else{for(var i={clazz:arguments[0].prototype,superItem:void 0},d=i,u=arguments[0].prototype;null!=u&&void 0!==u.__proto__&&void 0!==d;)d.superItem={clazz:u.__proto__,superItem:void 0},u=u.__proto__,d=d.superItem;UIReloader.shared.items[e]=i}return function(r){function t(){for(var t=[],o=0;o<arguments.length;o++)t[o]=arguments[o];var n=r.apply(this,__spread(t))||this;return void 0===UIReloader.shared.instances[e]&&(UIReloader.shared.instances[e]=[]),UIReloader.shared.instances[e].push(n),n}return __extends(t,r),t}(t)}};
    },{}],57:[function(require,module,exports){
    "use strict";var __extends=this&&this.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function o(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}();Object.defineProperty(exports,"__esModule",{value:!0});var UIGestureRecognizer_1=require("./UIGestureRecognizer"),UIRotationGestureRecognizer=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.rotation=1,t.velocity=0,t}return __extends(t,e),t}(UIGestureRecognizer_1.UIGestureRecognizer);exports.UIRotationGestureRecognizer=UIRotationGestureRecognizer;
    },{"./UIGestureRecognizer":38}],58:[function(require,module,exports){
    "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var UIScreen=function(){function e(){this.bounds={x:0,y:0,width:window.screen.width,height:window.screen.height},this.scale=window.devicePixelRatio}return e.main=new e,e}();exports.UIScreen=UIScreen;
    },{}],59:[function(require,module,exports){
    "use strict";var __extends=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(exports,"__esModule",{value:!0});var UIView_1=require("./UIView"),UIPoint_1=require("./UIPoint"),UISize_1=require("./UISize"),UIEdgeInsets_1=require("./UIEdgeInsets"),UIPanGestureRecognizer_1=require("./UIPanGestureRecognizer"),UIAnimator_1=require("./UIAnimator"),Scroller_1=require("./helpers/Scroller"),UIColor_1=require("./UIColor"),UIRefreshControl_1=require("./UIRefreshControl"),UIFetchMoreControl_1=require("./UIFetchMoreControl"),IdelQueue_1=require("./helpers/IdelQueue"),ScrollerView=function(t){function e(){var e=t.call(this)||this;return e.isScrollerView=!0,e.placeholderElement=document.createElement("div"),e.isOverBoundsX=!1,e.isOverBoundsY=!1,e.domElement.style.overflow="scroll",e.domElement.style.paddingRight="44px",e.domElement.style.paddingBottom="44px",e.placeholderElement.style.position="absolute",e.placeholderElement.style.width="44px",e.placeholderElement.style.height="44px",e.domElement.appendChild(e.placeholderElement),e}return __extends(e,t),e.prototype.setContentOffset=function(t){t.x<0?(this.domElement.style.paddingLeft=-t.x+"px",this.domElement.scrollLeft=t.x,this.isOverBoundsX=!0):(this.isOverBoundsX&&(this.domElement.style.paddingLeft=null,this.isOverBoundsX=!1),this.domElement.scrollLeft=t.x),t.y<0?(this.domElement.style.paddingTop=-t.y+"px",this.domElement.scrollTop=t.y,this.isOverBoundsY=!0):(this.isOverBoundsY&&(this.domElement.style.paddingTop=null,this.isOverBoundsY=!1),this.domElement.scrollTop=t.y)},e.prototype.setContentSizeAndContentInset=function(t,e){this.placeholderElement.style.left=t.width+e.right-1+"px",this.placeholderElement.style.top=t.height+e.bottom-1+"px"},e}(UIView_1.UIView),UIScrollView=function(t){function e(){var e=t.call(this)||this;return e._contentOffset=UIPoint_1.UIPointZero,e._contentSize=UISize_1.UISizeZero,e._contentInset=UIEdgeInsets_1.UIEdgeInsetsZero,e.directionalLockEnabled=!1,e.bounces=!0,e.alwaysBounceVertical=!1,e.alwaysBounceHorizontal=!1,e.pagingEnabled=!1,e._scrollEnabled=!0,e._showsHorizontalScrollIndicator=!0,e._showsVerticalScrollIndicator=!0,e._tracking=!1,e._dragging=!1,e._decelerating=!1,e.scrollsToTop=!1,e.panGestureRecognizer=new UIPanGestureRecognizer_1.UIPanGestureRecognizer,e.contentView=new ScrollerView,e.scroller=new Scroller_1.Scroller,e.currentLockedDirection=void 0,e.horizontalScrollIndicator=new UIView_1.UIView,e.verticalScrollIndicator=new UIView_1.UIView,e.deceleratingWasCancelled=!1,e._refreshControl=void 0,e._fetchMoreControl=void 0,e.panGestureRecognizer.on("began",function(t){e.deceleratingWasCancelled=!1,e.currentLockedDirection=void 0,t.setTranslation({x:0,y:0},void 0),e.willBeginDragging()}).on("changed",function(t){var i=t.translationInView(void 0);if(e.directionalLockEnabled&&null==e.currentLockedDirection)Math.abs(i.x)>=4?e.currentLockedDirection=0:Math.abs(i.y)>=4&&(e.currentLockedDirection=1);else{e.directionalLockEnabled&&0==e.currentLockedDirection?i={x:i.x,y:0}:e.directionalLockEnabled&&1==e.currentLockedDirection&&(i={x:0,y:i.y}),e.createFetchMoreEffect(i);var n=e.createRefreshEffect(i);e.contentOffset={x:Math.max(-e.contentInset.left,Math.min(Math.max(0,e.contentSize.width+e.contentInset.right-e.bounds.width),e.contentOffset.x-i.x)),y:Math.max(-e.contentInset.top-(e.refreshControl&&e.refreshControl.enabled?240:0),Math.min(Math.max(0,e.contentSize.height+e.contentInset.bottom-e.bounds.height),e.contentOffset.y-(void 0!==n?n:i.y)))},t.setTranslation({x:0,y:0},void 0),e.didScroll()}}).on("ended",function(t){var i=t.velocityInView(void 0);e.directionalLockEnabled&&null==e.currentLockedDirection?i=UIPoint_1.UIPointZero:e.directionalLockEnabled&&0==e.currentLockedDirection?i={x:i.x,y:0}:e.directionalLockEnabled&&1==e.currentLockedDirection&&(i={x:0,y:i.y}),e.willEndDragging(i),void 0!==e.refreshControl&&e.refreshControl.animationView.alpha>=1?(e.didEndDragging(!1),e.willBeginDecelerating(),e.didEndDecelerating(),e.refreshControl.beginRefreshing_callFromScrollView(),e.setContentOffset({x:0,y:-e.contentInset.top-44},!0)):void 0!==e.refreshControl&&e.refreshControl.animationView.alpha>0?(e.didEndDragging(!1),e.willBeginDecelerating(),e.didEndDecelerating(),e.refreshControl.animationView.alpha=0,e.setContentOffset({x:0,y:-e.contentInset.top},!0)):e.shouldDecelerating(i)?(e.didEndDragging(!0),e.willBeginDecelerating(),e.startDecelerating(i)):(e.didEndDragging(!1),e.willBeginDecelerating(),e.didEndDecelerating())}),e.addGestureRecognizer(e.panGestureRecognizer),t.prototype.addSubview.call(e,e.contentView),e.setupScrollIndicators(),e.clipsToBounds=!0,e}return __extends(e,t),Object.defineProperty(e.prototype,"contentOffset",{get:function(){return this._contentOffset},set:function(t){this._contentOffset=t,this.contentView.setContentOffset(t),this.resetScrollIndicators(),this.contentOffsetDidChanged()},enumerable:!0,configurable:!0}),e.prototype.contentOffsetDidChanged=function(){},Object.defineProperty(e.prototype,"contentSize",{get:function(){return this._contentSize},set:function(t){this._contentSize=t,this.contentView.setContentSizeAndContentInset(this._contentSize,this._contentInset),this.resetLockedDirection()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"contentInset",{get:function(){return this._contentInset},set:function(t){var e=t.left-this._contentInset.left,i=t.top-this._contentInset.top;this._contentInset=t,this.contentView.setContentSizeAndContentInset(this._contentSize,this._contentInset),this.setContentOffset({x:this.contentOffset.x-e,y:this.contentOffset.y-i},!1),this.resetLockedDirection()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scrollEnabled",{get:function(){return this._scrollEnabled},set:function(t){this._scrollEnabled=t,this.panGestureRecognizer.enabled=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showsHorizontalScrollIndicator",{get:function(){return this._showsHorizontalScrollIndicator},set:function(t){this._showsHorizontalScrollIndicator=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showsVerticalScrollIndicator",{get:function(){return this._showsVerticalScrollIndicator},set:function(t){this._showsVerticalScrollIndicator=t},enumerable:!0,configurable:!0}),e.prototype.setContentOffset=function(t,e){this.scroller.abortAnimation(),this.decelerating&&this.didEndDecelerating(),e?(this.scroller.startScroll(this.contentOffset.x,this.contentOffset.y,t.x-this.contentOffset.x,t.y-this.contentOffset.y,500),this.loopScrollAnimation(!0)):(this.contentOffset=t,this.didScroll())},e.prototype.scrollRectToVisible=function(t,e){var i=this.contentOffset;t.x<this.contentOffset.x?i={x:t.x,y:i.y}:t.x+t.width>this.contentOffset.x+this.bounds.width&&(i={x:t.x+t.width-this.bounds.width,y:i.y}),t.y<this.contentOffset.y?i={x:i.x,y:t.y}:t.y+t.height>this.contentOffset.y+this.bounds.height&&(i={x:i.x,y:t.y+t.height-this.bounds.height}),i={x:Math.max(0,Math.min(this.contentSize.width-this.bounds.width,i.x)),y:Math.max(0,Math.min(this.contentSize.height-this.bounds.height,i.y))},this.setContentOffset(i,e)},Object.defineProperty(e.prototype,"tracking",{get:function(){return this._tracking},set:function(t){this._tracking=t,this.resetScrollIndicatorVisibleState()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dragging",{get:function(){return this._dragging},set:function(t){this._dragging=t,this.resetScrollIndicatorVisibleState()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"decelerating",{get:function(){return this._decelerating},set:function(t){this._decelerating=t,this.resetScrollIndicatorVisibleState()},enumerable:!0,configurable:!0}),e.prototype.resetLockedDirection=function(){var t=this.contentSize.width+this.contentInset.left+this.contentInset.right,e=this.contentSize.height+this.contentInset.top+this.contentInset.bottom;t<=this.bounds.width&&e<=this.bounds.height?this.panGestureRecognizer.lockedDirection=0:t<=this.bounds.width?this.panGestureRecognizer.lockedDirection=1:e<=this.bounds.height&&(this.panGestureRecognizer.lockedDirection=2)},e.prototype.touchesBegan=function(e){t.prototype.touchesBegan.call(this,e),this.deceleratingWasCancelled=!1,this.scroller.finished||(UIView_1.UIView.recognizedGesture=this.panGestureRecognizer,this.scroller.abortAnimation(),this.tracking=!0,this.decelerating&&(this.deceleratingWasCancelled=!0,this.didEndDecelerating()))},e.prototype.touchesEnded=function(e){t.prototype.touchesEnded.call(this,e),this.tracking=!1,this.deceleratingWasCancelled&&this.pagingEnabled&&this.startDecelerating({x:0,y:0}),this.deceleratingWasCancelled&&setTimeout(function(){UIView_1.UIView.recognizedGesture=void 0},0)},e.prototype.touchesCancelled=function(e){t.prototype.touchesCancelled.call(this,e),this.tracking=!1,this.deceleratingWasCancelled&&this.pagingEnabled&&this.startDecelerating({x:0,y:0}),this.deceleratingWasCancelled&&setTimeout(function(){UIView_1.UIView.recognizedGesture=void 0},0)},e.prototype.touchesWheel=function(e){!this.userInteractionEnabled||this.hidden||this.alpha<=0||!this.scrollEnabled?t.prototype.touchesWheel.call(this,e):(this.contentOffset={x:Math.max(-this.contentInset.left,Math.min(Math.max(0,this.contentSize.width+this.contentInset.right-this.bounds.width),this.contentOffset.x-e.x)),y:Math.max(-this.contentInset.top,Math.min(Math.max(0,this.contentSize.height+this.contentInset.bottom-this.bounds.height),this.contentOffset.y-e.y))},this.didScroll())},e.prototype.didScroll=function(){this.emit("didScroll",this)},e.prototype.willBeginDragging=function(){this.emit("willBeginDragging",this),this.tracking=!0,this.dragging=!0,IdelQueue_1.IdelQueue.shared.markBusy()},e.prototype.willEndDragging=function(t){this.emit("willEndDragging",this,t)},e.prototype.didEndDragging=function(t){this.tracking=!1,this.dragging=!1,this.emit("didEndDragging",this,t)},e.prototype.willBeginDecelerating=function(){this.emit("willBeginDecelerating",this),this.decelerating=!0},e.prototype.didEndDecelerating=function(){this.decelerating=!1,this.emit("didEndDecelerating",this),IdelQueue_1.IdelQueue.shared.markIdel()},e.prototype.didEndScrollingAnimation=function(){this.emit("didEndScrollingAnimation",this)},e.prototype.didScrollToTop=function(){this.emit("didScrollToTop",this)},e.prototype.shouldDecelerating=function(t){return!!this.pagingEnabled||(t.y>0&&this.contentOffset.y<this.contentSize.height+this.contentInset.bottom-this.bounds.height||(t.y<0&&this.contentOffset.y>-this.contentInset.top||(t.x>0&&this.contentOffset.x<this.contentSize.width+this.contentInset.right-this.bounds.width||t.x<0&&this.contentOffset.x>-this.contentInset.left)))},e.prototype.startDecelerating=function(t){if(this.scroller.fling(this.contentOffset.x,this.contentOffset.y,-t.x,-t.y,-this.contentInset.left-1e3,this.contentSize.width+this.contentInset.right-this.bounds.width+1e3,-this.contentInset.top-1e3,this.contentSize.height+this.contentInset.bottom-this.bounds.height+1e3),this.pagingEnabled){this.scroller.abortAnimation();var e=Math.floor(this.contentOffset.y/this.bounds.height)*this.bounds.height,i=Math.ceil(this.contentOffset.y/this.bounds.height)*this.bounds.height,n=Math.floor(this.contentOffset.x/this.bounds.width)*this.bounds.width,o=Math.ceil(this.contentOffset.x/this.bounds.width)*this.bounds.width;this.scroller.startScroll(this.contentOffset.x,this.contentOffset.y,Math.ceil(Math.max(n,Math.min(o,Math.round(this.scroller.finalX/this.bounds.width)*this.bounds.width))-this.contentOffset.x),Math.ceil(Math.max(e,Math.min(i,Math.round(this.scroller.finalY/this.bounds.height)*this.bounds.height))-this.contentOffset.y),500)}this.loopScrollAnimation()},e.prototype.loopScrollAnimation=function(t){var e=this;if(void 0===t&&(t=!1),!this.scroller.computeScrollOffset())this.decelerating?this.didEndDecelerating():this.didEndScrollingAnimation();else{var i=-this.contentInset.top;if(this.refreshControl&&!0===this.refreshControl.refreshing&&(i-=44),!0===t&&0!==this.contentSize.height&&(i=-1/0),this.contentOffset={x:Math.max(-this.contentInset.left,Math.min(Math.max(-this.contentInset.left,this.contentSize.width+this.contentInset.right-this.bounds.width),this.scroller.currX)),y:Math.max(i,Math.min(Math.max(i,this.contentSize.height+this.contentInset.bottom-this.bounds.height),this.scroller.currY))},this.didScroll(),this.contentSize.height>this.bounds.height&&Math.abs(this.scroller.currY-this.contentOffset.y)>.01)return this.scroller.forceFinished(!0),void this.didEndDecelerating();if(this.contentSize.width>this.bounds.width&&Math.abs(this.scroller.currX-this.contentOffset.x)>.01)return this.scroller.forceFinished(!0),void this.didEndDecelerating();requestAnimationFrame(function(){e.loopScrollAnimation(t)})}},e.prototype.setupScrollIndicators=function(){this.horizontalScrollIndicator.backgroundColor=new UIColor_1.UIColor(143/255,143/255,144/255,1),this.horizontalScrollIndicator.alpha=0,this.horizontalScrollIndicator.layer.cornerRadius=1,t.prototype.addSubview.call(this,this.horizontalScrollIndicator),this.verticalScrollIndicator.backgroundColor=new UIColor_1.UIColor(143/255,143/255,144/255,1),this.verticalScrollIndicator.alpha=0,this.verticalScrollIndicator.layer.cornerRadius=1,t.prototype.addSubview.call(this,this.verticalScrollIndicator)},e.prototype.resetScrollIndicatorVisibleState=function(){var t=this;this.tracking||this.dragging||this.decelerating?(this.showsHorizontalScrollIndicator&&(this.horizontalScrollIndicator.alpha=1),this.showsVerticalScrollIndicator&&(this.verticalScrollIndicator.alpha=1)):(this.horizontalScrollIndicator.alpha>0&&UIAnimator_1.UIAnimator.linear(.3,function(){t.horizontalScrollIndicator.alpha=0},void 0),this.verticalScrollIndicator.alpha>0&&UIAnimator_1.UIAnimator.linear(.3,function(){t.verticalScrollIndicator.alpha=0},void 0))},e.prototype.resetScrollIndicators=function(){var t=this.contentInset.left+this.contentInset.right+this.contentSize.width;if(t>this.bounds.width){var e=(this.contentOffset.x+this.contentInset.left)/(t-this.bounds.width),i=Math.max(36,(this.bounds.width-8)/(t/(this.bounds.width-8)));this.horizontalScrollIndicator.frame={x:4+e*(this.bounds.width-8-i),y:this.bounds.height-4,width:i,height:2}}else this.horizontalScrollIndicator.frame={x:0,y:this.bounds.height-4,width:0,height:2};var n=this.contentInset.top+this.contentInset.bottom+this.contentSize.height;if(n>this.bounds.height){var o=(this.contentOffset.y+this.contentInset.top)/(n-this.bounds.height),r=Math.max(36,(this.bounds.height-8)/(n/(this.bounds.height-8)));this.verticalScrollIndicator.frame={x:this.bounds.width-4,y:4+o*(this.bounds.height-8-r),width:2,height:r}}else this.verticalScrollIndicator.frame={x:this.bounds.width-4,y:0,width:2,height:0}},Object.defineProperty(e.prototype,"subviews",{get:function(){return this.contentView.subviews},enumerable:!0,configurable:!0}),e.prototype.insertSubviewAtIndex=function(t,e){this.contentView.insertSubviewAtIndex(t,e)},e.prototype.exchangeSubview=function(t,e){this.contentView.exchangeSubview(t,e)},e.prototype.addSubview=function(t){t instanceof UIRefreshControl_1.UIRefreshControl?this.refreshControl=t:t instanceof UIFetchMoreControl_1.UIFetchMoreControl?this.fetchMoreControl=t:this.contentView.addSubview(t)},e.prototype.insertSubviewBelowSubview=function(t,e){this.contentView.insertSubviewBelowSubview(t,e)},e.prototype.insertSubviewAboveSubview=function(t,e){this.contentView.insertSubviewAboveSubview(t,e)},e.prototype.bringSubviewToFront=function(t){this.contentView.bringSubviewToFront(t)},e.prototype.sendSubviewToBack=function(t){this.contentView.sendSubviewToBack(t)},e.prototype.layoutSubviews=function(){t.prototype.layoutSubviews.call(this),this.contentView.frame=this.bounds,this.resetLockedDirection(),this.refreshControl&&(this.refreshControl.animationView.frame={x:0,y:0,width:this.bounds.width,height:44})},e.prototype.visibilityChanged=function(){t.prototype.visibilityChanged.call(this),this.contentView.setContentOffset(this.contentOffset)},e.prototype.didMoveToWindow=function(){t.prototype.didMoveToWindow.call(this),this.contentView.setContentOffset(this.contentOffset)},Object.defineProperty(e.prototype,"refreshControl",{get:function(){return this._refreshControl},set:function(e){this._refreshControl=e,e&&(t.prototype.addSubview.call(this,e.animationView),e.animationView.frame={x:0,y:0,width:this.bounds.width,height:44},e.scrollView=this)},enumerable:!0,configurable:!0}),e.prototype.createRefreshEffect=function(t){if(this.refreshControl&&this.refreshControl.enabled&&this.contentSize.width<=this.bounds.width){var e=this.refreshControl.animationView;if(e.frame.y!=this.contentInset.top&&(e.frame={x:e.frame.x,y:this.contentInset.top,width:e.frame.width,height:e.frame.height}),this.contentOffset.y-t.y<-this.contentInset.top){var i=Math.max(0,Math.min(1,(-this.contentInset.top-(this.contentOffset.y-t.y))/88));return this.refreshControl.animationView.alpha=i,t.y/3}this.refreshControl.animationView.alpha=0}},Object.defineProperty(e.prototype,"fetchMoreControl",{get:function(){return this._fetchMoreControl},set:function(t){this._fetchMoreControl=t,t&&(t.scrollView=this)},enumerable:!0,configurable:!0}),e.prototype.createFetchMoreEffect=function(t){if(this.fetchMoreControl&&this.fetchMoreControl.enabled&&this.contentSize.width<=this.bounds.width){if(this.fetchMoreControl.fetching)return!0;if(this.contentOffset.y-t.y>this.contentSize.height+this.contentInset.bottom-2*this.bounds.height)return this.fetchMoreControl.beginFetching(),!0}return!1},e}(UIView_1.UIView);exports.UIScrollView=UIScrollView;
    },{"./UIAnimator":25,"./UIColor":31,"./UIEdgeInsets":34,"./UIFetchMoreControl":36,"./UIPanGestureRecognizer":48,"./UIPoint":50,"./UIRefreshControl":55,"./UISize":60,"./UIView":72,"./helpers/IdelQueue":76,"./helpers/Scroller":81}],60:[function(require,module,exports){
    "use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.UISizeZero={width:0,height:0},exports.UISizeMake=function(e,t){return{width:e,height:t}},exports.UISizeEqualToSize=function(e,t){return Math.abs(e.width-t.width)<.001&&Math.abs(e.height-t.height)<.001};
    },{}],61:[function(require,module,exports){
    "use strict";var __extends=this&&this.__extends||function(){var t=function(i,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var e in i)i.hasOwnProperty(e)&&(t[e]=i[e])})(i,e)};return function(i,e){function n(){this.constructor=i}t(i,e),i.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(exports,"__esModule",{value:!0});var UIView_1=require("./UIView"),UIAnimator_1=require("./UIAnimator"),UILongPressGestureRecognizer_1=require("./UILongPressGestureRecognizer"),ThumbView=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return __extends(i,t),i.prototype.pointInside=function(t){return t.x>=-22&&t.y>=-22&&t.x<=this.frame.width+22&&t.y<=this.frame.height+22},i}(UIView_1.UIView),UISlider=function(t){function i(){var i=t.call(this)||this;return i.value=.5,i.minimumValue=0,i.maximumValue=1,i._minimumTrackTintColor=void 0,i._maximumTrackTintColor=void 0,i._thumbTintColor=void 0,i.minimumTrackView=new UIView_1.UIView,i.maximumTrackView=new UIView_1.UIView,i.thumbView=new ThumbView,i.thumbOutLightView=new UIView_1.UIView,i._tracking=!1,i.previousLocation=void 0,i.tintColor&&(i.minimumTrackTintColor=i.tintColor,i.maximumTrackTintColor=i.tintColor.colorWithAlphaComponent(.3),i.thumbTintColor=i.tintColor),i.maximumTrackView.userInteractionEnabled=!1,i.addSubview(i.maximumTrackView),i.minimumTrackView.userInteractionEnabled=!1,i.addSubview(i.minimumTrackView),i.thumbOutLightView.userInteractionEnabled=!1,i.addSubview(i.thumbOutLightView),i.addSubview(i.thumbView),i.setupTouches(),i}return __extends(i,t),Object.defineProperty(i.prototype,"minimumTrackTintColor",{get:function(){return this._minimumTrackTintColor},set:function(t){this._minimumTrackTintColor=t,this.minimumTrackView.backgroundColor=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"maximumTrackTintColor",{get:function(){return this._maximumTrackTintColor},set:function(t){this._maximumTrackTintColor=t,this.maximumTrackView.backgroundColor=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"thumbTintColor",{get:function(){return this._thumbTintColor},set:function(t){this._thumbTintColor=t,t&&(this.thumbView.backgroundColor=t,this.thumbOutLightView.backgroundColor=t.colorWithAlphaComponent(.2))},enumerable:!0,configurable:!0}),i.prototype.setValue=function(t,i){var e=this;i?(this.value=t,UIAnimator_1.UIAnimator.curve(.5,function(){e.layoutSubviews()},void 0)):(this.value=t,this.layoutSubviews())},Object.defineProperty(i.prototype,"tracking",{get:function(){return this._tracking},set:function(t){var i=this;this._tracking!==t&&(this._tracking=t,UIAnimator_1.UIAnimator.linear(.15,function(){t?(i.thumbView.transform={a:1.4,b:0,c:0,d:1.4,tx:0,ty:0},i.thumbOutLightView.transform={a:2.4,b:0,c:0,d:2.4,tx:0,ty:0}):(i.thumbView.transform={a:1,b:0,c:0,d:1,tx:0,ty:0},i.thumbOutLightView.transform={a:1,b:0,c:0,d:1,tx:0,ty:0})},void 0))},enumerable:!0,configurable:!0}),i.prototype.setupTouches=function(){var t=this,i=new UILongPressGestureRecognizer_1.UILongPressGestureRecognizer;i.on("began",function(i){t.previousLocation=i.locationInView(t),t.tracking=!0}),i.on("changed",function(i){var e=t.previousLocation;if(e){var n=i.locationInView(t);if(!(n.x<0||n.x>t.bounds.width)){var r=n.x-e.x;t.previousLocation=n;var o=t.value+r/t.frame.width*(t.maximumValue-t.minimumValue);t.value=Math.max(t.minimumValue,Math.min(t.maximumValue,o)),t.emit("valueChanged",t),t.layoutSubviews()}}}),i.on("ended",function(){t.tracking=!1}),i.on("cancelled",function(){t.tracking=!1}),i.minimumPressDuration=0,this.thumbView.addGestureRecognizer(i)},i.prototype.layoutSubviews=function(){t.prototype.layoutSubviews.call(this);var i=Math.max(0,Math.min(1,(this.value-this.minimumValue)/(this.maximumValue-this.minimumValue)));this.maximumTrackView.frame={x:0,y:(this.bounds.height-4)/2,width:this.bounds.width,height:4},this.minimumTrackView.frame={x:0,y:(this.bounds.height-4)/2,width:this.bounds.width*i,height:4},this.thumbOutLightView.frame={x:this.bounds.width*i-7.5,y:(this.bounds.height-15)/2,width:15,height:15},this.thumbOutLightView.layer.cornerRadius=7.5,this.thumbView.frame={x:this.bounds.width*i-7.5,y:(this.bounds.height-15)/2,width:15,height:15},this.thumbView.layer.cornerRadius=7.5},i.prototype.pointInside=function(t){return t.x>=-22&&t.y>=-(44-this.frame.height)/2&&t.x<=this.frame.width+22&&t.y<=this.frame.height+(44-this.frame.height)/2},i}(UIView_1.UIView);exports.UISlider=UISlider;
    },{"./UIAnimator":25,"./UILongPressGestureRecognizer":43,"./UIView":72}],62:[function(require,module,exports){
    "use strict";var __extends=this&&this.__extends||function(){var t=function(i,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var e in i)i.hasOwnProperty(e)&&(t[e]=i[e])})(i,e)};return function(i,e){function s(){this.constructor=i}t(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}();Object.defineProperty(exports,"__esModule",{value:!0});var UIEnums_1=require("./UIEnums"),UIView_1=require("./UIView"),UIStackView=function(t){function i(i){void 0===i&&(i=void 0);var e=t.call(this)||this;return e.arrangedSubviews=[],e._axis=UIEnums_1.UILayoutConstraintAxis.horizontal,e._distribution=UIEnums_1.UIStackViewDistribution.fill,e._alignment=UIEnums_1.UIStackViewAlignment.fill,e._spacing=0,e.allLayoutWidths=new Map,e.allLayoutHeights=new Map,e.arrangedSubviews=i||[],e.arrangedSubviews.forEach(function(t){e.addSubview(t)}),setTimeout(function(){e._layoutArrangeSubviews()},0),e}return __extends(i,t),i.prototype.addArrangedSubview=function(t){this.arrangedSubviews.push(t),this.addSubview(t),this._layoutArrangeSubviews()},i.prototype.removeArrangedSubview=function(t){var i=this.arrangedSubviews.indexOf(t);i>=0&&(this.arrangedSubviews.splice(i,1),t.removeFromSuperview(),this._layoutArrangeSubviews())},i.prototype.insertArrangedSubview=function(t,i){this.arrangedSubviews.splice(i,0,t),this.addSubview(t),this._layoutArrangeSubviews()},i.prototype.layoutArrangedSubview=function(t,i){this.allLayoutWidths.delete(t),this.allLayoutHeights.delete(t),i&&(void 0!==i.width&&this.allLayoutWidths.set(t,i.width),void 0!==i.height&&this.allLayoutHeights.set(t,i.height)),this._layoutArrangeSubviews()},Object.defineProperty(i.prototype,"axis",{get:function(){return this._axis},set:function(t){this._axis=t,this._layoutArrangeSubviews()},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"distribution",{get:function(){return this._distribution},set:function(t){this._distribution=t,this._layoutArrangeSubviews()},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"alignment",{get:function(){return this._alignment},set:function(t){this._alignment=t,this._layoutArrangeSubviews()},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"spacing",{get:function(){return this._spacing},set:function(t){this._spacing=t,this._layoutArrangeSubviews()},enumerable:!0,configurable:!0}),i.prototype.layoutSubviews=function(){t.prototype.layoutSubviews.call(this),this._layoutArrangeSubviews()},i.prototype._layoutArrangeSubviews=function(){var t=this;if(0!=this.arrangedSubviews.length){var i,e,s,n,a,r,u,o,h=[],g=[],c=[],l=[];switch(this.axis==UIEnums_1.UILayoutConstraintAxis.horizontal?(i=h,e=c,s=g,n=l,a=this.allLayoutWidths,r=this.allLayoutHeights,u=this.bounds.width,o=this.bounds.height):(i=g,e=l,s=h,n=c,a=this.allLayoutHeights,r=this.allLayoutWidths,u=this.bounds.height,o=this.bounds.width),this.distribution){case UIEnums_1.UIStackViewDistribution.fill:var b=0;a.forEach(function(t){b+=t});var d=u-b,w=0;this.arrangedSubviews.forEach(function(t,s){var n=0,r=a.get(t);void 0!==r?n=r:(n=d,d=0),i.push(w),e.push(n),w+=n});break;case UIEnums_1.UIStackViewDistribution.fillEqually:this.arrangedSubviews.forEach(function(s,n){i.push(u/t.arrangedSubviews.length*n),e.push(u/t.arrangedSubviews.length)});break;case UIEnums_1.UIStackViewDistribution.fillProportionally:if(1==this.arrangedSubviews.length)i.push(0),e.push(this.bounds.width);else{var v=(u-(this.arrangedSubviews.length-1)*this.spacing)/this.arrangedSubviews.length;this.arrangedSubviews.forEach(function(s,n){i.push((v+t.spacing)*n),e.push(v)})}break;case UIEnums_1.UIStackViewDistribution.equalSpacing:if(1==this.arrangedSubviews.length)i.push(0),e.push(u);else{var p=0;a.forEach(function(t){p+=t});var f=(u-p)/(this.arrangedSubviews.length-1);w=0;this.arrangedSubviews.forEach(function(t){i.push(w);var s=a.get(t)||0;e.push(s),w+=s+f})}break;case UIEnums_1.UIStackViewDistribution.equalCentering:if(this.arrangedSubviews.length>2){var S=(a.get(this.arrangedSubviews[0])||0)/2,_=(u-(a.get(this.arrangedSubviews[this.arrangedSubviews.length-1])||0)/2-S)/(this.arrangedSubviews.length-1);w=0;this.arrangedSubviews.forEach(function(t,s){var n=a.get(t)||0;e.push(n),s>0&&(w-=n/2),i.push(w),w+=n/2+_})}else if(2==this.arrangedSubviews.length){d=u,w=0;i.push(w);var y=a.get(this.arrangedSubviews[0])||0;e.push(y),d-=y,w+=y;var I=void 0!==a.get(this.arrangedSubviews[1])?a.get(this.arrangedSubviews[1]):d;i.push(u-(I||0)),e.push(I||0)}else 1==this.arrangedSubviews.length&&(i.push(0),e.push(u))}switch(this.alignment){case UIEnums_1.UIStackViewAlignment.fill:this.arrangedSubviews.forEach(function(t){s.push(0),n.push(o)});break;case UIEnums_1.UIStackViewAlignment.leading:this.arrangedSubviews.forEach(function(t){s.push(0),n.push(r.get(t)||0)});break;case UIEnums_1.UIStackViewAlignment.center:this.arrangedSubviews.forEach(function(t){var i=r.get(t)||0;s.push((o-i)/2),n.push(i)});break;case UIEnums_1.UIStackViewAlignment.trailing:this.arrangedSubviews.forEach(function(t){var i=r.get(t)||0;s.push(o-i),n.push(i)})}this.axis==UIEnums_1.UILayoutConstraintAxis.horizontal?this.arrangedSubviews.forEach(function(t,a){t.frame={x:i[a],y:s[a],width:e[a],height:n[a]}}):this.arrangedSubviews.forEach(function(t,a){t.frame={x:s[a],y:i[a],width:n[a],height:e[a]}})}},i}(UIView_1.UIView);exports.UIStackView=UIStackView;
    },{"./UIEnums":35,"./UIView":72}],63:[function(require,module,exports){
    "use strict";var __extends=this&&this.__extends||function(){var t=function(i,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var e in i)i.hasOwnProperty(e)&&(t[e]=i[e])})(i,e)};return function(i,e){function n(){this.constructor=i}t(i,e),i.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(exports,"__esModule",{value:!0});var UIView_1=require("./UIView"),UIColor_1=require("./UIColor"),UIAnimator_1=require("./UIAnimator"),UILongPressGestureRecognizer_1=require("./UILongPressGestureRecognizer"),ThumbView=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return __extends(i,t),i.prototype.pointInside=function(t){return t.x>=-22&&t.y>=-22&&t.x<=this.frame.width+22&&t.y<=this.frame.height+22},i}(UIView_1.UIView),UISwitch=function(t){function i(){var i=t.call(this)||this;return i.onTintColor=i.tintColor,i.thumbTintColor=UIColor_1.UIColor.white,i._isOn=!1,i.tintView=new UIView_1.UIView,i.thumbView=new ThumbView,i.thumbOutLightView=new UIView_1.UIView,i._tracking=!1,i.touchChanged=!1,i.tintView.userInteractionEnabled=!1,i.addSubview(i.tintView),i.thumbOutLightView.userInteractionEnabled=!1,i.addSubview(i.thumbOutLightView),i.thumbView.layer.shadowColor=new UIColor_1.UIColor(0,0,0,1),i.thumbView.layer.shadowRadius=2,i.thumbView.layer.shadowOffset={width:0,height:3},i.thumbView.layer.shadowOpacity=.2,i.addSubview(i.thumbView),i.setupTouches(),i}return __extends(i,t),Object.defineProperty(i.prototype,"isOn",{get:function(){return this._isOn},set:function(t){this._isOn=t,this.layoutSubviews()},enumerable:!0,configurable:!0}),i.prototype.setOn=function(t,i){var e=this;i?UIAnimator_1.UIAnimator.curve(.2,function(){e.isOn=t},void 0):this.isOn=t},Object.defineProperty(i.prototype,"tracking",{get:function(){return this._tracking},set:function(t){var i=this;this._tracking!=t&&(this._tracking=t,UIAnimator_1.UIAnimator.linear(.15,function(){i.thumbOutLightView.transform=t?{a:1.6,b:0,c:0,d:1.6,tx:0,ty:0}:{a:1,b:0,c:0,d:1,tx:0,ty:0}},void 0))},enumerable:!0,configurable:!0}),i.prototype.setupTouches=function(){var t=this,i=new UILongPressGestureRecognizer_1.UILongPressGestureRecognizer;i.on("began",function(){t.touchChanged=!1,t.tracking=!0}).on("changed",function(i){var e=i.locationInView(t).x>t.bounds.width/2;t.isOn!=e&&(t.touchChanged=!0,UIAnimator_1.UIAnimator.curve(.2,function(){t.isOn=e},void 0))}).on("ended",function(i){if(t.touchChanged)t.emit("valueChanged",t);else{var e=i.locationInView(t);t.pointInside(e)&&UIAnimator_1.UIAnimator.curve(.2,function(){t.isOn=!t.isOn},function(){t.emit("valueChanged",t)})}t.tracking=!1}).on("cancelled",function(){t.touchChanged&&t.emit("valueChanged",t),t.tracking=!1}),i.minimumPressDuration=0,this.thumbView.addGestureRecognizer(i)},i.prototype.layoutSubviews=function(){t.prototype.layoutSubviews.call(this),this.tintView.frame={x:(this.bounds.width-34)/2,y:(this.bounds.height-14)/2,width:34,height:14},this.tintView.layer.cornerRadius=7,this.isOn?(this.thumbView.frame={x:this.tintView.frame.x+this.tintView.frame.width-20,y:(this.bounds.height-20)/2,width:20,height:20},this.thumbView.layer.cornerRadius=10,this.onTintColor&&(this.thumbView.backgroundColor=this.onTintColor,this.tintView.backgroundColor=this.onTintColor.colorWithAlphaComponent(.5),this.thumbOutLightView.frame={x:this.tintView.frame.x+this.tintView.frame.width-20,y:(this.bounds.height-20)/2,width:20,height:20},this.thumbOutLightView.layer.cornerRadius=10,this.thumbOutLightView.backgroundColor=this.onTintColor.colorWithAlphaComponent(.2))):(this.thumbView.frame={x:this.tintView.frame.x,y:(this.bounds.height-20)/2,width:20,height:20},this.thumbView.layer.cornerRadius=10,this.thumbView.backgroundColor=this.thumbTintColor,this.tintView.backgroundColor=new UIColor_1.UIColor(132/255,132/255,132/255,1),this.thumbOutLightView.frame={x:this.tintView.frame.x,y:(this.bounds.height-20)/2,width:20,height:20},this.thumbOutLightView.layer.cornerRadius=10,this.thumbOutLightView.backgroundColor=new UIColor_1.UIColor(132/255,132/255,132/255,.2))},i.prototype.pointInside=function(t){return t.x>=0&&t.y>=-(44-this.frame.height)/2&&t.x<=this.frame.width&&t.y<=this.frame.height+(44-this.frame.height)/2},i}(UIView_1.UIView);exports.UISwitch=UISwitch;
    },{"./UIAnimator":25,"./UIColor":31,"./UILongPressGestureRecognizer":43,"./UIView":72}],64:[function(require,module,exports){
    "use strict";var __extends=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}();Object.defineProperty(exports,"__esModule",{value:!0});var UIView_1=require("./UIView"),UIColor_1=require("./UIColor"),UIImageView_1=require("./UIImageView"),UILabel_1=require("./UILabel"),UIFont_1=require("./UIFont"),UIEnums_1=require("./UIEnums"),UITapGestureRecognizer_1=require("./UITapGestureRecognizer"),UISize_1=require("./UISize"),UIEdgeInsets_1=require("./UIEdgeInsets"),UITabBar=function(t){function e(){var e=t.call(this)||this;return e.translucent=!1,e.barHeight=50,e._barTintColor=void 0,e.unselectedItemTintColor=new UIColor_1.UIColor(115/255,115/255,115/255,1),e.tabBarController=void 0,e.barButtons=[],e.barTintColor=UIColor_1.UIColor.white,e.tintColor=UIColor_1.UIColor.black,e.domElement.style.borderTop="solid",e.domElement.style.borderTopWidth=(1/devicePixelRatio).toString()+"px",e.domElement.style.borderTopColor=new UIColor_1.UIColor(152/255,150/255,155/255,.75).toStyle(),e}return __extends(e,t),Object.defineProperty(e.prototype,"hidden",{get:function(){return this._hidden},set:function(t){this._hidden=t,this.domElement.style.visibility=t?"hidden":"inherit",this.tabBarController&&this.tabBarController.iView.setNeedsDisplay()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"barTintColor",{get:function(){return this._barTintColor},set:function(t){this._barTintColor=t,this.backgroundColor=t},enumerable:!0,configurable:!0}),e.prototype.resetItems=function(){var t=this;this.barButtons.forEach(function(t){t.removeFromSuperview(),t.barItem&&(t.barItem.barButton=void 0,t.barItem=void 0)}),this.tabBarController&&(this.barButtons=this.tabBarController.itemControllers.map(function(t){var e=new UITabBarButton;return e.barItem=t.tabBarItem,t.tabBarItem.barButton=e,e}),this.barButtons.forEach(function(e,i){e.addGestureRecognizer((new UITapGestureRecognizer_1.UITapGestureRecognizer).on("touch",function(){t.tabBarController&&(t.tabBarController.selectedIndex=i)})),t.addSubview(e)})),this.setNeedsLayout(!0)},e.prototype.setSelectedIndex=function(t){var e=this;this.barButtons.forEach(function(i,o){i.itemSelected=o==t,i.tintColor=o==t?e.tintColor:e.unselectedItemTintColor})},e.prototype.layoutSubviews=function(){var e=this;if(t.prototype.layoutSubviews.call(this),this.barButtons.length>0){var i=this.bounds.width/this.barButtons.length;this.barButtons.forEach(function(t,o){t.frame={x:o*i,y:0,width:i,height:e.bounds.height}})}},e}(UIView_1.UIView);exports.UITabBar=UITabBar;var UITabBarButton=function(t){function e(){var e=t.call(this)||this;return e._barItem=void 0,e._itemSelected=!1,e.iconImageView=new UIImageView_1.UIImageView,e.titleLabel=new UILabel_1.UILabel,e.addSubview(e.iconImageView),e.titleLabel.font=new UIFont_1.UIFont(11),e.titleLabel.textAlignment=UIEnums_1.UITextAlignment.center,e.addSubview(e.titleLabel),e}return __extends(e,t),Object.defineProperty(e.prototype,"barItem",{get:function(){return this._barItem},set:function(t){this._barItem=t,this.setNeedUpdate()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"itemSelected",{get:function(){return this._itemSelected},set:function(t){this._itemSelected=t,this.setNeedUpdate()},enumerable:!0,configurable:!0}),e.prototype.setNeedUpdate=function(){var t=this;this.barItem&&(this.iconImageView.image=this.itemSelected&&this.barItem.selectedImage||this.barItem.image,this.iconImageView.image&&0===this.iconImageView.image.size.width&&this.iconImageView.image.on("load",function(){t.setNeedsLayout(!0)}),this.titleLabel.text=this.barItem.title),this.setNeedsLayout(!0)},e.prototype.tintColorDidChange=function(){t.prototype.tintColorDidChange.call(this),this.titleLabel.textColor=this.tintColor},e.prototype.layoutSubviews=function(){t.prototype.layoutSubviews.call(this);var e=this.iconImageView.intrinsicContentSize()||UISize_1.UISizeZero,i=this.titleLabel.intrinsicContentSize()||UISize_1.UISizeZero,o=this.barItem?this.barItem.imageInsets:UIEdgeInsets_1.UIEdgeInsetsZero;this.iconImageView.frame={x:o.left+(this.bounds.width-e.width)/2-o.right,y:o.top+(this.bounds.height-(e.height+i.height))/2,width:e.width,height:e.height},this.titleLabel.frame={x:0,y:this.iconImageView.frame.y+this.iconImageView.frame.height+o.bottom,width:this.bounds.width,height:i.height}},e}(UIView_1.UIView);exports.UITabBarButton=UITabBarButton;
    },{"./UIColor":31,"./UIEdgeInsets":34,"./UIEnums":35,"./UIFont":37,"./UIImageView":40,"./UILabel":42,"./UISize":60,"./UITapGestureRecognizer":68,"./UIView":72}],65:[function(require,module,exports){
    "use strict";var __extends=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function r(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();Object.defineProperty(exports,"__esModule",{value:!0});var UIViewController_1=require("./UIViewController"),UITabBar_1=require("./UITabBar"),UITabBarController=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._isUITabBarController=!0,t.itemControllers=[],t._selectedIndex=-1,t.tabBar=new UITabBar_1.UITabBar,t}return __extends(t,e),Object.defineProperty(t.prototype,"selectedIndex",{get:function(){return this._selectedIndex},set:function(e){var t=this;if(this._selectedIndex!=e)if(e<0)this._selectedIndex=e;else{var i=this._selectedIndex;if(this.itemControllers[e]){var r=this.itemControllers[e];void 0===r.parentViewController&&(this.addChildViewController(r),this.iView.addSubview(r.iView),this.iView.bringSubviewToFront(this.tabBar),this.viewWillLayoutSubviews())}this.itemControllers[i]&&this.itemControllers[i].viewWillDisappear(!1),this.itemControllers[e]&&this.itemControllers[e].viewWillAppear(!1),this._selectedIndex=e,this.childViewControllers.forEach(function(i){i.iView.hidden=t.itemControllers.indexOf(i)!=e}),this.tabBar.setSelectedIndex(e),this.itemControllers[i]&&this.itemControllers[i].viewDidDisappear(!1),this.itemControllers[e]&&this.itemControllers[e].viewDidAppear(!1),this.emit("onSelectedViewController",this,!1)}else this.emit("onSelectedViewController",this,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selectedViewController",{get:function(){return this.itemControllers[this.selectedIndex]},set:function(e){this.selectedIndex=Math.max(0,this.itemControllers.indexOf(e))},enumerable:!0,configurable:!0}),t.prototype.setViewControllers=function(e,t){var i=this;void 0===t&&(t=!1),this.childViewControllers.forEach(function(e){e.removeFromParentViewController(),e.iView.removeFromSuperview()}),this.itemControllers=e,e.forEach(function(e,t){0==t&&(i.addChildViewController(e),i.iView.addSubview(e.iView))}),this.iView.bringSubviewToFront(this.tabBar),this.tabBar.resetItems(),this.selectedIndex=0,this.viewWillLayoutSubviews()},Object.defineProperty(t.prototype,"barFrame",{get:function(){return this.tabBar.hidden?{x:0,y:this.iView.bounds.height,width:this.iView.bounds.width,height:0}:{x:0,y:this.iView.bounds.height-this.tabBar.barHeight,width:this.iView.bounds.width,height:this.tabBar.barHeight}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"contentFrame",{get:function(){return{x:0,y:0,width:this.iView.bounds.width,height:this.iView.bounds.height-this.barFrame.height}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"navigationControllerFrame",{get:function(){return{x:0,y:0,width:this.iView.bounds.width,height:this.iView.bounds.height}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hidesBottomBarContentFrame",{get:function(){return{x:0,y:0,width:this.iView.bounds.width,height:this.iView.bounds.height}},enumerable:!0,configurable:!0}),t.prototype.viewDidLoad=function(){this.tabBar.tabBarController=this,this.iView.addSubview(this.tabBar),e.prototype.viewDidLoad.call(this)},t.prototype.viewWillLayoutSubviews=function(){var t=this;this.tabBar.frame=this.barFrame,this.childViewControllers.forEach(function(e){!0===e._isUINavigationController?e.iView.frame=t.navigationControllerFrame:e.iView.frame=t.contentFrame}),e.prototype.viewWillLayoutSubviews.call(this)},t}(UIViewController_1.UIViewController);exports.UITabBarController=UITabBarController;
    },{"./UITabBar":64,"./UIViewController":73}],66:[function(require,module,exports){
    "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var UIEdgeInsets_1=require("./UIEdgeInsets"),UITabBarItem=function(){function e(){this._title=void 0,this._image=void 0,this._selectedImage=void 0,this._imageInsets=UIEdgeInsets_1.UIEdgeInsetsZero,this.barButton=void 0}return Object.defineProperty(e.prototype,"title",{get:function(){return this._title},set:function(e){this._title=e,this.barButton&&this.barButton.setNeedUpdate()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"image",{get:function(){return this._image},set:function(e){this._image=e,this.barButton&&this.barButton.setNeedUpdate()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectedImage",{get:function(){return this._selectedImage},set:function(e){this._selectedImage=e,this.barButton&&this.barButton.setNeedUpdate()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageInsets",{get:function(){return this._imageInsets},set:function(e){this._imageInsets=e,this.barButton&&this.barButton.setNeedUpdate()},enumerable:!0,configurable:!0}),e}();exports.UITabBarItem=UITabBarItem;
    },{"./UIEdgeInsets":34}],67:[function(require,module,exports){
    "use strict";var __extends=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function o(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}();Object.defineProperty(exports,"__esModule",{value:!0});var UIView_1=require("./UIView"),UIScrollView_1=require("./UIScrollView"),UIColor_1=require("./UIColor"),UIIndexPath_1=require("./UIIndexPath"),UIRect_1=require("./UIRect"),UIAnimator_1=require("./UIAnimator"),UITouch_1=require("./UITouch"),UITableView=function(e){function t(){var t=e.call(this)||this;return t.rowHeight=44,t._tableHeaderView=void 0,t._tableFooterView=void 0,t.separatorColor=new UIColor_1.UIColor(188/255,186/255,193/255,.75),t.separatorInset={top:0,left:15,bottom:0,right:0},t.allowsSelection=!0,t.allowsMultipleSelection=!1,t._registeredCells={},t._reusableCells=[],t._cachedCells={},t._selectedRows=[],t._highlightedRow=void 0,t._needsReload=!1,t._sections=[],t.firstTouchPoint=void 0,t.firstTouchCell=void 0,t.alwaysBounceVertical=!0,t}return __extends(t,e),Object.defineProperty(t.prototype,"tableHeaderView",{get:function(){return this._tableHeaderView},set:function(e){this._tableHeaderView&&this._tableHeaderView.removeFromSuperview(),this._tableHeaderView=e,this._setContentSize(),e&&this.addSubview(e),this._layoutTableView(),this._layoutSectionHeaders(),this._layoutSectionFooters()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tableFooterView",{get:function(){return this._tableFooterView},set:function(e){this._tableFooterView&&this._tableFooterView.removeFromSuperview(),this._tableFooterView=e,this._setContentSize(),e&&this.addSubview(e),this._layoutTableView(),this._layoutSectionHeaders(),this._layoutSectionFooters()},enumerable:!0,configurable:!0}),t.prototype.register=function(e,t){this._registeredCells[t]=e},t.prototype.dequeueReusableCell=function(e,t){for(var i=0;i<this._reusableCells.length;i++)if(this._reusableCells[i].reuseIdentifier==e){var o=this._reusableCells[i];return this._reusableCells.splice(i,1),o}var r=this._registeredCells[e]?this._registeredCells[e]():new UITableViewCell;return r.reuseIdentifier=e,r},t.prototype.reloadData=function(){var e=this;Object.keys(this._cachedCells).forEach(function(t){e._cachedCells[t].removeFromSuperview()}),this._reusableCells.forEach(function(e){return e.removeFromSuperview()}),this._reusableCells=[],this._cachedCells={},this._updateSectionsCache(),this._setContentSize(),this._needsReload=!1,this._layoutTableView(),this._layoutSectionHeaders(),this._layoutSectionFooters()},t.prototype.selectRow=function(e,t){var i=this;this.allowsMultipleSelection||(this._selectedRows.forEach(function(e){for(var t=Object.keys(i._cachedCells).map(function(e){return i._cachedCells[e]}),o=0;o<t.length;o++){var r=t[o];if(r.currentIndexPath&&r.currentIndexPath.mapKey()===e){r.selected=!1,r.emit("selected",r,!1,!1);break}}}),this._selectedRows=[]),this._selectedRows.push(e.mapKey());for(var o=Object.keys(this._cachedCells).map(function(e){return i._cachedCells[e]}),r=function(i){var r=o[i];if(r.currentIndexPath&&r.currentIndexPath.mapKey()===e.mapKey())return t?UIAnimator_1.UIAnimator.linear(.3,function(){r.selected=!0},void 0):r.selected=!0,r.emit("selected",r,!0,t),"break"},h=0;h<o.length;h++){if("break"===r(h))break}},t.prototype.deselectRow=function(e,t){var i=this,o=this._selectedRows.indexOf(e.mapKey());o>=0&&this._selectedRows.splice(o,1);for(var r=Object.keys(this._cachedCells).map(function(e){return i._cachedCells[e]}),h=function(i){var o=r[i];if(o.currentIndexPath&&o.currentIndexPath.mapKey()===e.mapKey())return t?UIAnimator_1.UIAnimator.linear(.3,function(){o.selected=!1},void 0):o.selected=!1,o.emit("selected",o,!1,!1),"break"},n=0;n<r.length;n++){if("break"===h(n))break}},t.prototype.numberOfSections=function(){var e=this.val("numberOfSections");return"number"==typeof e?e:1},t.prototype.numberOfRows=function(e){var t=this.val("numberOfRows",e);return"number"==typeof t?t:0},t.prototype.heightForRow=function(e){var t=this.val("heightForRow",e);return"number"==typeof t?t:this.rowHeight},t.prototype.cellForRow=function(e){return this.val("cellForRow",e)||new UITableViewCell},t.prototype.viewForHeader=function(e){return this.val("viewForHeader",e)},t.prototype.heightForHeader=function(e){var t=this.val("heightForHeader",e);return"number"==typeof t?t:0},t.prototype.viewForFooter=function(e){return this.val("viewForFooter",e)},t.prototype.heightForFooter=function(e){var t=this.val("heightForFooter",e);return"number"==typeof t?t:0},t.prototype.didSelectRow=function(e){},t.prototype.didDeselectRow=function(e){},t.prototype.contentOffsetDidChanged=function(){this._layoutTableView(),this._layoutSectionHeaders(),this._layoutSectionFooters()},t.prototype.layoutSubviews=function(){e.prototype.layoutSubviews.call(this),this._layoutTableView(),this._layoutSectionHeaders(),this._layoutSectionFooters()},t.prototype._updateSectionsCache=function(){var e=this;this._sections.forEach(function(e){e.headerView&&e.headerView.removeFromSuperview(),e.footerView&&e.footerView.removeFromSuperview()}),this._sections=[];for(var t=this.numberOfSections(),i=function(t){var i=o.numberOfRows(t),r=new UITableViewSection,h=Array(i).fill(0).map(function(i,o){return e.heightForRow(new UIIndexPath_1.UIIndexPath(o,t))}),n=h.length>0?h.reduce(function(e,t){return e+t}):0,s=o.viewForHeader(t);s?(o.addSubview(s),r.headerView=s,r.headerHeight=o.heightForHeader(t)):r.headerHeight=0;var a=o.viewForFooter(t);a?(o.addSubview(a),r.footerView=a,r.footerHeight=o.heightForFooter(t)):r.footerHeight=0,r.rowsHeight=n,r.setNumberOfRows(i,h),o._sections.push(r)},o=this,r=0;r<t;r++)i(r)},t.prototype._updateSectionsCacheIfNeeded=function(){0==this._sections.length&&this._updateSectionsCache()},t.prototype._setContentSize=function(){this._updateSectionsCacheIfNeeded();var e=this.tableHeaderView?this.tableHeaderView.frame.height:0,t=this._sections.length>0?this._sections.map(function(e){return e.sectionHeight()}).reduce(function(e,t){return e+t}):0,i=this.tableFooterView?this.tableFooterView.frame.height:0;this.contentSize={width:0,height:e+t+i}},t.prototype._layoutTableView=function(){var e=this,t={width:this.bounds.width,height:this.bounds.height},i={x:0,y:this.contentOffset.y,width:t.width,height:t.height},o=0;this.tableHeaderView&&(this.tableHeaderView.frame={x:0,y:0,width:t.width,height:this.tableHeaderView.frame.height},o+=this.tableHeaderView.frame.height);var r=this._cachedCells,h=this._sections.length;this._cachedCells={};for(var n=0;n<h;n++){var s=this._rectForSection(n);if(o+=s.height,UIRect_1.UIRectIntersectsRect(s,i)){var a,c=this._rectForHeaderInSection(n),l=this._rectForFooterInSection(n),d=this._sections[n],u=d.numberOfRows;d.headerView&&(d.headerView.frame=c),d.footerView&&(d.footerView.frame=l);for(var f=0,w=Math.max(0,d.numberOfRows-1);;){if(Math.abs(w-f)<=1){a=f;break}var p=Math.ceil((w+f)/2),_=new UIIndexPath_1.UIIndexPath(p,n);if((b=this._rectForRowAtIndexPath(_)).y<=this.contentOffset.y&&b.y+b.height>=this.contentOffset.y){a=p;break}b.y+b.height<this.contentOffset.y?f=p:b.y>this.contentOffset.y&&(w=p)}for(var g=0,y=a;y<u;y++){g++;_=new UIIndexPath_1.UIIndexPath(y,n);var b=this._rectForRowAtIndexPath(_);if(UIRect_1.UIRectIntersectsRect(b,i)&&b.height>0){var m=r[_.mapKey()]||this.cellForRow(_);m.currentIndexPath=_,m.currentSectionRecord=d,this._cachedCells[_.mapKey()]=m,delete r[_.mapKey()],m.highlighted=this._highlightedRow==_.mapKey(),m.emit("highlighted",m,m.highlighted,!1),m.selected=this._selectedRows.indexOf(_.mapKey())>=0,m.emit("selected",m,m.selected,!1),m.frame=b,m.backgroundColor=this.backgroundColor,null==m.superview&&this.insertSubviewAtIndex(m,0),m.hidden=!1,m.setSeparator(y===u-1,this.separatorColor,this.separatorInset)}else if(g>10)break}}}Object.keys(r).forEach(function(t){var i=r[t];i.reuseIdentifier?e._reusableCells.push(i):i.hidden=!0});var I=Object.keys(this._cachedCells).map(function(t){return e._cachedCells[t]});this._reusableCells.forEach(function(e){UIRect_1.UIRectIntersectsRect(e.frame,i)&&I.indexOf(e)<0&&(e.hidden=!0)}),this.tableFooterView&&(this.tableFooterView.frame={x:0,y:o,width:t.width,height:this.tableFooterView.frame.height})},t.prototype._layoutSectionHeaders=function(){var e=this;this._sections.forEach(function(t,i){var o=e._rectForSection(i),r=o.y,h=o.y+o.height-t.footerHeight;e.contentOffset.y>=r&&e.contentOffset.y<=h?t.headerView&&(e.contentOffset.y>=h-t.headerView.frame.height?t.headerView.frame=UIRect_1.UIRectMake(0,e.contentOffset.y-(e.contentOffset.y-(h-t.headerView.frame.height)),t.headerView.frame.width,t.headerView.frame.height):t.headerView.frame=UIRect_1.UIRectMake(0,Math.floor(e.contentOffset.y),t.headerView.frame.width,t.headerView.frame.height)):t.headerView&&(t.headerView.frame=UIRect_1.UIRectMake(0,r,t.headerView.frame.width,t.headerView.frame.height))})},t.prototype._layoutSectionFooters=function(){var e=this;this._sections.forEach(function(t,i){var o=e._rectForSection(i),r=o.y,h=o.y+o.height,n=r+t.headerHeight;e.contentOffset.y+e.bounds.height>=n&&e.contentOffset.y+e.bounds.height<=h?t.footerView&&(t.footerView.frame.height>e.contentOffset.y+e.bounds.height-n?t.footerView.frame=UIRect_1.UIRectMake(0,e.contentOffset.y+e.bounds.height-t.footerView.frame.height-(e.contentOffset.y+e.bounds.height-n-t.footerView.frame.height),t.footerView.frame.width,t.footerView.frame.height):t.footerView.frame=UIRect_1.UIRectMake(0,Math.ceil(e.contentOffset.y+e.bounds.height-t.footerView.frame.height),t.footerView.frame.width,t.footerView.frame.height)):t.footerView&&(t.footerView.frame=UIRect_1.UIRectMake(0,h-t.footerView.frame.height,t.footerView.frame.width,t.footerView.frame.height))})},t.prototype._rectForSection=function(e){return this._updateSectionsCacheIfNeeded(),this._UIRectFromVerticalOffset(this._offsetForSection(e),this._sections[e].sectionHeight())},t.prototype._rectForHeaderInSection=function(e){return this._updateSectionsCacheIfNeeded(),this._UIRectFromVerticalOffset(this._offsetForSection(e),this._sections[e].headerHeight)},t.prototype._rectForFooterInSection=function(e){this._updateSectionsCacheIfNeeded();var t=this._sections[e],i=this._offsetForSection(e);return i+=t.headerHeight,i+=t.rowsHeight,this._UIRectFromVerticalOffset(i,this._sections[e].footerHeight)},t.prototype._rectForRowAtIndexPath=function(e){if(this._updateSectionsCacheIfNeeded(),e.section<this._sections.length){var t=this._sections[e.section];if(e.row<t.numberOfRows){var i=this._offsetForSection(e.section);i+=t.headerHeight;for(var o=0;o<e.row;o++)i+=t.rowHeights[o];return this._UIRectFromVerticalOffset(i,t.rowHeights[e.row])}}return UIRect_1.UIRectZero},t.prototype._offsetForSection=function(e){for(var t=this.tableHeaderView?this.tableHeaderView.frame.height:0,i=0;i<e;i++)t+=this._sections[i].sectionHeight();return t},t.prototype._cellForRow=function(e){return this._cachedCells[e.mapKey()]},t.prototype._UIRectFromVerticalOffset=function(e,t){return{x:0,y:e,width:this.bounds.width,height:t}},t.prototype.touchesBegan=function(t){e.prototype.touchesBegan.call(this,t);var i=t[0];void 0!==i&&this.handleTouch(UITouch_1.UITouchPhase.began,i)},t.prototype.touchesMoved=function(t){e.prototype.touchesMoved.call(this,t);var i=t[0];void 0!==i&&this.handleTouch(UITouch_1.UITouchPhase.moved,i)},t.prototype.touchesEnded=function(t){e.prototype.touchesEnded.call(this,t);var i=t[0];void 0!==i&&this.handleTouch(UITouch_1.UITouchPhase.ended,i)},t.prototype.touchesCancelled=function(t){e.prototype.touchesCancelled.call(this,t);var i=t[0];void 0!==i&&this.handleTouch(UITouch_1.UITouchPhase.cancelled,i)},t.prototype.handleTouch=function(e,t){var i=this;if(this.allowsSelection)switch(e){case UITouch_1.UITouchPhase.began:if(!this.tracking){for(var o=t.view,r=!0;void 0!==o&&!(o instanceof UITableViewCell);)o.gestureRecognizers.length>0&&(r=!1),o=o.superview;r&&(this.firstTouchPoint=t.windowPoint,o instanceof UITableViewCell&&(this.firstTouchCell=o,setTimeout(function(){o instanceof UITableViewCell&&void 0!==i.firstTouchPoint&&(o.currentIndexPath&&(i._highlightedRow=o.currentIndexPath.mapKey()),o.highlighted=!0,o.emit("highlighted",o,!0,!1))},150)))}break;case UITouch_1.UITouchPhase.moved:void 0!==this.firstTouchPoint&&t.windowPoint&&(void 0!==UIView_1.UIView.recognizedGesture||Math.abs(t.windowPoint.y-this.firstTouchPoint.y)>8)&&(this._highlightedRow=void 0,Object.keys(this._cachedCells).map(function(e){return i._cachedCells[e]}).forEach(function(e){e.highlighted=!1,e.emit("highlighted",e,!0,!1)}),this.firstTouchPoint=void 0,this.firstTouchCell=void 0);break;case UITouch_1.UITouchPhase.ended:if(this.firstTouchCell){var h=this.firstTouchCell;if(this._highlightedRow=void 0,this.allowsMultipleSelection||(this._selectedRows.forEach(function(e){Object.keys(i._cachedCells).map(function(e){return i._cachedCells[e]}).forEach(function(t){t.currentIndexPath&&t.currentIndexPath.mapKey()===e&&(t.selected=!1,t.emit("selected",t,!1,!1),i.emit("didDeselectRow",t.currentIndexPath,t))})}),this._selectedRows=[]),this.firstTouchPoint=void 0,this.firstTouchCell=void 0,this._highlightedRow=void 0,Object.keys(this._cachedCells).map(function(e){return i._cachedCells[e]}).forEach(function(e){e.highlighted=!1,e.emit("highlighted",e,!1,!1)}),h.currentIndexPath){var n=h.currentIndexPath.mapKey(),s=this._selectedRows.indexOf(n);s>=0?this._selectedRows.splice(s,1):this._selectedRows.push(n)}h.selected=!h.selected,h.emit("selected",h,h.selected,!1),h.selected?(h.currentIndexPath&&this.didSelectRow(h.currentIndexPath),this.emit("didSelectRow",h.currentIndexPath,h)):(h.currentIndexPath&&this.didDeselectRow(h.currentIndexPath),this.emit("didDeselectRow",h.currentIndexPath,h))}else this.firstTouchPoint=void 0,this.firstTouchCell=void 0,this._highlightedRow=void 0,Object.keys(this._cachedCells).map(function(e){return i._cachedCells[e]}).forEach(function(e){e.highlighted=!1,e.emit("highlighted",e,!1,!1)});break;case UITouch_1.UITouchPhase.cancelled:this.firstTouchPoint=void 0,this.firstTouchCell=void 0,this._highlightedRow=void 0,Object.keys(this._cachedCells).map(function(e){return i._cachedCells[e]}).forEach(function(e){e.highlighted=!1,e.emit("highlighted",e,!1,!1)})}},t}(UIScrollView_1.UIScrollView);exports.UITableView=UITableView;var UITableViewSection=function(){function e(){this.rowsHeight=0,this.headerHeight=0,this.footerHeight=0,this.numberOfRows=0,this.rowHeights=[],this.headerView=void 0,this.footerView=void 0}return e.prototype.sectionHeight=function(){return this.headerHeight+this.rowsHeight+this.footerHeight},e.prototype.setNumberOfRows=function(e,t){this.numberOfRows=e,this.rowHeights=t},e}(),UITableViewCell=function(e){function t(){var t=e.call(this)||this;return t.selectionView=new UIView_1.UIView,t.contentView=new UIView_1.UIView,t.separatorElement=document.createElement("div"),t.reuseIdentifier=void 0,t.hasSelectionStyle=!0,t._selected=!1,t._highlighted=!1,t.currentIndexPath=void 0,t.currentSectionRecord=void 0,t.restoringContentViewBackgroundColor=void 0,t.selectionView.alpha=0,t.selectionView.backgroundColor=new UIColor_1.UIColor(208/255,208/255,208/255,1),t.contentView.backgroundColor=UIColor_1.UIColor.white,t.addSubview(t.selectionView),t.addSubview(t.contentView),t.domElement.appendChild(t.separatorElement),t}return __extends(t,e),Object.defineProperty(t.prototype,"selected",{get:function(){return this._selected},set:function(e){this._selected=e,this.onStateChanged()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"highlighted",{get:function(){return this._highlighted},set:function(e){this._highlighted=e,this.onStateChanged()},enumerable:!0,configurable:!0}),t.prototype.onStateChanged=function(){this.hasSelectionStyle&&(this.selected||this.highlighted?(null==this.restoringContentViewBackgroundColor&&(this.restoringContentViewBackgroundColor=this.contentView.backgroundColor),this.selectionView.alpha=1,this.contentView.backgroundColor=UIColor_1.UIColor.clear):(this.selectionView.alpha=0,null!=this.restoringContentViewBackgroundColor&&(this.contentView.backgroundColor=this.restoringContentViewBackgroundColor,this.restoringContentViewBackgroundColor=void 0)))},t.prototype.setSeparator=function(e,t,i){e||void 0===t?this.separatorElement.style.display="none":(this.separatorElement.style.display=null,this.separatorElement.style.position="absolute",this.separatorElement.style.borderTopStyle="solid",this.separatorElement.style.width="100%",this.separatorElement.style.borderTopWidth="1px",this.separatorElement.style.borderTopColor=t.toStyle(),this.separatorElement.style.marginLeft=i.left.toString()+"px",this.separatorElement.style.marginRight=i.right.toString()+"px")},t.prototype.layoutSubviews=function(){e.prototype.layoutSubviews.call(this),this.selectionView.frame=this.bounds,this.contentView.frame=this.bounds,this.separatorElement.style.marginTop=Math.floor(this.bounds.height-1).toString()+"px"},t}(UIView_1.UIView);exports.UITableViewCell=UITableViewCell;
    },{"./UIAnimator":25,"./UIColor":31,"./UIIndexPath":41,"./UIRect":54,"./UIScrollView":59,"./UITouch":71,"./UIView":72}],68:[function(require,module,exports){
    "use strict";var __extends=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(exports,"__esModule",{value:!0});var UITouch_1=require("./UITouch"),UIGestureRecognizer_1=require("./UIGestureRecognizer"),UIView_1=require("./UIView"),UITapGestureRecognizer=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.numberOfTapsRequired=1,t.numberOfTouchesRequired=1,t.beganPoints={},t.validPointsCount=0,t}return __extends(t,e),t.prototype.handleTouch=function(t){var n=this;e.prototype.handleTouch.call(this,t),t.forEach(function(e){if(e.phase==UITouch_1.UITouchPhase.began){if(null!=UIView_1.UIView.recognizedGesture)return void(n.beganPoints={});e.windowPoint&&(n.beganPoints[e.identifier]=e.windowPoint)}else if(e.phase==UITouch_1.UITouchPhase.moved)e.windowPoint&&n.beganPoints[e.identifier]&&(Math.abs(n.beganPoints[e.identifier].x-e.windowPoint.x)>=22||Math.abs(n.beganPoints[e.identifier].y-e.windowPoint.y)>=22)&&delete n.beganPoints[e.identifier];else if(e.phase==UITouch_1.UITouchPhase.ended){if(null!=UIView_1.UIView.recognizedGesture)return n.beganPoints={},n.state=UIGestureRecognizer_1.UIGestureRecognizerState.possible,void(n.validPointsCount=0);e.tapCount>=n.numberOfTapsRequired&&null!=n.beganPoints[e.identifier]&&n.validPointsCount++,delete n.beganPoints[e.identifier],n.validPointsCount>=n.numberOfTouchesRequired&&(UIView_1.UIView.recognizedGesture=n,n.state=UIGestureRecognizer_1.UIGestureRecognizerState.ended,n.handleEvent("touch"),n.emit("touch",n),setTimeout(function(){UIView_1.UIView.recognizedGesture=void 0},0)),0!=Object.keys(n.beganPoints).length&&n.state!=UIGestureRecognizer_1.UIGestureRecognizerState.ended||(n.state=UIGestureRecognizer_1.UIGestureRecognizerState.possible,n.validPointsCount=0)}})},t}(UIGestureRecognizer_1.UIGestureRecognizer);exports.UITapGestureRecognizer=UITapGestureRecognizer;
    },{"./UIGestureRecognizer":38,"./UITouch":71,"./UIView":72}],69:[function(require,module,exports){
    "use strict";var __extends=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(exports,"__esModule",{value:!0});var UIView_1=require("./UIView"),UIColor_1=require("./UIColor"),UILabel_1=require("./UILabel"),UIEnums_1=require("./UIEnums"),UIButton_1=require("./UIButton"),UIImage_1=require("./UIImage"),clearButtonImage=new UIImage_1.UIImage({name:"icon_clear@3x",base64:"iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAMAAADyHTlpAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAABjUExURUdwTKqqqo+OlZGRto+OlZOTmY+OlY+OlJCQlpCQlZGOlpGRnZCQmY+OlJCOlJCOlI+OlI+OlJCOlI+OlJCOlI+OlI+PlI+OlI+OlI+OlI+PlI+OlP///4+OlI+PlY+PlI+OlI/lPb8AAAAgdFJOUwAG4AfzLcP7VS5mFR7Zob+l/Y/eiPd89vXum/AB+HuJvx1C8wAAASxJREFUOMuVlUeigzAMRAWYXkMnEKL7n/LzaRaOKZoVwm+hMpYBjrLHLI2FiNNstOFCdl4gUZGf0VHyQkWvJNKARvlBjarSUMnQwRM54ZH0TTyV6R9IgRcShA1NvJS552A4eCNnq+2LtyrXflb3aLX0N5F/mp6ed638TuZpyhm9rSFwt8ANwHrLuf3PON/D1ppCb2VdbwqsZj/Mp1A6pJvzWdiZhEEmVEzdJ8kFO7uQEJBDH2oSrYDn7h/ksIYMNayGxAxS1LAaElOI8YRVSIxB9dTGqiQKDspIgFEWo1mPRzA+H6xN7dL/2AU6ahdiwubXhO3BhAdrA7X2oFqbXpi2ozX3jXJhIPo8voaMy81ZGYxFxFlvnKXJWcWcBc95NliP0VJfvT1xtVIN/AEiR40jdo0zSQAAAABJRU5ErkJggg==",renderingMode:UIImage_1.UIImageRenderingMode.alwaysOriginal}),NativeEditText=function(e){function t(){var t=e.call(this)||this;return t.inputElement=document.createElement("input"),t.inputElement.style.position="absolute",t.inputElement.style.backgroundColor="transparent",t.inputElement.style.width="100%",t.inputElement.style.height="100%",t.inputElement.style.border="none",t.inputElement.style.outline="none",t.inputElement.style.color="black",t.inputElement.style.fontSize="14px",t.inputElement.type="text","Apple Computer, Inc."===navigator.vendor&&"iPhone"===navigator.platform&&(t.inputElement.style.marginLeft="-8px",t.inputElement.style.marginTop="-3px"),t.domElement.appendChild(t.inputElement),t}return __extends(t,e),t}(UIView_1.UINativeTouchView),UITextField=function(e){function t(){var t=e.call(this)||this;return t.editText=new NativeEditText,t.placeholderLabel=new UILabel_1.UILabel,t._oldValue="",t._textColor=void 0,t._font=void 0,t._textAlignment=UIEnums_1.UITextAlignment.left,t.clearsOnBeginEditing=!1,t._editing=!1,t._clearButtonMode=UIEnums_1.UITextFieldViewMode.never,t._leftView=void 0,t._leftViewMode=UIEnums_1.UITextFieldViewMode.never,t._rightView=void 0,t._rightViewMode=UIEnums_1.UITextFieldViewMode.never,t.clearsOnInsertion=!1,t._autocapitalizationType=UIEnums_1.UITextAutocapitalizationType.none,t._autocorrectionType=UIEnums_1.UITextAutocorrectionType.default,t._spellCheckingType=UIEnums_1.UITextSpellCheckingType.default,t._keyboardType=UIEnums_1.UIKeyboardType.default,t.returnKeyType=UIEnums_1.UIReturnKeyType.default,t._secureTextEntry=!1,t.clearButtonView=(new UIButton_1.UIButton).on("touchUpInside",function(){!1!==t.val("shouldClear")&&(t.text="")}),t.backgroundColor=UIColor_1.UIColor.white,t.addSubview(t.editText),t.clearButtonView.hidden=!0,t.clearButtonView.setImage(clearButtonImage,UIEnums_1.UIControlState.normal),t.addSubview(t.clearButtonView),t.placeholderLabel.alpha=.25,t.addSubview(t.placeholderLabel),t.editText.inputElement.addEventListener("focus",function(){!1!==t.val("shouldBeginEditing",t)?(t.editing=!0,t.clearsOnBeginEditing&&(t.text=""),t._oldValue=t.editText.inputElement.value,t.emit("didBeginEditing",t)):t.editText.inputElement.blur()}),t.editText.inputElement.addEventListener("blur",function(){!1!==t.val("shouldEndEditing",t)?(t.editing=!1,t.emit("didEndEditing",t)):t.editText.inputElement.focus()}),t.editText.inputElement.addEventListener("input",function(e){t.keyboardType!==UIEnums_1.UIKeyboardType.numberPad&&t.keyboardType!==UIEnums_1.UIKeyboardType.decimalPad||t.editText.inputElement.checkValidity()||(t.editText.inputElement.value=t._oldValue),"insertText"===e.inputType&&!1===t.val("shouldChange",t,{location:0,length:0},e.data)&&(t.editText.inputElement.value=t._oldValue),t._oldValue=t.editText.inputElement.value,t.reloadExtraContents()}),t.editText.inputElement.addEventListener("keyup",function(e){13===e.keyCode&&(t.val("shouldReturn",t),e.preventDefault())}),t}return __extends(t,e),Object.defineProperty(t.prototype,"text",{get:function(){return this.editText.inputElement.value||""},set:function(e){this.editText.inputElement.value=e,this.reloadExtraContents()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"textColor",{get:function(){return this._textColor},set:function(e){this._textColor=e,this.editText.inputElement.style.color=e?e.toStyle():null,this.placeholderLabel.textColor=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"font",{get:function(){return this._font},set:function(e){this._font=e,e?(this.editText.inputElement.style.fontSize=e.pointSize.toString()+"px",this.editText.inputElement.style.fontFamily="string"==typeof e.fontName?e.fontName:null,this.editText.inputElement.style.fontWeight="string"==typeof e.fontStyle?e.fontStyle:null,this.editText.inputElement.style.fontStyle="string"==typeof e.fontStyle?e.fontStyle:null):(this.editText.inputElement.style.fontSize="14px",this.editText.inputElement.style.fontFamily=null,this.editText.inputElement.style.fontWeight=null,this.editText.inputElement.style.fontStyle=null),this.placeholderLabel.font=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"textAlignment",{get:function(){return this._textAlignment},set:function(e){switch(this._textAlignment=e,e){case UIEnums_1.UITextAlignment.left:this.editText.inputElement.style.textAlign="left";break;case UIEnums_1.UITextAlignment.center:this.editText.inputElement.style.textAlign="center";break;case UIEnums_1.UITextAlignment.right:this.editText.inputElement.style.textAlign="right"}this.placeholderLabel.textAlignment=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"placeholder",{get:function(){return this.placeholderLabel.text},set:function(e){this.placeholderLabel.text=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"editing",{get:function(){return this._editing},set:function(e){this._editing=e,this.reloadExtraContents()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"clearButtonMode",{get:function(){return this._clearButtonMode},set:function(e){this._clearButtonMode=e,this.reloadExtraContents()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"leftView",{get:function(){return this._leftView},set:function(e){this._leftView&&this._leftView.removeFromSuperview(),this._leftView=e,this.reloadExtraContents()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"leftViewMode",{get:function(){return this._leftViewMode},set:function(e){this._leftViewMode=e,this.reloadExtraContents()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rightView",{get:function(){return this._rightView},set:function(e){this._rightView&&this._rightView.removeFromSuperview(),this._rightView=e,this.reloadExtraContents()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rightViewMode",{get:function(){return this._rightViewMode},set:function(e){this._rightViewMode=e,this.reloadExtraContents()},enumerable:!0,configurable:!0}),t.prototype.focus=function(){!1!==this.val("shouldBeginEditing",this)&&this.editText.inputElement.focus()},t.prototype.blur=function(){!1!==this.val("shouldEndEditing",this)&&this.editText.inputElement.blur()},Object.defineProperty(t.prototype,"autocapitalizationType",{get:function(){return this._autocapitalizationType},set:function(e){switch(this._autocapitalizationType=e,e){case UIEnums_1.UITextAutocapitalizationType.none:this.editText.inputElement.autocapitalize="off";break;case UIEnums_1.UITextAutocapitalizationType.allCharacters:this.editText.inputElement.autocapitalize="characters";break;case UIEnums_1.UITextAutocapitalizationType.sentences:this.editText.inputElement.autocapitalize="sentences";break;case UIEnums_1.UITextAutocapitalizationType.words:this.editText.inputElement.autocapitalize="words"}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"autocorrectionType",{get:function(){return this._autocorrectionType},set:function(e){this._autocorrectionType=e,e==UIEnums_1.UITextAutocorrectionType.yes?this.editText.inputElement.setAttribute("autocorrect","on"):this.editText.inputElement.setAttribute("autocorrect","off")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"spellCheckingType",{get:function(){return this._spellCheckingType},set:function(e){this._spellCheckingType=e,this.editText.inputElement.spellcheck=e!==UIEnums_1.UITextSpellCheckingType.no},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"keyboardType",{get:function(){return this._keyboardType},set:function(e){this._keyboardType=e,this.resetInputType()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"secureTextEntry",{get:function(){return this._secureTextEntry},set:function(e){this._secureTextEntry=e,this.resetInputType()},enumerable:!0,configurable:!0}),t.prototype.resetInputType=function(){this.secureTextEntry?this.editText.inputElement.type="password":this.keyboardType==UIEnums_1.UIKeyboardType.numberPad?(this.editText.inputElement.type="number",this.editText.inputElement.step=""):this.keyboardType==UIEnums_1.UIKeyboardType.decimalPad?(this.editText.inputElement.type="number",this.editText.inputElement.step="0.0000001"):this.keyboardType==UIEnums_1.UIKeyboardType.phonePad?this.editText.inputElement.type="tel":this.keyboardType==UIEnums_1.UIKeyboardType.emailAddress?this.editText.inputElement.type="email":this.editText.inputElement.type="text"},t.prototype.layoutSubviews=function(){e.prototype.layoutSubviews.call(this),this.reloadExtraContents()},t.prototype.reloadExtraContents=function(){var e=this;this.placeholderLabel.hidden=void 0!==this.text&&this.text.length>0;var t=e.clearButtonMode==UIEnums_1.UITextFieldViewMode.always||!e.editing&&e.clearButtonMode==UIEnums_1.UITextFieldViewMode.unlessEditing||!!(e.editing&&e.clearButtonMode==UIEnums_1.UITextFieldViewMode.whileEditing&&e.text&&e.text.length>0),i=!t&&null!=e.rightView&&(e.rightViewMode==UIEnums_1.UITextFieldViewMode.always||!e.editing&&e.rightViewMode==UIEnums_1.UITextFieldViewMode.unlessEditing||!(!e.editing||e.rightViewMode!=UIEnums_1.UITextFieldViewMode.whileEditing)),n=null!=e.leftView&&(e.leftViewMode==UIEnums_1.UITextFieldViewMode.always||!e.editing&&e.leftViewMode==UIEnums_1.UITextFieldViewMode.unlessEditing||!(!e.editing||e.leftViewMode!=UIEnums_1.UITextFieldViewMode.whileEditing));this.clearButtonView.hidden=!t,this.clearButtonView.frame={x:this.bounds.width-36,y:(this.bounds.height-44)/2,width:36,height:44},n?this.leftView&&(this.addSubview(this.leftView),this.leftView.frame={x:0,y:(this.bounds.height-this.leftView.frame.height)/2,width:this.leftView.frame.width,height:this.leftView.frame.height}):this.leftView&&this.leftView.removeFromSuperview(),i?this.rightView&&(this.addSubview(this.rightView),this.rightView.frame={x:this.bounds.width-this.rightView.frame.width,y:(this.bounds.height-this.rightView.frame.height)/2,width:this.rightView.frame.width,height:this.rightView.frame.height}):this.rightView&&this.rightView.removeFromSuperview(),this.editText.frame={x:n&&void 0!==this.leftView?this.leftView.frame.width+1:0,y:0,width:this.bounds.width-(n&&void 0!==this.leftView?this.leftView.frame.width+1:0)-(i&&this.rightView?this.rightView.frame.width+1:0)-(t?36:0),height:this.bounds.height},this.placeholderLabel.frame=this.editText.frame},t}(UIView_1.UIView);exports.UITextField=UITextField;
    },{"./UIButton":28,"./UIColor":31,"./UIEnums":35,"./UIImage":39,"./UILabel":42,"./UIView":72}],70:[function(require,module,exports){
    "use strict";var __extends=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(exports,"__esModule",{value:!0});var UIView_1=require("./UIView"),UIColor_1=require("./UIColor"),UIEnums_1=require("./UIEnums"),NativeEditText=function(t){function e(){var e=t.call(this)||this;return e.inputElement=document.createElement("textarea"),e.inputElement.style.position="absolute",e.inputElement.style.backgroundColor="transparent",e.inputElement.style.width="100%",e.inputElement.style.height="100%",e.inputElement.style.border="none",e.inputElement.style.outline="none",e.inputElement.style.color="black",e.inputElement.style.fontSize="14px",e.domElement.appendChild(e.inputElement),e}return __extends(e,t),e}(UIView_1.UINativeTouchView),UITextView=function(t){function e(){var e=t.call(this)||this;return e.editText=new NativeEditText,e._oldValue="",e._textColor=void 0,e._font=void 0,e._textAlignment=UIEnums_1.UITextAlignment.left,e._editable=!0,e._selectable=!0,e.editing=!1,e.clearsOnInsertion=!1,e._autocapitalizationType=UIEnums_1.UITextAutocapitalizationType.none,e._autocorrectionType=UIEnums_1.UITextAutocorrectionType.default,e._spellCheckingType=UIEnums_1.UITextSpellCheckingType.default,e.keyboardType=UIEnums_1.UIKeyboardType.default,e.returnKeyType=UIEnums_1.UIReturnKeyType.default,e.secureTextEntry=!1,e.backgroundColor=UIColor_1.UIColor.white,e.addSubview(e.editText),e.editText.inputElement.addEventListener("focus",function(){!1!==e.val("shouldBeginEditing",e)?(e.editing=!0,e._oldValue=e.editText.inputElement.value,e.emit("didBeginEditing",e)):e.editText.inputElement.blur()}),e.editText.inputElement.addEventListener("blur",function(){!1!==e.val("shouldEndEditing",e)?(e.editing=!1,e.emit("didEndEditing",e)):e.editText.inputElement.focus()}),e.editText.inputElement.addEventListener("input",function(t){e.keyboardType!==UIEnums_1.UIKeyboardType.numberPad&&e.keyboardType!==UIEnums_1.UIKeyboardType.decimalPad||e.editText.inputElement.checkValidity()||(e.editText.inputElement.value=e._oldValue),"insertText"===t.inputType&&!1===e.val("shouldChange",e,{location:0,length:0},t.data)&&(e.editText.inputElement.value=e._oldValue),e._oldValue=e.editText.inputElement.value}),e}return __extends(e,t),Object.defineProperty(e.prototype,"text",{get:function(){return this.editText.inputElement.value||""},set:function(t){this.editText.inputElement.value=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"textColor",{get:function(){return this._textColor},set:function(t){this._textColor=t,this.editText.inputElement.style.color=t?t.toStyle():null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"font",{get:function(){return this._font},set:function(t){this._font=t,t?(this.editText.inputElement.style.fontSize=t.pointSize.toString()+"px",this.editText.inputElement.style.fontFamily="string"==typeof t.fontName?t.fontName:null,this.editText.inputElement.style.fontWeight="string"==typeof t.fontStyle?t.fontStyle:null,this.editText.inputElement.style.fontStyle="string"==typeof t.fontStyle?t.fontStyle:null):(this.editText.inputElement.style.fontSize="14px",this.editText.inputElement.style.fontFamily=null,this.editText.inputElement.style.fontWeight=null,this.editText.inputElement.style.fontStyle=null)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"textAlignment",{get:function(){return this._textAlignment},set:function(t){switch(this._textAlignment=t,t){case UIEnums_1.UITextAlignment.left:this.editText.inputElement.style.textAlign="left";break;case UIEnums_1.UITextAlignment.center:this.editText.inputElement.style.textAlign="center";break;case UIEnums_1.UITextAlignment.right:this.editText.inputElement.style.textAlign="right"}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"editable",{get:function(){return this._editable},set:function(t){this._editable=t,this.editText.inputElement.readOnly=!t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectable",{get:function(){return this._selectable},set:function(t){this._selectable=t,this.editText.inputElement.style.userSelect=t?"auto":"none"},enumerable:!0,configurable:!0}),e.prototype.focus=function(){!1!==this.val("shouldBeginEditing",this)&&this.editText.inputElement.focus()},e.prototype.blur=function(){!1!==this.val("shouldEndEditing",this)&&this.editText.inputElement.blur()},Object.defineProperty(e.prototype,"autocapitalizationType",{get:function(){return this._autocapitalizationType},set:function(t){switch(this._autocapitalizationType=t,t){case UIEnums_1.UITextAutocapitalizationType.none:this.editText.inputElement.autocapitalize="off";break;case UIEnums_1.UITextAutocapitalizationType.allCharacters:this.editText.inputElement.autocapitalize="characters";break;case UIEnums_1.UITextAutocapitalizationType.sentences:this.editText.inputElement.autocapitalize="sentences";break;case UIEnums_1.UITextAutocapitalizationType.words:this.editText.inputElement.autocapitalize="words"}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"autocorrectionType",{get:function(){return this._autocorrectionType},set:function(t){this._autocorrectionType=t,t==UIEnums_1.UITextAutocorrectionType.yes?this.editText.inputElement.setAttribute("autocorrect","on"):this.editText.inputElement.setAttribute("autocorrect","off")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"spellCheckingType",{get:function(){return this._spellCheckingType},set:function(t){this._spellCheckingType=t,this.editText.inputElement.spellcheck=t!==UIEnums_1.UITextSpellCheckingType.no},enumerable:!0,configurable:!0}),e.prototype.layoutSubviews=function(){t.prototype.layoutSubviews.call(this),this.editText.frame={x:4,y:4,width:this.bounds.width-8,height:this.bounds.height-8}},e}(UIView_1.UIView);exports.UITextView=UITextView;
    },{"./UIColor":31,"./UIEnums":35,"./UIView":72}],71:[function(require,module,exports){
    "use strict";var __assign=this&&this.__assign||function(){return(__assign=Object.assign||function(t){for(var e,o=1,i=arguments.length;o<i;o++)for(var n in e=arguments[o])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}).apply(this,arguments)};Object.defineProperty(exports,"__esModule",{value:!0});var UITouchPhase,UIPoint_1=require("./UIPoint");!function(t){t[t.began=0]="began",t[t.moved=1]="moved",t[t.stationary=2]="stationary",t[t.ended=3]="ended",t[t.cancelled=4]="cancelled"}(UITouchPhase=exports.UITouchPhase||(exports.UITouchPhase={}));var UITouch=function(){function t(){this.identifier=0,this.timestamp=0,this.phase=UITouchPhase.cancelled,this.tapCount=0,this.window=void 0,this.windowPoint=void 0,this.view=void 0,this.gestureRecognizers=[]}return t.prototype.locationInView=function(t){var e=t||this.view;if(void 0===e)return UIPoint_1.UIPointZero;var o=this.windowPoint||UIPoint_1.UIPointZero;return e.convertPointFromWindow(o)||UIPoint_1.UIPointZero},t.prototype.previousLocationInView=function(t){return UIPoint_1.UIPointZero},t}();exports.UITouch=UITouch;var VelocityTracker=function(){function t(){this.movements=[],this.velocity={x:0,y:0}}return t.prototype.reset=function(){this.movements=[],this.velocity={x:0,y:0}},t.prototype.addMovement=function(t){this.movements.push(__assign({},t))},t.prototype.computeCurrentVelocity=function(){for(var t=this.movements.length-1;t>=1;t--){var e=this.movements[t],o=this.movements[t-1];if(e.windowPoint&&o.windowPoint){if(e.phase==UITouchPhase.ended&&o.phase==UITouchPhase.moved&&e.timestamp-o.timestamp>.024){this.velocity={x:0,y:0};break}if(e.phase==UITouchPhase.moved&&o.phase==UITouchPhase.moved){var i=e.timestamp-o.timestamp;if(i>.002){this.velocity={x:(e.windowPoint.x-o.windowPoint.x)/i,y:(e.windowPoint.y-o.windowPoint.y)/i};break}}}}},t}();exports.VelocityTracker=VelocityTracker;
    },{"./UIPoint":50}],72:[function(require,module,exports){
    "use strict";var __extends=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),__assign=this&&this.__assign||function(){return(__assign=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},__values=this&&this.__values||function(e){var t="function"==typeof Symbol&&e[Symbol.iterator],i=0;return t?t.call(e):{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}}},__read=this&&this.__read||function(e,t){var i="function"==typeof Symbol&&e[Symbol.iterator];if(!i)return e;var n,o,r=i.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=r.next()).done;)a.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(i=r.return)&&i.call(r)}finally{if(o)throw o.error}}return a};Object.defineProperty(exports,"__esModule",{value:!0});var UIRect_1=require("./UIRect"),UIColor_1=require("./UIColor"),CALayer_1=require("../coregraphics/CALayer"),UIAffineTransform_1=require("./UIAffineTransform"),UIEnums_1=require("./UIEnums"),EventEmitter_1=require("../kimi/EventEmitter"),Matrix_1=require("./helpers/Matrix"),UITouch_1=require("./UITouch"),UIEdgeInsets_1=require("./UIEdgeInsets"),UIAnimator_1=require("./UIAnimator"),Router_1=require("./helpers/Router");exports.sharedVelocityTracker=new UITouch_1.VelocityTracker;var UIView=function(e){function t(){var t=e.call(this)||this;return t.domElement=document.createElement("div"),t._layer=void 0,t._frame=UIRect_1.UIRectZero,t.viewDelegate=void 0,t.bounds=UIRect_1.UIRectZero,t._transform=UIAffineTransform_1.UIAffineTransformIdentity,t.touchAreaInsets=UIEdgeInsets_1.UIEdgeInsetsZero,t.tag=0,t.superview=void 0,t._subviews=[],t._clipsToBounds=!1,t._backgroundColor=void 0,t._alpha=1,t._hidden=!1,t._opaque=!1,t._contentMode=UIEnums_1.UIViewContentMode.scaleToFill,t._tintColor=void 0,t._userInteractionEnabled=!0,t.gestureRecognizers=[],t.isAccessibilityElement=!1,t.backgroundColor_animations=[],t.frame_animations=[],t.transform_animations=[],t.domElement.style.position="absolute",t.domElement.style.userSelect="none",t.domElement.style.webkitUserSelect="none",t.domElement.style.setProperty("webkitTouchCallout","none"),t.layer.view=t,t}return __extends(t,e),t.prototype.attachToElement=function(e,t,i,n){var o=this;void 0===t&&(t=void 0),void 0===i&&(i=UIEdgeInsets_1.UIEdgeInsetsZero),void 0===n&&(n=!1),!0!==n&&(e.innerHTML=""),e==document.body&&(document.body.style.width="100%",document.body.style.height="100%",document.body.style.overflow="hidden",document.body.style.margin="0",document.addEventListener("contextmenu",function(e){return e.preventDefault()}),document.documentElement&&(document.documentElement.style.userSelect="none",document.documentElement.style.webkitUserSelect="none",document.documentElement.style.setProperty("webkitTouchCallout","none")),document.getElementsByTagName("html")[0].style.height="100%",document.getElementsByTagName("html")[0].style.overflow="hidden");var r=function(){if(o instanceof UIWindow)return o;var e=new UIWindow;return e.clipsToBounds=!0,void 0!==t&&!0===t._isUIViewController?e.rootViewController=t:e.addSubview(o),e}();e.appendChild(r.domElement),window.addEventListener("resize",function(){o.onResize(e,r,i)}),this.onResize(e,r,i)},t.prototype.onResize=function(e,t,i){t.frame={x:i.left,y:i.top,width:e.clientWidth-i.left-i.right,height:e.clientHeight-i.top-i.bottom}},Object.defineProperty(t.prototype,"layer",{get:function(){return void 0===this._layer&&(this._layer=new CALayer_1.CALayer),this._layer},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"subviews",{get:function(){return this._subviews},set:function(e){this._subviews=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"window",{get:function(){return this instanceof UIWindow?this:this.superview?this.superview.window:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"viewController",{get:function(){return void 0!==this.viewDelegate?this.viewDelegate:this.superview?this.superview.viewController:void 0},enumerable:!0,configurable:!0}),t.prototype.removeFromSuperview=function(){var e=this;if(void 0!==this.superview){var t=this.superview;t.willRemoveSubview(this),this.willMoveToSuperview(void 0),t.subviews=this.superview.subviews.filter(function(t){return t!==e}),t.domElement.removeChild(this.domElement),this.superview=void 0,this.didMoveToSuperview(),this.didRemovedFromWindow()}else this.domElement.parentElement instanceof HTMLElement&&this.domElement.parentElement.removeChild(this.domElement)},t.prototype.didRemovedFromWindow=function(){this.subviews.forEach(function(e){return e.didRemovedFromWindow()})},t.prototype.insertSubviewAtIndex=function(e,t){void 0!==e.superview&&e.removeFromSuperview(),e.willMoveToSuperview(this),e.superview=this,this._subviews.splice(t,0,e),this.domElement.insertBefore(e.domElement,this.domElement.children[t]),this.setNeedsDisplay(),e.didMoveToSuperview(),this.didAddSubview(e)},t.prototype.exchangeSubview=function(e,t){if(e<t){var i=this._subviews[e],n=this._subviews[t];this.domElement.removeChild(i.domElement),this.domElement.insertBefore(i.domElement,n.domElement),this.domElement.removeChild(n.domElement),this.domElement.insertBefore(n.domElement,this.domElement.children[e])}else if(e>t){i=this._subviews[e];var o=this._subviews[t];this.domElement.removeChild(o.domElement),this.domElement.insertBefore(o.domElement,i.domElement),this.domElement.removeChild(i.domElement),this.domElement.insertBefore(i.domElement,this.domElement.children[t])}var r=this._subviews[t];this._subviews[t]=this._subviews[e],this._subviews[e]=r},t.prototype.addSubview=function(e){void 0!==e.superview&&e.removeFromSuperview(),e.willMoveToSuperview(this),this.window&&e.willMoveToWindow(this.window),e.superview=this,this._subviews.push(e),this.domElement.appendChild(e.domElement),this.setNeedsDisplay(),e.didMoveToSuperview(),this.didAddSubview(e),e.didMoveToWindow()},t.prototype.insertSubviewBelowSubview=function(e,t){var i=this._subviews.indexOf(t);i>=0&&this.insertSubviewAtIndex(e,i)},t.prototype.insertSubviewAboveSubview=function(e,t){var i=this._subviews.indexOf(t);i>=0&&this.insertSubviewAtIndex(e,i+1)},t.prototype.bringSubviewToFront=function(e){var t=this._subviews.indexOf(e);t>=0&&(this._subviews.splice(t,1),this._subviews.push(e),this.domElement.removeChild(e.domElement),this.domElement.appendChild(e.domElement))},t.prototype.sendSubviewToBack=function(e){var t=this._subviews.indexOf(e);t>=0&&(this._subviews.splice(t,1),this._subviews.unshift(e),this.domElement.removeChild(e.domElement),this.domElement.insertBefore(e.domElement,this.domElement.firstChild))},t.prototype.isDescendantOfView=function(e){for(var t=this;null!=t;){if(t==e)return!0;t=t.superview}return!1},t.prototype.viewWithTag=function(e){for(var t=0;t<this.subviews.length;t++){var i=this.subviews[t];if(i.tag===e)return i;var n=i.viewWithTag(e);if(void 0!==n)return n}},t.prototype.didAddSubview=function(e){this.viewDelegate&&this.viewDelegate.didAddSubview(e)},t.prototype.willRemoveSubview=function(e){},t.prototype.willMoveToSuperview=function(e){},t.prototype.didMoveToSuperview=function(){this.tintColorDidChange()},t.prototype.willMoveToWindow=function(e){this.subviews.forEach(function(t){return t.willMoveToWindow(e)})},t.prototype.didMoveToWindow=function(){this.subviews.forEach(function(e){return e.didMoveToWindow()})},t.prototype.setNeedsLayout=function(e){void 0===e&&(e=!1),e&&this.layoutIfNeeded()},t.prototype.layoutIfNeeded=function(){this.layoutSubviews()},t.prototype.layoutSubviews=function(){this.viewDelegate&&(this.viewDelegate.viewWillLayoutSubviews(),this.viewDelegate.viewDidLayoutSubviews())},t.prototype.setNeedsDisplay=function(){},t.prototype.tintColorDidChange=function(){this._subviews.forEach(function(e){return e.tintColorDidChange()})},Object.defineProperty(t.prototype,"userInteractionEnabled",{get:function(){return this._userInteractionEnabled},set:function(e){this._userInteractionEnabled!==e&&(this._userInteractionEnabled=e,this.domElement.style.pointerEvents=e?"auto":"none")},enumerable:!0,configurable:!0}),t.prototype.addGestureRecognizer=function(e){this.gestureRecognizers.push(e)},t.prototype.removeGestureRecognizer=function(e){var t=this.gestureRecognizers.indexOf(e);t>=0&&this.gestureRecognizers.splice(t,1)},t.prototype.endEditing=function(){},Object.defineProperty(t.prototype,"alpha",{get:function(){return this._alpha},set:function(e){var t=this;if(UIAnimator_1.UIAnimator.duringAnimationValueSet||this.alpha_animation&&(this.alpha_animation.cancel(),this.alpha_animation=void 0),UIAnimator_1.UIAnimator.activeAnimator&&!UIAnimator_1.UIAnimator.duringAnimationValueSet&&UIAnimator_1.UIAnimator.activeAnimator.animationCreater){var i=UIAnimator_1.UIAnimator.activeAnimator.animationCreater();return this.alpha_animation=i,i.setUpdateListener(function(e){UIAnimator_1.UIAnimator.duringAnimationValueSet=!0,t.alpha=e,UIAnimator_1.UIAnimator.duringAnimationValueSet=!1}),i.setStartValue(this.alpha),void i.setEndValue(e)}this._alpha!==e&&(this._alpha=e,this.resetDisplayStyle(),this.domElement.style.opacity=e.toString())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"backgroundColor",{get:function(){return this._backgroundColor},set:function(e){var t=this;if(UIAnimator_1.UIAnimator.duringAnimationValueSet||this.backgroundColor_animations&&(this.backgroundColor_animations.forEach(function(e){return e.cancel()}),this.backgroundColor_animations=[]),UIAnimator_1.UIAnimator.activeAnimator&&!UIAnimator_1.UIAnimator.duringAnimationValueSet&&UIAnimator_1.UIAnimator.activeAnimator.animationCreater&&this._backgroundColor&&e){var i,n=[];this._backgroundColor.r!=e.r&&((i=UIAnimator_1.UIAnimator.activeAnimator.animationCreater()).setUpdateListener(function(e){var i=t.backgroundColor;i&&(UIAnimator_1.UIAnimator.duringAnimationValueSet=!0,t.backgroundColor=new UIColor_1.UIColor(Math.max(0,Math.min(1,e)),i.g,i.b,i.a),UIAnimator_1.UIAnimator.duringAnimationValueSet=!1)}),i.setStartValue(this._backgroundColor.r),i.setEndValue(e.r),n.push(i)),this._backgroundColor.g!=e.g&&((i=UIAnimator_1.UIAnimator.activeAnimator.animationCreater()).setUpdateListener(function(e){var i=t.backgroundColor;i&&(UIAnimator_1.UIAnimator.duringAnimationValueSet=!0,t.backgroundColor=new UIColor_1.UIColor(i.r,Math.max(0,Math.min(1,e)),i.b,i.a),UIAnimator_1.UIAnimator.duringAnimationValueSet=!1)}),i.setStartValue(this._backgroundColor.g),i.setEndValue(e.g),n.push(i)),this._backgroundColor.b!=e.b&&((i=UIAnimator_1.UIAnimator.activeAnimator.animationCreater()).setUpdateListener(function(e){var i=t.backgroundColor;i&&(UIAnimator_1.UIAnimator.duringAnimationValueSet=!0,t.backgroundColor=new UIColor_1.UIColor(i.r,i.g,Math.max(0,Math.min(1,e)),i.a),UIAnimator_1.UIAnimator.duringAnimationValueSet=!1)}),i.setStartValue(this._backgroundColor.b),i.setEndValue(e.b),n.push(i)),this._backgroundColor.a!=e.a&&((i=UIAnimator_1.UIAnimator.activeAnimator.animationCreater()).setUpdateListener(function(e){var i=t.backgroundColor;i&&(UIAnimator_1.UIAnimator.duringAnimationValueSet=!0,t.backgroundColor=new UIColor_1.UIColor(i.r,i.g,i.b,Math.max(0,Math.min(1,e))),UIAnimator_1.UIAnimator.duringAnimationValueSet=!1)}),i.setStartValue(this._backgroundColor.a),i.setEndValue(e.a),n.push(i)),this.backgroundColor_animations=n}else this._backgroundColor&&e&&this._backgroundColor.r===e.r&&this._backgroundColor.g===e.g&&this._backgroundColor.b===e.b&&this._backgroundColor.a===e.a||(this._backgroundColor=e,e&&e.a<=0?this.domElement.style.backgroundColor=null:this.domElement.style.backgroundColor=e?e.toStyle():null)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"frame",{get:function(){return this._frame},set:function(e){var t=this;if(UIAnimator_1.UIAnimator.duringAnimationValueSet||(this.frame_animations.forEach(function(e){return e.cancel()}),this.frame_animations=[]),UIAnimator_1.UIAnimator.activeAnimator&&!UIAnimator_1.UIAnimator.duringAnimationValueSet&&UIAnimator_1.UIAnimator.activeAnimator.animationCreater){var i,n=[];this._frame.x!==e.x&&((i=UIAnimator_1.UIAnimator.activeAnimator.animationCreater()).setUpdateListener(function(e){UIAnimator_1.UIAnimator.duringAnimationValueSet=!0,t.frame=__assign({},t.frame,{x:e}),UIAnimator_1.UIAnimator.duringAnimationValueSet=!1}),i.setStartValue(this._frame.x),i.setEndValue(e.x),n.push(i)),this._frame.y!==e.y&&((i=UIAnimator_1.UIAnimator.activeAnimator.animationCreater()).setUpdateListener(function(e){UIAnimator_1.UIAnimator.duringAnimationValueSet=!0,t.frame=__assign({},t.frame,{y:e}),UIAnimator_1.UIAnimator.duringAnimationValueSet=!1}),i.setStartValue(this._frame.y),i.setEndValue(e.y),n.push(i)),this._frame.width!==e.width&&((i=UIAnimator_1.UIAnimator.activeAnimator.animationCreater()).setUpdateListener(function(e){UIAnimator_1.UIAnimator.duringAnimationValueSet=!0,t.frame=__assign({},t.frame,{width:e}),UIAnimator_1.UIAnimator.duringAnimationValueSet=!1}),i.setStartValue(this._frame.width),i.setEndValue(e.width),n.push(i)),this._frame.height!==e.height&&((i=UIAnimator_1.UIAnimator.activeAnimator.animationCreater()).setUpdateListener(function(e){UIAnimator_1.UIAnimator.duringAnimationValueSet=!0,t.frame=__assign({},t.frame,{height:e}),UIAnimator_1.UIAnimator.duringAnimationValueSet=!1}),i.setStartValue(this._frame.height),i.setEndValue(e.height),n.push(i)),this.frame_animations=n}else if(!UIRect_1.UIRectEqualToRect(this._frame,e)){var o=this._frame,r=this._frame.width!=e.width||this._frame.height!=e.height;this._frame=e,r&&(this.bounds={x:0,y:0,width:e.width,height:e.height},this.layer.frame={x:0,y:0,width:e.width,height:e.height}),this.setNeedsLayout(r),(Math.abs(o.x-e.x)>.001||Math.abs(o.y-e.y)>.001)&&this.resetOriginAndTransform(),Math.abs(o.width-e.width)>.001&&(this.domElement.style.width=e.width.toString()+"px"),Math.abs(o.height-e.height)>.001&&(this.domElement.style.height=e.height.toString()+"px")}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"center",{get:function(){return{x:this.frame.x+this.frame.width/2,y:this.frame.y+this.frame.height/2}},set:function(e){this.frame={x:e.x-this.frame.width/2,y:e.y-this.frame.height/2,width:this.frame.width,height:this.frame.height}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"transform",{get:function(){return this._transform},set:function(e){var t=this;if(UIAnimator_1.UIAnimator.duringAnimationValueSet||(this.transform_animations.forEach(function(e){return e.cancel()}),this.transform_animations=[]),UIAnimator_1.UIAnimator.activeAnimator&&!UIAnimator_1.UIAnimator.duringAnimationValueSet&&UIAnimator_1.UIAnimator.activeAnimator.animationCreater){var i,n=[],o=Matrix_1.Matrix.unmatrix(this._transform),r=Matrix_1.Matrix.unmatrix(e);o.scale.x!=r.scale.x&&((i=UIAnimator_1.UIAnimator.activeAnimator.animationCreater()).setUpdateListener(function(e){var i=new Matrix_1.Matrix;i.setValues(t._transform),i.setScale(e),UIAnimator_1.UIAnimator.duringAnimationValueSet=!0,t.transform=i.getValues(),UIAnimator_1.UIAnimator.duringAnimationValueSet=!1}),i.setStartValue(o.scale.x),i.setEndValue(r.scale.x),n.push(i)),o.scale.y!=r.scale.y&&((i=UIAnimator_1.UIAnimator.activeAnimator.animationCreater()).setUpdateListener(function(e){var i=new Matrix_1.Matrix;i.setValues(t._transform),i.setScale(void 0,e),UIAnimator_1.UIAnimator.duringAnimationValueSet=!0,t.transform=i.getValues(),UIAnimator_1.UIAnimator.duringAnimationValueSet=!1}),i.setStartValue(o.scale.y),i.setEndValue(r.scale.y),n.push(i)),o.degree!=r.degree&&((i=UIAnimator_1.UIAnimator.activeAnimator.animationCreater()).setUpdateListener(function(e){var i=new Matrix_1.Matrix;i.setValues(t._transform),i.setRotate(e*Math.PI/180),UIAnimator_1.UIAnimator.duringAnimationValueSet=!0,t.transform=i.getValues(),UIAnimator_1.UIAnimator.duringAnimationValueSet=!1}),i.setStartValue(o.degree),i.setEndValue(r.degree),n.push(i)),o.translate.x!=r.translate.x&&((i=UIAnimator_1.UIAnimator.activeAnimator.animationCreater()).setUpdateListener(function(e){var i=new Matrix_1.Matrix;i.setValues(t._transform),i.setTranslate(e),UIAnimator_1.UIAnimator.duringAnimationValueSet=!0,t.transform=i.getValues(),UIAnimator_1.UIAnimator.duringAnimationValueSet=!1}),i.setStartValue(o.translate.x),i.setEndValue(r.translate.x),n.push(i)),o.translate.y!=r.translate.y&&((i=UIAnimator_1.UIAnimator.activeAnimator.animationCreater()).setUpdateListener(function(e){var i=new Matrix_1.Matrix;i.setValues(t._transform),i.setTranslate(void 0,e),UIAnimator_1.UIAnimator.duringAnimationValueSet=!0,t.transform=i.getValues(),UIAnimator_1.UIAnimator.duringAnimationValueSet=!1}),i.setStartValue(o.translate.y),i.setEndValue(r.translate.y),n.push(i))}else UIAffineTransform_1.UIAffineTransformEqualToTransform(this._transform,e)||(this._transform=e,this.resetOriginAndTransform())},enumerable:!0,configurable:!0}),t.prototype.resetOriginAndTransform=function(){UIAffineTransform_1.UIAffineTransformIsIdentity(this._transform)?(this.domElement.style.left=null,this.domElement.style.top=null,this.domElement.style.transform="translate("+this.frame.x+"px, "+this.frame.y+"px)"):(this.domElement.style.left=this.frame.x+"px",this.domElement.style.top=this.frame.y+"px",this.domElement.style.transform="matrix("+this.transform.a+", "+this.transform.b+", "+this.transform.c+", "+this.transform.d+", "+this.transform.tx+", "+this.transform.ty+")"),this.domElement.style.webkitTransform=this.domElement.style.transform},Object.defineProperty(t.prototype,"clipsToBounds",{get:function(){return this._clipsToBounds},set:function(e){this._clipsToBounds!==e&&(this._clipsToBounds=e,this.domElement.style.overflow=e?"hidden":null)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hidden",{get:function(){return this._hidden},set:function(e){this._hidden!==e&&(this._hidden=e,this.resetDisplayStyle(),this.visibilityChanged())},enumerable:!0,configurable:!0}),t.prototype.visibilityChanged=function(){this.subviews.forEach(function(e){return e.visibilityChanged()})},t.prototype.resetDisplayStyle=function(){this.domElement.style.display=this.hidden||this.alpha<=0?"none":null},Object.defineProperty(t.prototype,"opaque",{get:function(){return this._opaque},set:function(e){this._opaque=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"contentMode",{get:function(){return this._contentMode},set:function(e){this._contentMode=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tintColor",{get:function(){return this._tintColor||this.superview&&this.superview.tintColor||new UIColor_1.UIColor(0,122/255,1,1)},set:function(e){this._tintColor=e,this.tintColorDidChange()},enumerable:!0,configurable:!0}),t.prototype.convertPointToView=function(e,t){var i=this.convertPointToWindow(e);return i?t instanceof UIWindow?i:t.convertPointFromWindow(i)||e:e},t.prototype.convertPointFromView=function(e,t){return t.convertPointToView(e,this)},t.prototype.convertRectToView=function(e,t){var i=this.convertPointToView({x:e.x,y:e.y},t),n=this.convertPointToView({x:e.x+e.width,y:e.y},t),o=this.convertPointToView({x:e.x,y:e.y+e.height},t),r=this.convertPointToView({x:e.x+e.width,y:e.y+e.height},t);return{x:Math.min(i.x,n.x,o.x,r.x),y:Math.min(i.y,n.y,o.y,r.y),width:Math.max(i.x,n.x,o.x,r.x)-Math.min(i.x,n.x,o.x,r.x),height:Math.max(i.y,n.y,o.y,r.y)-Math.min(i.y,n.y,o.y,r.y)}},t.prototype.convertRectFromView=function(e,t){return t.convertRectToView(e,this)},t.prototype.convertPointToWindow=function(e){if(void 0!==this.window){for(var t=this,i={x:e.x,y:e.y};void 0!==t&&!(t instanceof UIWindow);){if(!UIAffineTransform_1.UIAffineTransformIsIdentity(t.transform)){var n=Matrix_1.Matrix.unmatrix(t.transform),o=new Matrix_1.Matrix;o.postTranslate(-t.frame.width/2,-t.frame.height/2),o.postRotate(n.degree/(180/Math.PI)),o.postScale(n.scale.x,n.scale.y),o.postTranslate(n.translate.x,n.translate.y),o.postTranslate(t.frame.width/2,t.frame.height/2);var r=i.x,a=i.y;i.x=r*o.a+a*o.c+o.tx,i.y=r*o.b+a*o.d+o.ty}void 0!==t.superview&&!0===t.superview.isScrollerView&&(i.x+=-t.superview.domElement.scrollLeft,i.y+=-t.superview.domElement.scrollTop),i.x+=t.frame.x,i.y+=t.frame.y,t=t.superview}return i}},t.prototype.convertPointFromWindow=function(e){if(null!=this.window){for(var t=this,i=[];void 0!==t&&!(t instanceof UIWindow);)i.unshift(t),t=t.superview;var n={x:e.x,y:e.y};return i.forEach(function(e){if(void 0!==e.superview&&!0===e.superview.isScrollerView&&(n.x-=-e.superview.domElement.scrollLeft,n.y-=-e.superview.domElement.scrollTop),n.x-=e.frame.x,n.y-=e.frame.y,!UIAffineTransform_1.UIAffineTransformIsIdentity(e.transform)){var t=Matrix_1.Matrix.unmatrix(e.transform),i=new Matrix_1.Matrix;i.postTranslate(-e.frame.width/2,-e.frame.height/2),i.postRotate(t.degree/(180/Math.PI)),i.postScale(t.scale.x,t.scale.y),i.postTranslate(t.translate.x,t.translate.y),i.postTranslate(e.frame.width/2,e.frame.height/2);var o=1/(i.a*i.d+i.c*-i.b),r=n.x,a=n.y;n.x=i.d*o*r+-i.c*o*a+(i.ty*i.c-i.tx*i.d)*o,n.y=i.a*o*a+-i.b*o*r+(-i.ty*i.a+i.tx*i.b)*o}}),n}},t.prototype.hitTest=function(e){if(this.userInteractionEnabled&&this.alpha>0&&!this.hidden&&this.pointInside(e)){for(var t=this._subviews.length-1;t>=0;t--){var i=this._subviews[t],n=i.convertPointFromView(e,this),o=i.hitTest(n);if(void 0!==o)return o}return this}},t.prototype.touchesBegan=function(e){this.gestureRecognizers.filter(function(e){return e.enabled}).forEach(function(t){t.handleTouch(e)}),this.superview&&this.superview.touchesBegan(e)},t.prototype.touchesMoved=function(e){this.gestureRecognizers.filter(function(e){return e.enabled}).forEach(function(t){t.handleTouch(e)}),this.superview&&this.superview.touchesMoved(e)},t.prototype.touchesEnded=function(e){this.gestureRecognizers.filter(function(e){return e.enabled}).forEach(function(t){t.handleTouch(e)}),this.superview&&this.superview.touchesEnded(e)},t.prototype.touchesCancelled=function(e){this.gestureRecognizers.filter(function(e){return e.enabled}).forEach(function(t){t.handleTouch(e)}),this.superview&&this.superview.touchesCancelled(e)},t.prototype.touchesWheel=function(e){this.superview&&this.superview.touchesWheel(e)},t.prototype.intrinsicContentSize=function(){},t.prototype.pointInside=function(e){return e.x>=0-this.touchAreaInsets.left&&e.y>=0-this.touchAreaInsets.top&&e.x<=this.frame.width+this.touchAreaInsets.right&&e.y<=this.frame.height+this.touchAreaInsets.bottom},t}(EventEmitter_1.EventEmitter);exports.UIView=UIView;var UIWindow=function(e){function t(){var t=e.call(this)||this;return t.shouldPreventDefault=!0,t.currentTouchesID=[],t.touches={},t.upCount=new Map,t.upTimestamp=new Map,t.mouseDowned=!1,t._rootViewController=void 0,t.presentedViewControllers=[],t.setupTouches(),t}return __extends(t,e),t.prototype.handleMouseWheel=function(e){var t=!0,i={x:e.pageX,y:e.pageY},n={x:-e.deltaX,y:-e.deltaY},o=this.hitTest(i);if(o){if(o instanceof UINativeTouchView)return t=!1,!1;o.touchesWheel(n)}t&&e.preventDefault()},t.prototype.handleTouchStart=function(e){for(var t=this,i=this.standardlizeTouches(e),n=function(e){var n=i[e],r=o.standardlizeTouchIdentifier(n);o.currentTouchesID.push(r);var a={x:n.pageX,y:n.pageY},s=o.hitTest(a);if(s){if(s instanceof UINativeTouchView)return o.shouldPreventDefault=!1,{value:!1};var u=new UITouch_1.UITouch;o.touches[r]=u,u.identifier=r,u.phase=UITouch_1.UITouchPhase.began,u.tapCount=function(){var e,i;try{for(var n=__values(t.upCount),o=n.next();!o.done;o=n.next()){var r=__read(o.value,2),s=r[0],u=r[1],h=t.upTimestamp.get(s)||0;if(Date.now()/1e3-h<1&&Math.abs(s.x-a.x)<44&&Math.abs(s.y-a.y)<44)return u+1}}catch(t){e={error:t}}finally{try{o&&!o.done&&(i=n.return)&&i.call(n)}finally{if(e)throw e.error}}return 1}(),u.timestamp=Date.now()/1e3,u.window=o,u.windowPoint=a,u.view=s,0==u.identifier&&exports.sharedVelocityTracker.addMovement(u),u.view.touchesBegan([u])}},o=this,r=0;r<i.length;r++){var a=n(r);if("object"==typeof a)return a.value}this.shouldPreventDefault&&e.preventDefault()},t.prototype.handleTouchMove=function(e){for(var t=this.standardlizeTouches(e),i=0;i<t.length;i++){var n=t[i],o=this.standardlizeTouchIdentifier(n),r={x:n.pageX,y:n.pageY},a=this.touches[o];if(void 0===a)return!1;a.phase=UITouch_1.UITouchPhase.moved,a.timestamp=Date.now()/1e3,a.windowPoint=r,0==a.identifier&&exports.sharedVelocityTracker.addMovement(a),a.view&&a.view.touchesMoved([a])}this.shouldPreventDefault&&e.preventDefault()},t.prototype.handleTouchEnd=function(e){for(var t=this.standardlizeTouches(e),i=0;i<t.length;i++){var n=t[i],o=this.standardlizeTouchIdentifier(n),r={x:n.pageX,y:n.pageY},a=this.touches[o];void 0!==a&&(a.phase=UITouch_1.UITouchPhase.ended,a.timestamp=Date.now()/1e3,a.windowPoint=r,0==a.identifier&&exports.sharedVelocityTracker.addMovement(a),a.view&&a.view.touchesEnded([a]));var s=this.currentTouchesID.indexOf(o);s>=0&&this.currentTouchesID.splice(s,1)}if(0==this.currentTouchesID.length){for(var u in this.upCount.clear(),this.upTimestamp.clear(),this.touches)if(this.touches.hasOwnProperty(u)){var h=this.touches[u];h.windowPoint&&(this.upCount.set(h.windowPoint,h.tapCount),this.upTimestamp.set(h.windowPoint,h.timestamp))}this.touches={},exports.sharedVelocityTracker.reset(),setTimeout(function(){UIView.recognizedGesture=void 0},0)}this.shouldPreventDefault&&e.preventDefault(),0==this.currentTouchesID.length&&(this.shouldPreventDefault=!0)},t.prototype.handleTouchCancel=function(e){for(var t=this.standardlizeTouches(e),i=0;i<t.length;i++){var n=t[i],o=this.standardlizeTouchIdentifier(n),r={x:n.pageX,y:n.pageY},a=this.touches[o];a&&(a.phase=UITouch_1.UITouchPhase.cancelled,a.timestamp=Date.now()/1e3,a.windowPoint=r,0==a.identifier&&exports.sharedVelocityTracker.addMovement(a),a.view&&a.view.touchesCancelled([a]))}this.upCount.clear(),this.upTimestamp.clear(),this.touches={},this.shouldPreventDefault&&e.preventDefault(),this.shouldPreventDefault=!0},t.prototype.standardlizeTouches=function(e){if(e.changedTouches)return new Array(e.changedTouches.length).fill(0).map(function(t,i){return e.changedTouches[i]}).map(function(t){return t.identifier<-100||t.identifier>100?(t.identifier_2=function(){for(var i=0;i<e.touches.length;i++)if(e.touches[i].identifier===t.identifier)return i;return 0}(),t):t});if(e.constructor.toString().startsWith("function MouseEvent()")){var t=e;return[{identifier:0,pageX:t.pageX,pageY:t.pageY}]}return[]},t.prototype.standardlizeTouchIdentifier=function(e){return"number"==typeof e.identifier_2?e.identifier_2:e.identifier},t.prototype.setupTouches=function(){var e=this;"ontouchend"in document?(this.domElement.addEventListener("touchstart",function(t){e.handleTouchStart(t)}),this.domElement.addEventListener("touchmove",function(t){e.handleTouchMove(t)}),this.domElement.addEventListener("touchend",function(t){e.handleTouchEnd(t)}),this.domElement.addEventListener("touchcancel",function(t){e.handleTouchCancel(t)})):(this.domElement.addEventListener("mousedown",function(t){e.mouseDowned=!0,e.handleTouchStart(t)}),this.domElement.addEventListener("mousemove",function(t){e.mouseDowned&&e.handleTouchMove(t)}),this.domElement.addEventListener("mouseup",function(t){e.handleTouchEnd(t),e.mouseDowned=!1})),"onmousewheel"in document&&this.domElement.addEventListener("mousewheel",function(t){e.handleMouseWheel(t),e.mouseDowned=!1})},Object.defineProperty(t.prototype,"rootViewController",{get:function(){return this._rootViewController},set:function(e){this._rootViewController&&(this._rootViewController.window=void 0,this._rootViewController.iView.removeFromSuperview()),this._rootViewController=e,this._rootViewController&&(this._rootViewController.window=this,this.addSubview(this._rootViewController.iView))},enumerable:!0,configurable:!0}),t.prototype.presentViewController=function(e,t,i){var n=this;void 0===i&&(i=void 0),this.presentedViewControllers.push(e),e.window=this,this.addSubview(e.iView),Router_1.Router.shared.addRoute(e,function(){e.dismissViewController(!1)}),t?(e.iView.frame={x:0,y:this.bounds.height,width:this.bounds.width,height:this.bounds.height},UIAnimator_1.UIAnimator.bouncy(0,24,function(){e.iView.frame=n.bounds},function(){n.presentedViewControllers.forEach(function(t){t!=e&&(t.iView.hidden=!0)}),i&&i()})):(e.iView.frame=this.bounds,this.presentedViewControllers.forEach(function(t){t!=e&&(t.iView.hidden=!0)}),i&&i())},t.prototype.dismissViewController=function(e,t){var i=this;if(void 0===t&&(t=void 0),this.presentedViewControllers.length>0){var n=this.presentedViewControllers[this.presentedViewControllers.length-1],o=n.presentingViewController;if(void 0===o)return;o.iView.hidden=!1;var r=this.presentedViewControllers.indexOf(n);r>=0&&this.presentedViewControllers.splice(r,1),n.viewWillDisappear(e),o.viewWillAppear(e),n.presentingViewController&&(n.presentingViewController.presentedViewController=void 0),n.presentingViewController=void 0,n.window=void 0,Router_1.Router.shared.popToRoute(o),e?UIAnimator_1.UIAnimator.bouncy(0,24,function(){n.iView.frame={x:0,y:i.bounds.height,width:i.bounds.width,height:i.bounds.height}},function(){n.iView.removeFromSuperview(),t&&t(),n.viewDidDisappear(e),o.viewDidAppear(e)}):(n.iView.removeFromSuperview(),t&&t(),n.viewDidDisappear(e),o.viewDidAppear(e))}},t.prototype.layoutSubviews=function(){e.prototype.layoutSubviews.call(this),this.rootViewController&&(this.rootViewController.iView.frame=this.bounds)},t}(UIView);exports.UIWindow=UIWindow;var UINativeTouchView=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(UIView);exports.UINativeTouchView=UINativeTouchView;
    },{"../coregraphics/CALayer":3,"../kimi/EventEmitter":17,"./UIAffineTransform":23,"./UIAnimator":25,"./UIColor":31,"./UIEdgeInsets":34,"./UIEnums":35,"./UIRect":54,"./UITouch":71,"./helpers/Matrix":78,"./helpers/Router":80}],73:[function(require,module,exports){
    "use strict";var __extends=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function o(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}();Object.defineProperty(exports,"__esModule",{value:!0});var EventEmitter_1=require("../kimi/EventEmitter"),UIView_1=require("./UIView"),UIColor_1=require("./UIColor"),UINavigationBar_1=require("./UINavigationBar"),UITabBarItem_1=require("./UITabBarItem"),UIEdgeInsets_1=require("./UIEdgeInsets"),Router_1=require("./helpers/Router"),UIViewController=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._isUIViewController=!0,t._title=void 0,t._view=void 0,t.safeAreaInsets=UIEdgeInsets_1.UIEdgeInsetsZero,t.parentViewController=void 0,t.presentedViewController=void 0,t.presentingViewController=void 0,t.childViewControllers=[],t.navigationItem=new UINavigationBar_1.UINavigationItem,t.hidesBottomBarWhenPushed=!1,t.tabBarItem=new UITabBarItem_1.UITabBarItem,t._window=void 0,t}return __extends(t,e),Object.defineProperty(t.prototype,"title",{get:function(){return this._title},set:function(e){this._title=e,this.navigationItem.viewController=this,this.navigationItem.setNeedsUpdate(),this.navigationController&&this.navigationController.updateBrowserTitle()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"view",{get:function(){return this.iView},set:function(e){void 0===this._view&&(this._view=e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"iView",{get:function(){return this.loadViewIfNeed(),this._view},enumerable:!0,configurable:!0}),t.prototype.loadViewIfNeed=function(){void 0===this._view&&(this.loadView(),this._view&&(this._view.viewDelegate=this),this.viewDidLoad())},t.prototype.attachToElement=function(e,t){void 0===t&&(t=UIEdgeInsets_1.UIEdgeInsetsZero),e.setAttribute("xt_key_element","true"),Router_1.Router.shared.addListenter(),this.iView.attachToElement(e,this,t)},t.prototype.appendToElement=function(e,t){void 0===t&&(t=UIEdgeInsets_1.UIEdgeInsetsZero),this.iView.attachToElement(e,this,t,!0)},t.prototype.loadView=function(){this.view=new UIView_1.UIView,this.iView.backgroundColor=UIColor_1.UIColor.white},t.prototype.viewDidLoad=function(){this.navigationItem.viewController=this},t.prototype.viewWillAppear=function(e){this.childViewControllers.forEach(function(t){return t.viewWillAppear(e)})},t.prototype.viewDidAppear=function(e){this.childViewControllers.forEach(function(t){return t.viewDidAppear(e)})},t.prototype.viewWillDisappear=function(e){this.childViewControllers.forEach(function(t){return t.viewWillDisappear(e)})},t.prototype.viewDidDisappear=function(e){this.childViewControllers.forEach(function(t){return t.viewDidDisappear(e)})},t.prototype.viewWillLayoutSubviews=function(){this.emit("viewWillLayoutSubviews",this)},t.prototype.viewDidLayoutSubviews=function(){},t.prototype.presentViewController=function(e,t,i){void 0===t&&(t=!0),void 0===i&&(i=void 0);var o=this.window;if(void 0!==o){var r=this.visibleViewController;void 0!==r&&void 0===r.presentedViewController&&void 0===e.presentingViewController&&void 0===e.parentViewController&&(r.viewWillDisappear(0!=t),e.viewWillAppear(0!=t),e.presentingViewController=r,r.presentedViewController=e,o.presentViewController(e,0!=t,function(){i&&i(),r.viewDidDisappear(0!=t),e.viewDidAppear(0!=t)}))}},t.prototype.dismissViewController=function(e,t){void 0===e&&(e=!0),void 0===t&&(t=void 0);var i=this.window;void 0!==i&&i.dismissViewController(0!=e,function(){t&&t()})},t.prototype.addChildViewController=function(e){if(e!=this){if(e.parentViewController){if(e.parentViewController==this)return;e.parentViewController.removeFromParentViewController()}e.willMoveToParentViewController(this),this.childViewControllers.push(e),e.parentViewController=this,e.didMoveToParentViewController(this)}},t.prototype.removeFromParentViewController=function(){if(this.parentViewController){var e=this.parentViewController;this.willMoveToParentViewController(void 0);var t=e.childViewControllers.indexOf(this);t>=0&&e.childViewControllers.splice(t,1),this.parentViewController=void 0,this.didMoveToParentViewController(void 0)}},t.prototype.willMoveToParentViewController=function(e){},t.prototype.didMoveToParentViewController=function(e){},t.prototype.didAddSubview=function(e){},Object.defineProperty(t.prototype,"navigationController",{get:function(){for(var e=this;null!=e;){if(!0===e._isUINavigationController)return e;e=e.parentViewController}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tabBarController",{get:function(){for(var e=this;null!=e;){if(!0===e._isUITabBarController)return e;e=e.parentViewController}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"window",{get:function(){return this._window||(this.parentViewController?this.parentViewController.window:void 0)},set:function(e){this._window=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"visibleViewController",{get:function(){return this.window&&this.window.presentedViewControllers.length>0?this.window.presentedViewControllers[this.window.presentedViewControllers.length-1]:this.window?this.window.rootViewController:void 0},enumerable:!0,configurable:!0}),t.prototype.setNeedsStatusBarAppearanceUpdate=function(){},t}(EventEmitter_1.EventEmitter);exports.UIViewController=UIViewController;
    },{"../kimi/EventEmitter":17,"./UIColor":31,"./UIEdgeInsets":34,"./UINavigationBar":44,"./UITabBarItem":66,"./UIView":72,"./helpers/Router":80}],74:[function(require,module,exports){
    "use strict";var __extends=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(exports,"__esModule",{value:!0});var UIView_1=require("./UIView"),UIWebView=function(e){function t(){var t=e.call(this)||this;return t.iframeElement=document.createElement("iframe"),t.title=void 0,t.URL=void 0,t.loading=!1,t.iframeElement.style.border="none",t.iframeElement.style.position="absolute",t.iframeElement.style.width="100%",t.iframeElement.style.height="100%",t.iframeElement.style.overflow="scroll",t.domElement.appendChild(t.iframeElement),t.iframeElement.addEventListener("loadstart",function(){t.loading=!0}),t.iframeElement.addEventListener("load",function(){t.iframeElement.contentWindow&&(t.title=t.iframeElement.contentWindow.document.title),t.loading=!1}),t}return __extends(t,e),t.prototype.loadRequest=function(e){this.URL=e.URL,this.iframeElement.src=e.URL.absoluteString},t.prototype.loadHTMLString=function(e,t){this.URL=t,this.iframeElement.src=URL.createObjectURL(new Blob([e]))},t.prototype.goBack=function(){this.iframeElement.contentWindow&&this.iframeElement.contentWindow.history.back()},t.prototype.goForward=function(){this.iframeElement.contentWindow&&this.iframeElement.contentWindow.history.forward()},t.prototype.reload=function(){this.iframeElement.contentWindow&&this.iframeElement.contentWindow.location.reload(!0)},t.prototype.stopLoading=function(){this.iframeElement.contentWindow&&this.iframeElement.contentWindow.stop()},t.prototype.evaluateJavaScript=function(e,t){try{t(this.iframeElement.contentWindow.eval(e),void 0)}catch(e){t(void 0,e)}},t}(UIView_1.UINativeTouchView);exports.UIWebView=UIWebView;
    },{"./UIView":72}],75:[function(require,module,exports){
    "use strict";var NEWTON_ITERATIONS=4,NEWTON_MIN_SLOPE=.001,SUBDIVISION_PRECISION=1e-7,SUBDIVISION_MAX_ITERATIONS=10,kSplineTableSize=11,kSampleStepSize=1/(kSplineTableSize-1),float32ArraySupported="function"==typeof Float32Array;function A(e,r){return 1-3*r+3*e}function B(e,r){return 3*r-6*e}function C(e){return 3*e}function calcBezier(e,r,n){return((A(r,n)*e+B(r,n))*e+C(r))*e}function getSlope(e,r,n){return 3*A(r,n)*e*e+2*B(r,n)*e+C(r)}function binarySubdivide(e,r,n,S,t){var i,a,o=0;do{(i=calcBezier(a=r+(n-r)/2,S,t)-e)>0?n=a:r=a}while(Math.abs(i)>SUBDIVISION_PRECISION&&++o<SUBDIVISION_MAX_ITERATIONS);return a}function newtonRaphsonIterate(e,r,n,S){for(var t=0;t<NEWTON_ITERATIONS;++t){var i=getSlope(r,n,S);if(0===i)return r;r-=(calcBezier(r,n,S)-e)/i}return r}module.exports=function(e,r,n,S){if(!(0<=e&&e<=1&&0<=n&&n<=1))throw new Error("bezier x values must be in [0, 1] range");var t=float32ArraySupported?new Float32Array(kSplineTableSize):new Array(kSplineTableSize);if(e!==r||n!==S)for(var i=0;i<kSplineTableSize;++i)t[i]=calcBezier(i*kSampleStepSize,e,n);return function(i){return e===r&&n===S?i:0===i?0:1===i?1:calcBezier(function(r){for(var S=0,i=1,a=kSplineTableSize-1;i!==a&&t[i]<=r;++i)S+=kSampleStepSize;var o=S+(r-t[--i])/(t[i+1]-t[i])*kSampleStepSize,l=getSlope(o,e,n);return l>=NEWTON_MIN_SLOPE?newtonRaphsonIterate(r,o,e,n):0===l?o:binarySubdivide(r,S,S+kSampleStepSize,e,n)}(i),r,S)}};
    },{}],76:[function(require,module,exports){
    "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var IdelQueue=function(){function t(){this.queueFlag=0,this.queue=[],this.isBusy=!1,this.countOfLocks=0}return t.prototype.add=function(t){return this.isBusy?(this.queue.push(t),this.queueFlag+"."+(this.queue.length-1)):(t(),"")},t.prototype.cancel=function(t){if("string"==typeof t&&parseInt(t.split(".")[0])===this.queueFlag){var e=parseInt(t.split(".")[1]);this.queue[e]=this.noOpt}},t.prototype.consume=function(){this.queue.forEach(function(t){return t()}),this.queue=[],this.queueFlag++},t.prototype.markBusy=function(){this.isBusy=!0,this.countOfLocks++},t.prototype.markIdel=function(){this.countOfLocks--,this.countOfLocks<=0&&(this.isBusy=!1,this.consume())},t.prototype.noOpt=function(){},t.shared=new t,t}();exports.IdelQueue=IdelQueue;
    },{}],77:[function(require,module,exports){
    "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var Bezier=require("./Bezier"),LinearAndCurveAnimator=function(){function t(t){void 0===t&&(t=!1),this.isCurve=t,this.duration=0,this.startValue=0,this.currentValue=0,this.endValue=0,this.startTime=0,this.cancelled=!1,this.bezier=void 0,this.allListenners=[],t&&(this.bezier=Bezier(.42,0,1,1))}return t.prototype.addListener=function(t){this.allListenners.push(t)},t.prototype.start=function(){this.startTime=Date.now(),this.doFrame()},t.prototype.doFrame=function(){var t=this;if(!this.cancelled){var e=(Date.now()-this.startTime)/this.duration;this.bezier&&(e=this.bezier(e)),this.currentValue=this.startValue+(this.endValue-this.startValue)*e,this.allListenners.forEach(function(e){return e.onUpdate(t.currentValue)}),1-e<=1e-6?this.allListenners.forEach(function(t){return t.onEnd()}):this.rafHandler=requestAnimationFrame(this.doFrame.bind(this))}},t.prototype.cancel=function(){this.cancelled=!0,cancelAnimationFrame(this.rafHandler)},t}();exports.LinearAndCurveAnimator=LinearAndCurveAnimator;
    },{"./Bezier":75}],78:[function(require,module,exports){
    "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var MatrixAlgorithm=function(){function t(){this.props=[],this.props[0]=1,this.props[1]=0,this.props[2]=0,this.props[3]=0,this.props[4]=0,this.props[5]=1,this.props[6]=0,this.props[7]=0,this.props[8]=0,this.props[9]=0,this.props[10]=1,this.props[11]=0,this.props[12]=0,this.props[13]=0,this.props[14]=0,this.props[15]=1}return t.prototype.rotate=function(t){if(0===t)return this;var s=Math.cos(t),p=Math.sin(t);return this._t(s,-p,0,0,p,s,0,0,0,0,1,0,0,0,0,1)},t.prototype.rotateX=function(t){if(0===t)return this;var s=Math.cos(t),p=Math.sin(t);return this._t(1,0,0,0,0,s,-p,0,0,p,s,0,0,0,0,1)},t.prototype.rotateY=function(t){if(0===t)return this;var s=Math.cos(t),p=Math.sin(t);return this._t(s,0,p,0,0,1,0,0,-p,0,s,0,0,0,0,1)},t.prototype.rotateZ=function(t){if(0===t)return this;var s=Math.cos(t),p=Math.sin(t);return this._t(s,-p,0,0,p,s,0,0,0,0,1,0,0,0,0,1)},t.prototype.shear=function(t,s){return this._t(1,s,t,1,0,0)},t.prototype.skew=function(t,s){return this.shear(Math.tan(t),Math.tan(s))},t.prototype.skewFromAxis=function(t,s){var p=Math.cos(s),r=Math.sin(s);return this._t(p,r,0,0,-r,p,0,0,0,0,1,0,0,0,0,1)},t.prototype.scale=function(t,s,p){return p=isNaN(p)?1:p,1==t&&1==s&&1==p?this:this._t(t,0,0,0,0,s,0,0,0,0,p,0,0,0,0,1)},t.prototype.setTransform=function(t,s,p,r,o,i,h,a,e,n,c,u,y,l,x,f){return this.props[0]=t,this.props[1]=s,this.props[2]=p,this.props[3]=r,this.props[4]=o,this.props[5]=i,this.props[6]=h,this.props[7]=a,this.props[8]=e,this.props[9]=n,this.props[10]=c,this.props[11]=u,this.props[12]=y,this.props[13]=l,this.props[14]=x,this.props[15]=f,this},t.prototype.translate=function(t,s,p){return p=isNaN(p)?0:p,0!==t||0!==s||0!==p?this._t(1,0,0,0,0,1,0,0,0,0,1,0,t,s,p,1):this},t.prototype._t=function(t,s,p,r,o,i,h,a,e,n,c,u,y,l,x,f){this.transform(t,s,p,r,o,i,h,a,e,n,c,u,y,l,x,f)},t.prototype.transform=function(t,s,p,r,o,i,h,a,e,n,c,u,y,l,x,f){if(1===t&&0===s&&0===p&&0===r&&0===o&&1===i&&0===h&&0===a&&0===e&&0===n&&1===c&&0===u)return 0===y&&0===l&&0===x||(this.props[12]=this.props[12]*t+this.props[13]*o+this.props[14]*e+this.props[15]*y,this.props[13]=this.props[12]*s+this.props[13]*i+this.props[14]*n+this.props[15]*l,this.props[14]=this.props[12]*p+this.props[13]*h+this.props[14]*c+this.props[15]*x,this.props[15]=this.props[12]*r+this.props[13]*a+this.props[14]*u+this.props[15]*f),this;var d=this.props[0],M=this.props[1],v=this.props[2],m=this.props[3],g=this.props[4],b=this.props[5],A=this.props[6],P=this.props[7],_=this.props[8],w=this.props[9],T=this.props[10],I=this.props[11],N=this.props[12],S=this.props[13],k=this.props[14],q=this.props[15];return this.props[0]=d*t+M*o+v*e+m*y,this.props[1]=d*s+M*i+v*n+m*l,this.props[2]=d*p+M*h+v*c+m*x,this.props[3]=d*r+M*a+v*u+m*f,this.props[4]=g*t+b*o+A*e+P*y,this.props[5]=g*s+b*i+A*n+P*l,this.props[6]=g*p+b*h+A*c+P*x,this.props[7]=g*r+b*a+A*u+P*f,this.props[8]=_*t+w*o+T*e+I*y,this.props[9]=_*s+w*i+T*n+I*l,this.props[10]=_*p+w*h+T*c+I*x,this.props[11]=_*r+w*a+T*u+I*f,this.props[12]=N*t+S*o+k*e+q*y,this.props[13]=N*s+S*i+k*n+q*l,this.props[14]=N*p+S*h+k*c+q*x,this.props[15]=N*r+S*a+k*u+q*f,this},t.prototype.clone=function(t){var s;for(s=0;s<16;s+=1)t.props[s]=this.props[s]},t.prototype.cloneFromProps=function(t){var s;for(s=0;s<16;s+=1)this.props[s]=t[s]},t.prototype.applyToPoint=function(t,s,p){return{x:t*this.props[0]+s*this.props[4]+p*this.props[8]+this.props[12],y:t*this.props[1]+s*this.props[5]+p*this.props[9]+this.props[13],z:t*this.props[2]+s*this.props[6]+p*this.props[10]+this.props[14]}},t.prototype.applyToX=function(t,s,p){return t*this.props[0]+s*this.props[4]+p*this.props[8]+this.props[12]},t.prototype.applyToY=function(t,s,p){return t*this.props[1]+s*this.props[5]+p*this.props[9]+this.props[13]},t.prototype.applyToZ=function(t,s,p){return t*this.props[2]+s*this.props[6]+p*this.props[10]+this.props[14]},t.prototype.applyToPointArray=function(t,s,p){return[t*this.props[0]+s*this.props[4]+p*this.props[8]+this.props[12],t*this.props[1]+s*this.props[5]+p*this.props[9]+this.props[13],t*this.props[2]+s*this.props[6]+p*this.props[10]+this.props[14]]},t.prototype.applyToPointStringified=function(t,s){return Math.round(t*this.props[0]+s*this.props[4]+this.props[12])+","+Math.round(t*this.props[1]+s*this.props[5]+this.props[13])},t}();exports.MatrixAlgorithm=MatrixAlgorithm;var Matrix=function(){function t(t,s,p,r,o,i){void 0===t&&(t=1),void 0===s&&(s=0),void 0===p&&(p=0),void 0===r&&(r=1),void 0===o&&(o=0),void 0===i&&(i=0),this.a=t,this.b=s,this.c=p,this.d=r,this.tx=o,this.ty=i}return t.unmatrix=function(t){var s=t.a,p=t.b,r=t.c,o=t.d;if(s*o==p*r)return{scale:{x:1,y:1},degree:0,translate:{x:0,y:0}};var i=Math.sqrt(s*s+p*p),h=(s/=i)*r+(p/=i)*o;r-=s*h,o-=p*h;var a=Math.sqrt(r*r+o*o);return h/=a,s*(o/=a)<p*(r/=a)&&(s=-s,p=-p,h=-h,i=-i),{scale:{x:i,y:a},degree:Math.atan2(p,s)/(Math.PI/180),translate:{x:t.tx,y:t.ty}}},t.prototype.setValues=function(t){this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty},t.prototype.getValues=function(){return{a:this.a,b:this.b,c:this.c,d:this.d,tx:this.tx,ty:this.ty}},t.prototype.isIdentity=function(){return 1==this.a&&0==this.b&&0==this.c&&1==this.d&&0==this.tx&&0==this.ty},t.prototype.setScale=function(s,p){var r=new MatrixAlgorithm,o=t.unmatrix(this);r.rotate(-o.degree*Math.PI/180),r.scale(s||o.scale.x,p||o.scale.y,1),r.translate(o.translate.x,o.translate.y,0),this.a=r.props[0],this.b=r.props[1],this.c=r.props[4],this.d=r.props[5],this.tx=r.props[12],this.ty=r.props[13]},t.prototype.postScale=function(s,p){var r=new MatrixAlgorithm,o=t.unmatrix(this);r.rotate(-o.degree*Math.PI/180),r.scale(o.scale.x,o.scale.y,1),r.translate(o.translate.x,o.translate.y,0),r.scale(s||1,p||1,1),this.a=r.props[0],this.b=r.props[1],this.c=r.props[4],this.d=r.props[5],this.tx=r.props[12],this.ty=r.props[13]},t.prototype.setTranslate=function(s,p){var r=new MatrixAlgorithm,o=t.unmatrix(this);r.rotate(-o.degree*Math.PI/180),r.scale(o.scale.x,o.scale.y,1),r.translate(s||o.translate.x,p||o.translate.y,0),this.a=r.props[0],this.b=r.props[1],this.c=r.props[4],this.d=r.props[5],this.tx=r.props[12],this.ty=r.props[13]},t.prototype.postTranslate=function(s,p){var r=new MatrixAlgorithm,o=t.unmatrix(this);r.rotate(-o.degree*Math.PI/180),r.scale(o.scale.x,o.scale.y,1),r.translate(o.translate.x,o.translate.y,0),r.translate(s||0,p||0,0),this.a=r.props[0],this.b=r.props[1],this.c=r.props[4],this.d=r.props[5],this.tx=r.props[12],this.ty=r.props[13]},t.prototype.setRotate=function(s){var p=new MatrixAlgorithm,r=t.unmatrix(this);p.rotate(-s||-r.degree*Math.PI/180),p.scale(r.scale.x,r.scale.y,1),p.translate(r.translate.x,r.translate.y,0),this.a=p.props[0],this.b=p.props[1],this.c=p.props[4],this.d=p.props[5],this.tx=p.props[12],this.ty=p.props[13]},t.prototype.postRotate=function(s){var p=new MatrixAlgorithm,r=t.unmatrix(this);p.rotate(-r.degree*Math.PI/180),p.scale(r.scale.x,r.scale.y,1),p.translate(r.translate.x,r.translate.y,0),p.rotate(-s),this.a=p.props[0],this.b=p.props[1],this.c=p.props[4],this.d=p.props[5],this.tx=p.props[12],this.ty=p.props[13]},t.prototype.preConcat=function(t){var s=new MatrixAlgorithm;s.props[0]=t.a,s.props[1]=t.b,s.props[4]=t.c,s.props[5]=t.d,s.props[12]=t.tx,s.props[13]=t.ty,s.transform(this.a,this.b,0,0,this.c,this.d,0,0,0,0,1,0,this.tx,this.ty,0,1),this.a=s.props[0],this.b=s.props[1],this.c=s.props[4],this.d=s.props[5],this.tx=s.props[12],this.ty=s.props[13]},t.prototype.concat=function(t){var s=new MatrixAlgorithm;s.props[0]=this.a,s.props[1]=this.b,s.props[4]=this.c,s.props[5]=this.d,s.props[12]=this.tx,s.props[13]=this.ty,s.transform(t.a,t.b,0,0,t.c,t.d,0,0,0,0,1,0,t.tx,t.ty,0,1),this.a=s.props[0],this.b=s.props[1],this.c=s.props[4],this.d=s.props[5],this.tx=s.props[12],this.ty=s.props[13]},t}();exports.Matrix=Matrix;
    },{}],79:[function(require,module,exports){
    "use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.currentAnimationTimeMillis=function(){return"object"==typeof window.performance?window.performance.now():Date.now()};
    },{}],80:[function(require,module,exports){
    "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var Router=function(){function t(){var t=this;this.routes={},this.locked=!1,this.hashChangeListener=function(o){if(t.locked)t.locked=!1;else{var e=o.oldURL.split("#")[1];void 0!==t.routes[e]&&(t.routes[e](),delete t.routes[e])}}}return t.prototype.addListenter=function(){this.clear(),"#"!==window.location.hash&&""!==window.location.hash&&(window.location.hash=""),window.addEventListener("hashchange",this.hashChangeListener)},t.prototype.addRoute=function(t,o){var e=this.createHash();t.__hash=e,this.routes[e]=o,this.locked=!0,window.location.hash=e},t.prototype.popToRoute=function(t){t.__hash&&(window.location.hash=t.__hash)},t.prototype.clear=function(){this.routes={},this.locked=!1,window.removeEventListener("hashchange",this.hashChangeListener)},t.prototype.createHash=function(){return"xt_router_"+Math.floor(65536*(1+Math.random())).toString(16).substring(1)+"_"+Math.floor(65536*(1+Math.random())).toString(16).substring(1)+"_"+Math.floor(65536*(1+Math.random())).toString(16).substring(1)+"_"+Math.floor(65536*(1+Math.random())).toString(16).substring(1)},t.shared=new t,t}();exports.Router=Router;
    },{}],81:[function(require,module,exports){
    "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var Now_1=require("./Now"),ViscousFluidInterpolator=function(){function t(){}return t.viscousFluid=function(i){if((i*=t.VISCOUS_FLUID_SCALE)<1)i-=1-Math.exp(-i);else{i=.36787944117+(i=1-Math.exp(1-i))*(1-.36787944117)}return i},t.prototype.getInterpolation=function(i){var s=t.VISCOUS_FLUID_NORMALIZE*t.viscousFluid(i);return s>0?s+t.VISCOUS_FLUID_OFFSET:s},t.VISCOUS_FLUID_SCALE=8,t}();ViscousFluidInterpolator.VISCOUS_FLUID_NORMALIZE=1/ViscousFluidInterpolator.viscousFluid(1),ViscousFluidInterpolator.VISCOUS_FLUID_OFFSET=1-ViscousFluidInterpolator.VISCOUS_FLUID_NORMALIZE*ViscousFluidInterpolator.viscousFluid(1);var Scroller=function(){function t(){this.mode=0,this.startX=0,this.startY=0,this.finalX=0,this.finalY=0,this.minX=0,this.maxX=0,this.minY=0,this.maxY=0,this.currX=0,this.currY=0,this.startTime=0,this.duration=0,this.durationReciprocal=0,this.deltaX=0,this.deltaY=0,this.finished=!1,this.flywheel=!1,this.velocity=0,this.currVelocity=0,this.distance=0,this.flingFriction=.015,this.deceleration=0,this.physicalCoeff=0,this.finished=!0,this.interpolator=new ViscousFluidInterpolator,this.deceleration=this.computeDeceleration(.015),this.physicalCoeff=this.computeDeceleration(.84)}return t.prototype.setFriction=function(t){this.deceleration=this.computeDeceleration(t),this.flingFriction=t},t.prototype.computeDeceleration=function(t){return 61774.04967999999*t},t.prototype.forceFinished=function(t){this.finished=t},t.prototype.getCurrVelocity=function(){return this.mode==t.FLING_MODE?this.currVelocity:this.velocity-this.deceleration*this.timePassed()/2e3},t.prototype.computeScrollOffset=function(){if(this.finished)return!1;var i=Now_1.currentAnimationTimeMillis()-this.startTime;if(i<this.duration)switch(this.mode){case t.SCROLL_MODE:var s=this.interpolator.getInterpolation(i*this.durationReciprocal);this.currX=this.startX+Math.round(s*this.deltaX),this.currY=this.startY+Math.round(s*this.deltaY);break;case t.FLING_MODE:var r=i/this.duration,e=Math.floor(t.NB_SAMPLES*r),n=1,h=0;if(e<t.NB_SAMPLES){var o=e/t.NB_SAMPLES,a=(e+1)/t.NB_SAMPLES,l=t.SPLINE_POSITION[e];n=l+(r-o)*(h=(t.SPLINE_POSITION[e+1]-l)/(a-o))}this.currVelocity=h*this.distance/(1e3*this.duration),this.currX=this.startX+Math.round(n*(this.finalX-this.startX)),this.currX=Math.min(this.currX,this.maxX),this.currX=Math.max(this.currX,this.minX),this.currY=this.startY+Math.round(n*(this.finalY-this.startY)),this.currY=Math.min(this.currY,this.maxY),this.currY=Math.max(this.currY,this.minY),this.currX==this.finalX&&this.currY==this.finalY&&(this.finished=!0)}else this.currX=this.finalX,this.currY=this.finalY,this.finished=!0;return!0},t.prototype.startScroll=function(i,s,r,e,n){void 0===n&&(n=t.DEFAULT_DURATION),this.mode=t.SCROLL_MODE,this.finished=!1,this.duration=n,this.startTime=Now_1.currentAnimationTimeMillis(),this.startX=i,this.startY=s,this.finalX=i+r,this.finalY=s+e,this.deltaX=r,this.deltaY=e,this.durationReciprocal=1/this.duration},t.prototype.fling=function(i,s,r,e,n,h,o,a){this.mode=t.FLING_MODE,this.finished=!1;var l=Math.hypot(r,e);this.velocity=l,this.duration=this.getSplineFlingDuration(l),this.startTime=Now_1.currentAnimationTimeMillis(),this.startX=i,this.startY=s;var c=0==l?1:r/l,u=0==l?1:e/l,f=this.getSplineFlingDistance(l);this.distance=f*Math.sign(l),this.minX=n,this.maxX=h,this.minY=o,this.maxY=a,this.finalX=i+Math.round(f*c),this.finalX=Math.min(this.finalX,this.maxX),this.finalX=Math.max(this.finalX,this.minX),this.finalY=s+Math.round(f*u),this.finalY=Math.min(this.finalY,this.maxY),this.finalY=Math.max(this.finalY,this.minY)},t.prototype.getSplineDeceleration=function(i){return Math.log(t.INFLEXION*Math.abs(i)/(this.flingFriction*this.physicalCoeff))},t.prototype.getSplineFlingDuration=function(i){var s=this.getSplineDeceleration(i),r=t.DECELERATION_RATE-1;return 1e3*Math.exp(s/r)},t.prototype.getSplineFlingDistance=function(i){var s=this.getSplineDeceleration(i),r=t.DECELERATION_RATE-1;return this.flingFriction*this.physicalCoeff*Math.exp(t.DECELERATION_RATE/r*s)},t.prototype.abortAnimation=function(){this.currX=this.finalX,this.currY=this.finalY,this.finished=!0},t.prototype.extendDuration=function(t){var i=this.timePassed();this.duration=i+t,this.durationReciprocal=1/this.duration,this.finished=!1},t.prototype.timePassed=function(){return Now_1.currentAnimationTimeMillis()-this.startTime},t.prototype.setFinalX=function(t){this.finalX=t,this.deltaX=this.finalX-this.startX,this.finished=!1},t.prototype.setFinalY=function(t){this.finalY=t,this.deltaY=this.finalY-this.startY,this.finished=!1},t.prototype.isScrollingInDirection=function(t,i){return!this.finished&&Math.sign(t)==Math.sign(this.finalX-this.startX)&&Math.sign(i)==Math.sign(this.finalY-this.startY)},t.DEFAULT_DURATION=250,t.SCROLL_MODE=0,t.FLING_MODE=1,t.DECELERATION_RATE=Math.log(.78)/Math.log(.9),t.INFLEXION=.35,t.START_TENSION=.5,t.END_TENSION=1,t.P1=t.START_TENSION*t.INFLEXION,t.P2=1-t.END_TENSION*(1-t.INFLEXION),t.NB_SAMPLES=100,t.SPLINE_POSITION=[],t.SPLINE_TIME=[],t}();exports.Scroller=Scroller;for(var x_min=0,y_min=0,i=0;i<Scroller.NB_SAMPLES;i++){for(var alpha=i/Scroller.NB_SAMPLES,x_max=1,x=0,tx=0,coef=0;tx=(coef=3*(x=x_min+(x_max-x_min)/2)*(1-x))*((1-x)*Scroller.P1+x*Scroller.P2)+x*x*x,!(Math.abs(tx-alpha)<1e-5);)tx>alpha?x_max=x:x_min=x;Scroller.SPLINE_POSITION[i]=coef*((1-x)*Scroller.START_TENSION+x)+x*x*x;for(var y_max=1,y=0,dy=0;dy=(coef=3*(y=y_min+(y_max-y_min)/2)*(1-y))*((1-y)*Scroller.START_TENSION+y)+y*y*y,!(Math.abs(dy-alpha)<1e-5);)dy>alpha?y_max=y:y_min=y;Scroller.SPLINE_TIME[i]=coef*((1-y)*Scroller.P1+y*Scroller.P2)+y*y*y}Scroller.SPLINE_POSITION[Scroller.NB_SAMPLES]=Scroller.SPLINE_TIME[Scroller.NB_SAMPLES]=1;
    },{"./Now":79}],82:[function(require,module,exports){
    "use strict";Object.defineProperty(exports,"__esModule",{value:!0});var UIRect_1=require("../UIRect"),measureSpan=document.createElement("span"),TextMeasurer=function(){function e(){}return e.measureAttributedText=function(e,t){return document.body instanceof HTMLBodyElement?(null===measureSpan.parentNode?(measureSpan.style.opacity="0.0",measureSpan.style.position="absolute",measureSpan.style.left="-10000000px",measureSpan.style.top="-10000000px",document.body.appendChild(measureSpan)):(measureSpan.innerHTML="",measureSpan.setAttribute("style",""),measureSpan.style.opacity="0.0",measureSpan.style.position="absolute",measureSpan.style.left="-10000000px",measureSpan.style.top="-10000000px"),measureSpan.style.overflow="hidden",measureSpan.style.wordWrap=null,measureSpan.style.wordBreak=null,measureSpan.style.display="-webkit-box",measureSpan.style.webkitBoxOrient="vertical",measureSpan.style.maxWidth=t.width.toString()+"px",measureSpan.appendChild(e.toHTMLText()),{x:0,y:0,width:Math.min(t.width,Math.ceil(measureSpan.offsetWidth+1)),height:Math.min(t.height,Math.ceil(measureSpan.offsetHeight))}):UIRect_1.UIRectZero},e.measureText=function(e,t){if(!(document.body instanceof HTMLBodyElement))return UIRect_1.UIRectZero;if(null===measureSpan.parentNode?(measureSpan.style.opacity="0.0",measureSpan.style.position="absolute",measureSpan.style.left="-10000000px",measureSpan.style.top="-10000000px",document.body.appendChild(measureSpan)):(measureSpan.innerHTML="",measureSpan.setAttribute("style",""),measureSpan.style.opacity="0.0",measureSpan.style.position="absolute",measureSpan.style.left="-10000000px",measureSpan.style.top="-10000000px"),measureSpan.style.fontSize=t.font.pointSize.toString()+"px",measureSpan.style.fontFamily="string"==typeof t.font.fontName?t.font.fontName:null,measureSpan.style.fontWeight="string"==typeof t.font.fontStyle?t.font.fontStyle:null,measureSpan.style.fontStyle="string"==typeof t.font.fontStyle?t.font.fontStyle:null,measureSpan.style.letterSpacing=t.letterSpace?t.letterSpace.toString():null,1===t.numberOfLines||void 0===t.numberOfLines)return measureSpan.style.overflow="hidden",measureSpan.style.wordWrap=null,measureSpan.style.wordBreak=null,measureSpan.style.display="inline-block",measureSpan.style.setProperty("-webkit-line-clamp",null),measureSpan.style.whiteSpace="nowrap",measureSpan.innerText=e,{x:0,y:0,width:Math.min(t.inRect.width,Math.ceil(measureSpan.offsetWidth+1)),height:Math.ceil(measureSpan.offsetHeight)};measureSpan.style.overflow="hidden",measureSpan.style.wordWrap=null,measureSpan.style.wordBreak=null,measureSpan.style.display="-webkit-box",measureSpan.style.webkitBoxOrient="vertical",measureSpan.style.maxWidth=t.inRect.width.toString()+"px",measureSpan.innerText=e;var a=0==t.numberOfLines?99999:t.numberOfLines,n=16;t.font&&(n=Math.max(1.5*t.font.pointSize,t.font.pointSize+12));var s=Math.min(Math.floor(t.inRect.height/n),a);return s>0&&measureSpan.style.setProperty("-webkit-line-clamp",s.toString()),{x:0,y:0,width:Math.min(t.inRect.width,Math.ceil(measureSpan.offsetWidth+1)),height:Math.min(t.inRect.height,Math.ceil(measureSpan.offsetHeight))}},e}();exports.TextMeasurer=TextMeasurer;
    },{"../UIRect":54}],83:[function(require,module,exports){
    !function(t,i){"object"==typeof exports&&"undefined"!=typeof module?i(exports):"function"==typeof define&&define.amd?define(["exports"],i):i(t.d3=t.d3||{})}(this,function(t){"use strict";var i=Math.PI,s=2*i,h=s-1e-6;function _(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function e(){return new _}_.prototype=e.prototype={constructor:_,moveTo:function(t,i){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+i)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,i){this._+="L"+(this._x1=+t)+","+(this._y1=+i)},quadraticCurveTo:function(t,i,s,h){this._+="Q"+ +t+","+ +i+","+(this._x1=+s)+","+(this._y1=+h)},bezierCurveTo:function(t,i,s,h,_,e){this._+="C"+ +t+","+ +i+","+ +s+","+ +h+","+(this._x1=+_)+","+(this._y1=+e)},arcTo:function(t,s,h,_,e){t=+t,s=+s,h=+h,_=+_,e=+e;var n=this._x1,o=this._y1,r=h-t,a=_-s,u=n-t,c=o-s,f=u*u+c*c;if(e<0)throw new Error("negative radius: "+e);if(null===this._x1)this._+="M"+(this._x1=t)+","+(this._y1=s);else if(f>1e-6)if(Math.abs(c*r-a*u)>1e-6&&e){var x=h-n,y=_-o,M=r*r+a*a,l=x*x+y*y,d=Math.sqrt(M),p=Math.sqrt(f),v=e*Math.tan((i-Math.acos((M+f-l)/(2*d*p)))/2),b=v/p,w=v/d;Math.abs(b-1)>1e-6&&(this._+="L"+(t+b*u)+","+(s+b*c)),this._+="A"+e+","+e+",0,0,"+ +(c*x>u*y)+","+(this._x1=t+w*r)+","+(this._y1=s+w*a)}else this._+="L"+(this._x1=t)+","+(this._y1=s)},arc:function(t,_,e,n,o,r){t=+t,_=+_;var a=(e=+e)*Math.cos(n),u=e*Math.sin(n),c=t+a,f=_+u,x=1^r,y=r?n-o:o-n;if(e<0)throw new Error("negative radius: "+e);null===this._x1?this._+="M"+c+","+f:(Math.abs(this._x1-c)>1e-6||Math.abs(this._y1-f)>1e-6)&&(this._+="L"+c+","+f),e&&(y<0&&(y=y%s+s),y>h?this._+="A"+e+","+e+",0,1,"+x+","+(t-a)+","+(_-u)+"A"+e+","+e+",0,1,"+x+","+(this._x1=c)+","+(this._y1=f):y>1e-6&&(this._+="A"+e+","+e+",0,"+ +(y>=i)+","+x+","+(this._x1=t+e*Math.cos(o))+","+(this._y1=_+e*Math.sin(o))))},rect:function(t,i,s,h){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+i)+"h"+ +s+"v"+ +h+"h"+-s+"Z"},toString:function(){return this._}},t.path=e,Object.defineProperty(t,"__esModule",{value:!0})});
    },{}],84:[function(require,module,exports){
    !function(t,i){"object"==typeof exports&&"undefined"!=typeof module?module.exports=i():"function"==typeof define&&define.amd?define(i):t.rebound=i()}(this,function(){"use strict";var t=void 0;"undefined"!=typeof window&&(t=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame),t||"undefined"==typeof process||"node"!==process.title||(t=setImmediate);var i=t=t||function(t){window.setTimeout(t,1e3/60)},e=Array.prototype.concat,n=Array.prototype.slice;function r(t){return i(t)}function o(t,i){var e=t.indexOf(i);-1!==e&&t.splice(e,1)}var s={};function h(t){if(s[t])return s[t];var i=t.replace("#","");3===i.length&&(i=i[0]+i[0]+i[1]+i[1]+i[2]+i[2]);var e=i.match(/.{2}/g);if(!e||e.length<3)throw new Error("Expected a color string of format #rrggbb");var n={r:parseInt(e[0],16),g:parseInt(e[1],16),b:parseInt(e[2],16)};return s[t]=n,n}function a(t,i,e){var n=t.toString(16),r=i.toString(16),o=e.toString(16);return"#"+(n=n.length<2?"0"+n:n)+(r=r.length<2?"0"+r:r)+(o=o.length<2?"0"+o:o)}var p=Object.freeze({bind:function(t,i){for(var r=arguments.length,o=Array(r>2?r-2:0),s=2;s<r;s++)o[s-2]=arguments[s];return function(){for(var r=arguments.length,s=Array(r),h=0;h<r;h++)s[h]=arguments[h];t.apply(i,e.call(o,n.call(s)))}},extend:function(t,i){for(var e in i)i.hasOwnProperty(e)&&(t[e]=i[e])},onFrame:r,removeFirst:o,hexToRGB:h,rgbToHex:a});function u(t,i,e,n,r){return n+(t-i)/(e-i)*(r-n)}var c=Object.freeze({mapValueInRange:u,interpolateColor:function(t,i,e){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,o=arguments[5],s=h(i),p=h(e),c=Math.floor(u(t,n,r,s.r,p.r)),l=Math.floor(u(t,n,r,s.g,p.g)),g=Math.floor(u(t,n,r,s.b,p.b));return o?"rgb("+c+","+l+","+g+")":a(c,l,g)},degreesToRadians:function(t){return t*Math.PI/180},radiansToDegrees:function(t){return 180*t/Math.PI}});function l(t){return 3.62*(t-30)+194}function g(t){return 3*(t-8)+25}var f=Object.freeze({tensionFromOrigamiValue:l,origamiValueFromTension:function(t){return(t-194)/3.62+30},frictionFromOrigamiValue:g,origamiFromFriction:function(t){return(t-25)/3+8}}),_=function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")},d=Object.assign||function(t){for(var i=1;i<arguments.length;i++){var e=arguments[i];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}return t},S=function(){function t(){_(this,t),this.springSystem=null}return t.prototype.run=function(){var t=v.call(this);r(function(){t.loop(Date.now())})},t}(),y=function(){function t(i){_(this,t),this.springSystem=null,this.time=0,this.running=!1,this.timestep=i||16.667}return t.prototype.run=function(){var t=v.call(this);if(!this.running){for(this.running=!0;!t.getIsIdle();)t.loop(this.time+=this.timestep);this.running=!1}},t}(),m=function(){function t(){_(this,t),this.springSystem=null,this.time=0,this.running=!1}return t.prototype.run=function(){},t.prototype.step=function(t){v.call(this).loop(this.time+=t)},t}();function v(){if(null==this.springSystem)throw new Error("cannot run looper without a springSystem");return this.springSystem}var E=Object.freeze({AnimationLooper:S,SimulationLooper:y,SteppingSimulationLooper:m}),I=function(){function t(i,e){_(this,t),this.bounciness=i,this.speed=e;var n=this.normalize(i/1.7,0,20);n=this.projectNormal(n,0,.8);var r=this.normalize(e/1.7,0,20);this.bouncyTension=this.projectNormal(r,.5,200),this.bouncyFriction=this.quadraticOutInterpolation(n,this.b3Nobounce(this.bouncyTension),.01)}return t.prototype.normalize=function(t,i,e){return(t-i)/(e-i)},t.prototype.projectNormal=function(t,i,e){return i+t*(e-i)},t.prototype.linearInterpolation=function(t,i,e){return t*e+(1-t)*i},t.prototype.quadraticOutInterpolation=function(t,i,e){return this.linearInterpolation(2*t-t*t,i,e)},t.prototype.b3Friction1=function(t){return 7e-4*Math.pow(t,3)-.031*Math.pow(t,2)+.64*t+1.28},t.prototype.b3Friction2=function(t){return 44e-6*Math.pow(t,3)-.006*Math.pow(t,2)+.36*t+2},t.prototype.b3Friction3=function(t){return 4.5e-7*Math.pow(t,3)-332e-6*Math.pow(t,2)+.1078*t+5.84},t.prototype.b3Nobounce=function(t){return t<=18?this.b3Friction1(t):t>18&&t<=44?this.b3Friction2(t):this.b3Friction3(t)},t}(),T=function(){function t(i,e){_(this,t),this.tension=i,this.friction=e}return t.fromOrigamiTensionAndFriction=function(i,e){return new t(l(i),g(e))},t.fromBouncinessAndSpeed=function(i,e){var n=new I(i,e);return t.fromOrigamiTensionAndFriction(n.bouncyTension,n.bouncyFriction)},t.coastingConfigWithOrigamiFriction=function(i){return new t(0,g(i))},t}();T.DEFAULT_ORIGAMI_SPRING_CONFIG=T.fromOrigamiTensionAndFriction(40,7);var A=function t(){_(this,t),this.position=0,this.velocity=0},R=function(){function t(i){_(this,t),this.listeners=[],this._startValue=0,this._currentState=new A,this._displacementFromRestThreshold=.001,this._endValue=0,this._overshootClampingEnabled=!1,this._previousState=new A,this._restSpeedThreshold=.001,this._tempState=new A,this._timeAccumulator=0,this._wasAtRest=!0,this._id="s"+t._ID++,this._springSystem=i}return t.prototype.destroy=function(){this.listeners=[],this._springSystem.deregisterSpring(this)},t.prototype.getId=function(){return this._id},t.prototype.setSpringConfig=function(t){return this._springConfig=t,this},t.prototype.getSpringConfig=function(){return this._springConfig},t.prototype.setCurrentValue=function(t,i){return this._startValue=t,this._currentState.position=t,i||this.setAtRest(),this.notifyPositionUpdated(!1,!1),this},t.prototype.getStartValue=function(){return this._startValue},t.prototype.getCurrentValue=function(){return this._currentState.position},t.prototype.getCurrentDisplacementDistance=function(){return this.getDisplacementDistanceForState(this._currentState)},t.prototype.getDisplacementDistanceForState=function(t){return Math.abs(this._endValue-t.position)},t.prototype.setEndValue=function(t){if(this._endValue===t&&this.isAtRest())return this;this._startValue=this.getCurrentValue(),this._endValue=t,this._springSystem.activateSpring(this.getId());for(var i=0,e=this.listeners.length;i<e;i++){var n=this.listeners[i].onSpringEndStateChange;n&&n(this)}return this},t.prototype.getEndValue=function(){return this._endValue},t.prototype.setVelocity=function(t){return t===this._currentState.velocity?this:(this._currentState.velocity=t,this._springSystem.activateSpring(this.getId()),this)},t.prototype.getVelocity=function(){return this._currentState.velocity},t.prototype.setRestSpeedThreshold=function(t){return this._restSpeedThreshold=t,this},t.prototype.getRestSpeedThreshold=function(){return this._restSpeedThreshold},t.prototype.setRestDisplacementThreshold=function(t){this._displacementFromRestThreshold=t},t.prototype.getRestDisplacementThreshold=function(){return this._displacementFromRestThreshold},t.prototype.setOvershootClampingEnabled=function(t){return this._overshootClampingEnabled=t,this},t.prototype.isOvershootClampingEnabled=function(){return this._overshootClampingEnabled},t.prototype.isOvershooting=function(){var t=this._startValue,i=this._endValue;return this._springConfig.tension>0&&(t<i&&this.getCurrentValue()>i||t>i&&this.getCurrentValue()<i)},t.prototype.advance=function(i,e){var n=this.isAtRest();if(!n||!this._wasAtRest){var r=e;e>t.MAX_DELTA_TIME_SEC&&(r=t.MAX_DELTA_TIME_SEC),this._timeAccumulator+=r;for(var o=this._springConfig.tension,s=this._springConfig.friction,h=this._currentState.position,a=this._currentState.velocity,p=this._tempState.position,u=this._tempState.velocity,c=void 0,l=void 0,g=void 0,f=void 0,_=void 0,d=void 0,S=void 0,y=void 0;this._timeAccumulator>=t.SOLVER_TIMESTEP_SEC;)this._timeAccumulator-=t.SOLVER_TIMESTEP_SEC,this._timeAccumulator<t.SOLVER_TIMESTEP_SEC&&(this._previousState.position=h,this._previousState.velocity=a),c=a,l=o*(this._endValue-p)-s*a,p=h+c*t.SOLVER_TIMESTEP_SEC*.5,g=u=a+l*t.SOLVER_TIMESTEP_SEC*.5,f=o*(this._endValue-p)-s*u,p=h+g*t.SOLVER_TIMESTEP_SEC*.5,_=u=a+f*t.SOLVER_TIMESTEP_SEC*.5,d=o*(this._endValue-p)-s*u,p=h+_*t.SOLVER_TIMESTEP_SEC,S=u=a+d*t.SOLVER_TIMESTEP_SEC,y=1/6*(l+2*(f+d)+(o*(this._endValue-p)-s*u)),h+=1/6*(c+2*(g+_)+S)*t.SOLVER_TIMESTEP_SEC,a+=y*t.SOLVER_TIMESTEP_SEC;this._tempState.position=p,this._tempState.velocity=u,this._currentState.position=h,this._currentState.velocity=a,this._timeAccumulator>0&&this._interpolate(this._timeAccumulator/t.SOLVER_TIMESTEP_SEC),(this.isAtRest()||this._overshootClampingEnabled&&this.isOvershooting())&&(this._springConfig.tension>0?(this._startValue=this._endValue,this._currentState.position=this._endValue):(this._endValue=this._currentState.position,this._startValue=this._endValue),this.setVelocity(0),n=!0);var m=!1;this._wasAtRest&&(this._wasAtRest=!1,m=!0);var v=!1;n&&(this._wasAtRest=!0,v=!0),this.notifyPositionUpdated(m,v)}},t.prototype.notifyPositionUpdated=function(t,i){for(var e=0,n=this.listeners.length;e<n;e++){var r=this.listeners[e];t&&r.onSpringActivate&&r.onSpringActivate(this),r.onSpringUpdate&&r.onSpringUpdate(this),i&&r.onSpringAtRest&&r.onSpringAtRest(this)}},t.prototype.systemShouldAdvance=function(){return!this.isAtRest()||!this.wasAtRest()},t.prototype.wasAtRest=function(){return this._wasAtRest},t.prototype.isAtRest=function(){return Math.abs(this._currentState.velocity)<this._restSpeedThreshold&&(this.getDisplacementDistanceForState(this._currentState)<=this._displacementFromRestThreshold||0===this._springConfig.tension)},t.prototype.setAtRest=function(){return this._endValue=this._currentState.position,this._tempState.position=this._currentState.position,this._currentState.velocity=0,this},t.prototype._interpolate=function(t){this._currentState.position=this._currentState.position*t+this._previousState.position*(1-t),this._currentState.velocity=this._currentState.velocity*t+this._previousState.velocity*(1-t)},t.prototype.getListeners=function(){return this.listeners},t.prototype.addListener=function(t){return this.listeners.push(t),this},t.prototype.removeListener=function(t){return o(this.listeners,t),this},t.prototype.removeAllListeners=function(){return this.listeners=[],this},t.prototype.currentValueIsApproximately=function(t){return Math.abs(this.getCurrentValue()-t)<=this.getRestDisplacementThreshold()},t}();R._ID=0,R.MAX_DELTA_TIME_SEC=.064,R.SOLVER_TIMESTEP_SEC=.001;var V=function(){function t(i){_(this,t),this.listeners=[],this._activeSprings=[],this._idleSpringIndices=[],this._isIdle=!0,this._lastTimeMillis=-1,this._springRegistry={},this.looper=i||new S,this.looper.springSystem=this}return t.prototype.setLooper=function(t){this.looper=t,t.springSystem=this},t.prototype.createSpring=function(t,i){var e=void 0;return e=void 0===t||void 0===i?T.DEFAULT_ORIGAMI_SPRING_CONFIG:T.fromOrigamiTensionAndFriction(t,i),this.createSpringWithConfig(e)},t.prototype.createSpringWithBouncinessAndSpeed=function(t,i){var e=void 0;return e=void 0===t||void 0===i?T.DEFAULT_ORIGAMI_SPRING_CONFIG:T.fromBouncinessAndSpeed(t,i),this.createSpringWithConfig(e)},t.prototype.createSpringWithConfig=function(t){var i=new R(this);return this.registerSpring(i),i.setSpringConfig(t),i},t.prototype.getIsIdle=function(){return this._isIdle},t.prototype.getSpringById=function(t){return this._springRegistry[t]},t.prototype.getAllSprings=function(){var t=[];for(var i in this._springRegistry)this._springRegistry.hasOwnProperty(i)&&t.push(this._springRegistry[i]);return t},t.prototype.registerSpring=function(t){this._springRegistry[t.getId()]=t},t.prototype.deregisterSpring=function(t){o(this._activeSprings,t),delete this._springRegistry[t.getId()]},t.prototype.advance=function(t,i){for(;this._idleSpringIndices.length>0;)this._idleSpringIndices.pop();for(var e=0,n=this._activeSprings.length;e<n;e++){var r=this._activeSprings[e];r.systemShouldAdvance()?r.advance(t/1e3,i/1e3):this._idleSpringIndices.push(this._activeSprings.indexOf(r))}for(;this._idleSpringIndices.length>0;){var o=this._idleSpringIndices.pop();o>=0&&this._activeSprings.splice(o,1)}},t.prototype.loop=function(t){var i=void 0;-1===this._lastTimeMillis&&(this._lastTimeMillis=t-1);var e=t-this._lastTimeMillis;this._lastTimeMillis=t;var n=0,r=this.listeners.length;for(n=0;n<r;n++)(i=this.listeners[n]).onBeforeIntegrate&&i.onBeforeIntegrate(this);for(this.advance(t,e),0===this._activeSprings.length&&(this._isIdle=!0,this._lastTimeMillis=-1),n=0;n<r;n++)(i=this.listeners[n]).onAfterIntegrate&&i.onAfterIntegrate(this);this._isIdle||this.looper.run()},t.prototype.activateSpring=function(t){var i=this._springRegistry[t];-1===this._activeSprings.indexOf(i)&&this._activeSprings.push(i),this.getIsIdle()&&(this._isIdle=!1,this.looper.run())},t.prototype.addListener=function(t){this.listeners.push(t)},t.prototype.removeListener=function(t){o(this.listeners,t)},t.prototype.removeAllListeners=function(){this.listeners=[]},t}();return d({},E,{OrigamiValueConverter:f,MathUtil:c,Spring:R,SpringConfig:T,SpringSystem:V,util:d({},p,c)})});
    },{}]},{},[20]);